!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ipa-rpg-home",[],t):"object"==typeof exports?exports["ipa-rpg-home"]=t():e["ipa-rpg-home"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),i=e[t[0]];return function(e,t,r){i.apply(this,[e,t,r].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(182),e.exports=n(155)},function(e,t,n){var i=n(3),r=n(26),a=n(13),s=n(14),o=n(27),c="prototype",l=function(e,t,n){var u,h,f,d,p=e&l.F,g=e&l.G,m=e&l.S,v=e&l.P,_=e&l.B,y=g?i:m?i[t]||(i[t]={}):(i[t]||{})[c],b=g?r:r[t]||(r[t]={}),w=b[c]||(b[c]={});g&&(n=t);for(u in n)h=!p&&y&&void 0!==y[u],f=(h?y:n)[u],d=_&&h?o(f,i):v&&"function"==typeof f?o(Function.call,f):f,y&&s(y,u,f,e&l.U),b[u]!=f&&a(b,u,d),v&&w[u]!=f&&(w[u]=f)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},[410,5],function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},[450,73,45,3],[415,4],[431,2,135,25,7],[445,33],[446,20],function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},[418,8,32,7],function(e,t,n){var i=n(3),r=n(13),a=n(11),s=n(45)("src"),o="toString",c=Function[o],l=(""+c).split(o);n(26).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,n,o){var c="function"==typeof n;c&&(a(n,"name")||r(n,"name",t)),e[t]!==n&&(c&&(a(n,s)||r(n,s,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:o?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,o,function(){return"function"==typeof this&&this[s]||c.call(this)})},function(e,t,n){var i=n(1),r=n(4),a=n(20),s=/"/g,o=function(e,t,n,i){var r=String(a(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+r+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(o),i(i.P+i.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},[444,58,20],[433,59,32,16,25,11,135,7],[436,11,10,103],function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(4);e.exports=function(e,t){return!!e&&i(function(){t?e.call(null,function(){},1):e.call(null)})}},[450,83,63,30],function(e,t,n){var i=n(27),r=n(58),a=n(10),s=n(9),o=n(224);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,h=6==e,f=5==e||h,d=t||o;return function(t,o,p){for(var g,m,v=a(t),_=r(v),y=i(o,p,3),b=s(_.length),w=0,x=n?d(t,b):c?d(t,0):void 0;b>w;w++)if((f||w in _)&&(g=_[w],m=y(g,w,v),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(u)return!1;return h?-1:l||u?u:x}}},function(e,t,n){var i=n(1),r=n(26),a=n(4);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",s)}},[447,5],function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},[414,12],function(e,t,n){var i=n(151),r=n(1),a=n(73)("metadata"),s=a.store||(a.store=new(n(154))),o=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var a=r.get(t);if(!a){if(!n)return;r.set(t,a=new i)}return a},c=function(e,t,n){var i=o(t,n,!1);return void 0!==i&&i.has(e)},l=function(e,t,n){var i=o(t,n,!1);return void 0===i?void 0:i.get(e)},u=function(e,t,n,i){o(n,i,!0).set(e,t)},h=function(e,t){var n=o(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},d=function(e){r(r.S,"Reflect",e)};e.exports={store:s,map:o,has:c,get:l,set:u,keys:h,key:f,exp:d}},function(e,t,n){"use strict";if(n(7)){var i=n(38),r=n(3),a=n(4),s=n(1),o=n(74),c=n(110),l=n(27),u=n(37),h=n(32),f=n(13),d=n(42),p=n(33),g=n(9),m=n(44),v=n(25),_=n(11),y=n(148),b=n(57),w=n(5),x=n(10),E=n(95),S=n(39),C=n(18),P=n(40).f,k=n(112),T=n(45),I=n(6),M=n(23),R=n(64),A=n(104),O=n(113),z=n(51),N=n(70),G=n(43),q=n(88),B=n(128),D=n(8),F=n(17),L=D.f,J=F.f,j=r.RangeError,U=r.TypeError,Q=r.Uint8Array,H="ArrayBuffer",Y="Shared"+H,V="BYTES_PER_ELEMENT",W="prototype",X=Array[W],K=c.ArrayBuffer,$=c.DataView,Z=M(0),ee=M(2),te=M(3),ne=M(4),ie=M(5),re=M(6),ae=R(!0),se=R(!1),oe=O.values,ce=O.keys,le=O.entries,ue=X.lastIndexOf,he=X.reduce,fe=X.reduceRight,de=X.join,pe=X.sort,ge=X.slice,me=X.toString,ve=X.toLocaleString,_e=I("iterator"),ye=I("toStringTag"),be=T("typed_constructor"),we=T("def_constructor"),xe=o.CONSTR,Ee=o.TYPED,Se=o.VIEW,Ce="Wrong length!",Pe=M(1,function(e,t){return Ae(A(e,e[we]),t)}),ke=a(function(){return 1===new Q(new Uint16Array([1]).buffer)[0]}),Te=!!Q&&!!Q[W].set&&a(function(){new Q(1).set({})}),Ie=function(e,t){if(void 0===e)throw U(Ce);var n=+e,i=g(e);if(t&&!y(n,i))throw j(Ce);return i},Me=function(e,t){var n=p(e);if(n<0||n%t)throw j("Wrong offset!");return n},Re=function(e){if(w(e)&&Ee in e)return e;throw U(e+" is not a typed array!")},Ae=function(e,t){if(!(w(e)&&be in e))throw U("It is not a typed array constructor!");return new e(t)},Oe=function(e,t){return ze(A(e,e[we]),t)},ze=function(e,t){for(var n=0,i=t.length,r=Ae(e,i);i>n;)r[n]=t[n++];return r},Ne=function(e,t,n){L(e,t,{get:function(){return this._d[n]}})},Ge=function(e){var t,n,i,r,a,s,o=x(e),c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,f=k(o);if(void 0!=f&&!E(f)){for(s=f.call(o),i=[],t=0;!(a=s.next()).done;t++)i.push(a.value);o=i}for(h&&c>2&&(u=l(u,arguments[2],2)),t=0,n=g(o.length),r=Ae(this,n);n>t;t++)r[t]=h?u(o[t],t):o[t];return r},qe=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Be=!!Q&&a(function(){ve.call(new Q(1))}),De=function(){return ve.apply(Be?ge.call(Re(this)):Re(this),arguments)},Fe={copyWithin:function(e,t){return B.call(Re(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Re(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return q.apply(Re(this),arguments)},filter:function(e){return Oe(this,ee(Re(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ie(Re(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Re(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Z(Re(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return se(Re(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Re(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(Re(this),arguments)},lastIndexOf:function(e){return ue.apply(Re(this),arguments)},map:function(e){return Pe(Re(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return he.apply(Re(this),arguments)},reduceRight:function(e){return fe.apply(Re(this),arguments)},reverse:function(){for(var e,t=this,n=Re(t).length,i=Math.floor(n/2),r=0;r<i;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return te(Re(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Re(this),e)},subarray:function(e,t){var n=Re(this),i=n.length,r=m(e,i);return new(A(n,n[we]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,g((void 0===t?i:m(t,i))-r))}},Le=function(e,t){return Oe(this,ge.call(Re(this),e,t))},Je=function(e){Re(this);var t=Me(arguments[1],1),n=this.length,i=x(e),r=g(i.length),a=0;if(r+t>n)throw j(Ce);for(;a<r;)this[t+a]=i[a++]},je={entries:function(){return le.call(Re(this))},keys:function(){return ce.call(Re(this))},values:function(){return oe.call(Re(this))}},Ue=function(e,t){return w(e)&&e[Ee]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Qe=function(e,t){return Ue(e,t=v(t,!0))?h(2,e[t]):J(e,t)},He=function(e,t,n){return!(Ue(e,t=v(t,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?L(e,t,n):(e[t]=n.value,e)};xe||(F.f=Qe,D.f=He),s(s.S+s.F*!xe,"Object",{getOwnPropertyDescriptor:Qe,defineProperty:He}),a(function(){me.call({})})&&(me=ve=function(){return de.call(this)});var Ye=d({},Fe);d(Ye,je),f(Ye,_e,je.values),d(Ye,{slice:Le,set:Je,constructor:function(){},toString:me,toLocaleString:De}),Ne(Ye,"buffer","b"),Ne(Ye,"byteOffset","o"),Ne(Ye,"byteLength","l"),Ne(Ye,"length","e"),L(Ye,ye,{get:function(){return this[Ee]}}),e.exports=function(e,t,n,c){c=!!c;var l=e+(c?"Clamped":"")+"Array",h="Uint8Array"!=l,d="get"+e,p="set"+e,m=r[l],v=m||{},_=m&&C(m),y=!m||!o.ABV,x={},E=m&&m[W],k=function(e,n){var i=e._d;return i.v[d](n*t+i.o,ke)},T=function(e,n,i){var r=e._d;c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*t+r.o,i,ke)},I=function(e,t){L(e,t,{get:function(){return k(this,t)},set:function(e){return T(this,t,e)},enumerable:!0})};y?(m=n(function(e,n,i,r){u(e,m,l,"_d");var a,s,o,c,h=0,d=0;if(w(n)){if(!(n instanceof K||(c=b(n))==H||c==Y))return Ee in n?ze(m,n):Ge.call(m,n);a=n,d=Me(i,t);var p=n.byteLength;if(void 0===r){if(p%t)throw j(Ce);if(s=p-d,s<0)throw j(Ce)}else if(s=g(r)*t,s+d>p)throw j(Ce);o=s/t}else o=Ie(n,!0),s=o*t,a=new K(s);for(f(e,"_d",{b:a,o:d,l:s,e:o,v:new $(a)});h<o;)I(e,h++)}),E=m[W]=S(Ye),f(E,"constructor",m)):N(function(e){new m(null),new m(e)},!0)||(m=n(function(e,n,i,r){u(e,m,l);var a;return w(n)?n instanceof K||(a=b(n))==H||a==Y?void 0!==r?new v(n,Me(i,t),r):void 0!==i?new v(n,Me(i,t)):new v(n):Ee in n?ze(m,n):Ge.call(m,n):new v(Ie(n,h))}),Z(_!==Function.prototype?P(v).concat(P(_)):P(v),function(e){e in m||f(m,e,v[e])}),m[W]=E,i||(E.constructor=m));var M=E[_e],R=!!M&&("values"==M.name||void 0==M.name),A=je.values;f(m,be,!0),f(E,Ee,l),f(E,Se,!0),f(E,we,m),(c?new m(1)[ye]==l:ye in E)||L(E,ye,{get:function(){return l}}),x[l]=m,s(s.G+s.W+s.F*(m!=v),x),s(s.S,l,{BYTES_PER_ELEMENT:t,from:Ge,of:qe}),V in E||f(E,V,t),s(s.P,l,Fe),G(l),s(s.P+s.F*Te,l,{set:Je}),s(s.P+s.F*!R,l,je),s(s.P+s.F*(E.toString!=me),l,{toString:me}),s(s.P+s.F*a(function(){new m(1).slice()}),l,{slice:Le}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!a(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:De}),z[l]=R?M:A,i||R||f(E,_e,A)}}else e.exports=function(){}},3,[429,45,5,11,8,4],function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},11,[431,54,117,85,47],[444,200,76],function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t){e.exports=!1},[430,2,141,91,103,90,93],[435,143,91],[438,143,91],function(e,t,n){var i=n(14);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(3),r=n(8),a=n(7),s=n(6)("species");e.exports=function(e){var t=i[e];a&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},[443,33],function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},26,[415,60],[418,35,56,47],function(e,t,n){var i=n(6)("unscopables"),r=Array.prototype;void 0==r[i]&&n(13)(r,i,{}),e.exports=function(e){r[i][e]=!0}},function(e,t,n){var i=n(27),r=n(137),a=n(95),s=n(2),o=n(9),c=n(112),l={},u={},t=e.exports=function(e,t,n,h,f){var d,p,g,m,v=f?function(){return e}:c(e),_=i(n,h,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(d=o(e.length);d>y;y++)if(m=t?_(s(p=e[y])[0],p[1]):_(e[y]),m===l||m===u)return m}else for(g=v.call(e);!(p=g.next()).done;)if(m=r(g,_,p.value,t),m===l||m===u)return m};t.BREAK=l,t.RETURN=u},function(e,t){e.exports={}},[439,8,11,6],function(e,t,n){var i=n(1),r=n(20),a=n(4),s=n(108),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),h=function(e,t,n){var r={},o=a(function(){return!!s[e]()||c[e]()!=c}),l=r[e]=o?t(f):s[e];n&&(r[n]=l),i(i.P+i.F*o,"String",r)},f=h.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=h},[410,61],51,32,[412,19,6],[421,19],function(e,t){t.f={}.propertyIsEnumerable},4,5,[438,122,77],45,[411,16,9,44],function(e,t,n){"use strict";var i=n(3),r=n(1),a=n(14),s=n(42),o=n(31),c=n(50),l=n(37),u=n(5),h=n(4),f=n(70),d=n(52),p=n(94);e.exports=function(e,t,n,g,m,v){var _=i[e],y=_,b=m?"set":"add",w=y&&y.prototype,x={},E=function(e){var t=w[e];a(w,e,"delete"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||w.forEach&&!h(function(){(new y).entries().next()}))){var S=new y,C=S[b](v?{}:-0,1)!=S,P=h(function(){S.has(1)}),k=f(function(e){new y(e)}),T=!v&&h(function(){for(var e=new y,t=5;t--;)e[b](t,t);return!e.has(-0)});k||(y=t(function(t,n){l(t,y,e);var i=p(new _,t,y);return void 0!=n&&c(n,m,i[b],i),i}),y.prototype=w,w.constructor=y),(P||T)&&(E("delete"),E("has"),m&&E("get")),(T||C)&&E(b),v&&w.clear&&delete w.clear}else y=g.getConstructor(t,e,m,b),s(y.prototype,n),o.NEED=!0;return d(y,e),x[e]=y,r(r.G+r.W+r.F*(y!=_),x),v||g.setStrong(y,e,m),y}},function(e,t,n){"use strict";var i=n(13),r=n(14),a=n(4),s=n(20),o=n(6);e.exports=function(e,t,n){var c=o(e),l=n(s,c,""[e]),u=l[0],h=l[1];a(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(r(String.prototype,e,u),i(RegExp.prototype,c,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},function(e,t,n){"use strict";var i=n(2);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(5),r=n(19),a=n(6)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},[427,6],function(e,t,n){e.exports=n(38)||!n(4)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(3)[e]})},function(e,t){t.f=Object.getOwnPropertySymbols},[441,3],function(e,t,n){for(var i,r=n(3),a=n(13),s=n(45),o=s("typed_array"),c=s("view"),l=!(!r.ArrayBuffer||!r.DataView),u=l,h=0,f=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<f;)(i=r[d[h++]])?(a(i.prototype,o,!0),a(i.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:o,VIEW:c}},19,20,function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(30),r=n(46),a=n(115),s=n(48),o="prototype",c=function(e,t,n){var l,u,h,f=e&c.F,d=e&c.G,p=e&c.S,g=e&c.P,m=e&c.B,v=e&c.W,_=d?r:r[t]||(r[t]={}),y=_[o],b=d?i:p?i[t]:(i[t]||{})[o];d&&(n=t);for(l in n)u=!f&&b&&void 0!==b[l],u&&l in _||(h=u?b[l]:n[l],_[l]=d&&"function"!=typeof b[l]?n[l]:m&&u?a(h,i):v&&b[l]==h?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[o]=e[o],t}(h):g&&"function"==typeof h?a(Function.call,h):h,g&&((_.virtual||(_.virtual={}))[l]=h,e&c.R&&y&&!y[l]&&s(y,l,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=!0},59,[439,35,34,22],[440,83,63],[441,30],33,[447,61],[448,30,46,79,87,35],[449,22],function(e,t,n){"use strict";var i=n(10),r=n(44),a=n(9);e.exports=function(e){for(var t=i(this),n=a(t.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);l>o;)t[o++]=e;return t}},[413,8,32],[416,5,3],77,function(e,t,n){var i=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(r){}}return!0}},[419,3],function(e,t,n){var i=n(5),r=n(102).set;e.exports=function(e,t,n){var a,s=t.constructor;return s!==n&&"function"==typeof s&&(a=s.prototype)!==n.prototype&&i(a)&&r&&r(e,a),e}},[422,51,6],[423,19],[425,39,32,52,13,6],[426,38,1,14,13,11,51,97,52,18,6],function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var i=n(3),r=n(109).set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,o=i.Promise,c="process"==n(19)(s);e.exports=function(){var e,t,n,l=function(){var i,r;for(c&&(i=s.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(a){throw e?n():t=void 0,a}}t=void 0,i&&i.enter()};if(c)n=function(){s.nextTick(l)};else if(a){var u=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),n=function(){h.data=u=!u}}else if(o&&o.resolve){var f=o.resolve();n=function(){f.then(l)}}else n=function(){r.call(i,l)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(5),r=n(2),a=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(27)(Function.call,n(17).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:a}},[440,73,45],function(e,t,n){var i=n(2),r=n(12),a=n(6)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||void 0==(n=i(s)[a])?t:r(n)}},[442,33,20],function(e,t,n){var i=n(69),r=n(20);e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){"use strict";var i=n(33),r=n(20);e.exports=function(e){var t=String(r(this)),n="",a=i(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var i,r,a,s=n(27),o=n(68),c=n(93),l=n(90),u=n(3),h=u.process,f=u.setImmediate,d=u.clearImmediate,p=u.MessageChannel,g=0,m={},v="onreadystatechange",_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){_.call(e.data)};f&&d||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){o("function"==typeof e?e:Function(e),t)},i(g),g},d=function(e){delete m[e]},"process"==n(19)(h)?i=function(e){h.nextTick(s(_,e,1))}:p?(r=new p,a=r.port2,r.port1.onmessage=y,i=s(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):i=v in l("script")?function(e){c.appendChild(l("script"))[v]=function(){c.removeChild(this),_.call(e)}}:function(e){setTimeout(s(_,e,1),0)}),e.exports={set:f,clear:d}},function(e,t,n){"use strict";var i=n(3),r=n(7),a=n(38),s=n(74),o=n(13),c=n(42),l=n(4),u=n(37),h=n(33),f=n(9),d=n(40).f,p=n(8).f,g=n(88),m=n(52),v="ArrayBuffer",_="DataView",y="prototype",b="Wrong length!",w="Wrong index!",x=i[v],E=i[_],S=i.Math,C=i.RangeError,P=i.Infinity,k=x,T=S.abs,I=S.pow,M=S.floor,R=S.log,A=S.LN2,O="buffer",z="byteLength",N="byteOffset",G=r?"_b":O,q=r?"_l":z,B=r?"_o":N,D=function(e,t,n){var i,r,a,s=Array(n),o=8*n-t-1,c=(1<<o)-1,l=c>>1,u=23===t?I(2,-24)-I(2,-77):0,h=0,f=e<0||0===e&&1/e<0?1:0;for(e=T(e),e!=e||e===P?(r=e!=e?1:0,i=c):(i=M(R(e)/A),e*(a=I(2,-i))<1&&(i--,a*=2),e+=i+l>=1?u/a:u*I(2,1-l),e*a>=2&&(i++,a/=2),i+l>=c?(r=0,i=c):i+l>=1?(r=(e*a-1)*I(2,t),i+=l):(r=e*I(2,l-1)*I(2,t),i=0));t>=8;s[h++]=255&r,r/=256,t-=8);for(i=i<<t|r,o+=t;o>0;s[h++]=255&i,i/=256,o-=8);return s[--h]|=128*f,s},F=function(e,t,n){var i,r=8*n-t-1,a=(1<<r)-1,s=a>>1,o=r-7,c=n-1,l=e[c--],u=127&l;for(l>>=7;o>0;u=256*u+e[c],c--,o-=8);for(i=u&(1<<-o)-1,u>>=-o,o+=t;o>0;i=256*i+e[c],c--,o-=8);if(0===u)u=1-s;else{if(u===a)return i?NaN:l?-P:P;i+=I(2,t),u-=s}return(l?-1:1)*i*I(2,u-t)},L=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},J=function(e){return[255&e]},j=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Q=function(e){return D(e,52,8)},H=function(e){return D(e,23,4)},Y=function(e,t,n){p(e[y],t,{get:function(){return this[n]}})},V=function(e,t,n,i){var r=+n,a=h(r);if(r!=a||a<0||a+t>e[q])throw C(w);var s=e[G]._b,o=a+e[B],c=s.slice(o,o+t);return i?c:c.reverse()},W=function(e,t,n,i,r,a){var s=+n,o=h(s);if(s!=o||o<0||o+t>e[q])throw C(w);for(var c=e[G]._b,l=o+e[B],u=i(+r),f=0;f<t;f++)c[l+f]=u[a?f:t-f-1]},X=function(e,t){u(e,x,v);var n=+t,i=f(n);if(n!=i)throw C(b);return i};if(s.ABV){if(!l(function(){new x})||!l(function(){new x(.5)})){x=function(e){return new k(X(this,e))};for(var K,$=x[y]=k[y],Z=d(k),ee=0;Z.length>ee;)(K=Z[ee++])in x||o(x,K,k[K]);a||($.constructor=x)}var te=new E(new x(2)),ne=E[y].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(E[y],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else x=function(e){var t=X(this,e);this._b=g.call(Array(t),0),this[q]=t},E=function(e,t,n){u(this,E,_),u(e,x,_);var i=e[q],r=h(t);if(r<0||r>i)throw C("Wrong offset!");if(n=void 0===n?i-r:f(n),r+n>i)throw C(b);this[G]=e,this[B]=r,this[q]=n},r&&(Y(x,z,"_l"),Y(E,O,"_b"),Y(E,z,"_l"),Y(E,N,"_o")),c(E[y],{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return L(V(this,4,e,arguments[1]))},getUint32:function(e){return L(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return F(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return F(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){W(this,1,e,J,t)},setUint8:function(e,t){W(this,1,e,J,t)},setInt16:function(e,t){W(this,2,e,j,t,arguments[2])},setUint16:function(e,t){W(this,2,e,j,t,arguments[2])},setInt32:function(e,t){W(this,4,e,U,t,arguments[2])},setUint32:function(e,t){W(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){W(this,4,e,H,t,arguments[2])},setFloat64:function(e,t){W(this,8,e,Q,t,arguments[2])}});m(x,v),m(E,_),o(E[y],s.VIEW,!0),t[v]=x,t[_]=E},[448,3,26,38,150,8],[451,57,6,51,26],[453,49,138,51,16,98],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(186),a=i(r),s=n(185),o=i(s),c="function"==typeof o["default"]&&"symbol"==typeof a["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof o["default"]&&e.constructor===o["default"]?"symbol":typeof e};t["default"]="function"==typeof o["default"]&&"symbol"===c(a["default"])?function(e){return"undefined"==typeof e?"undefined":c(e)}:function(e){return e&&"function"==typeof o["default"]&&e.constructor===o["default"]?"symbol":"undefined"==typeof e?"undefined":c(e)}},[414,193],[416,61,30],[420,47,60,116],[426,79,78,123,48,34,55,204,81,212,22],[430,54,209,77,82,116,199],[435,122,77],72,[437,34,36,195,82],function(e,t,n){e.exports=n(48)},[445,84],[446,76],[454,213,118],function(e,t,n){var i=n(19);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=i(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var i=n(10),r=n(44),a=n(9);e.exports=[].copyWithin||function(e,t){var n=i(this),s=a(n.length),o=r(e,s),c=r(t,s),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?s:r(l,s))-c,s-o),h=1;for(c<o&&o<c+u&&(h=-1,c+=u-1,o+=u-1);u-- >0;)c in n?n[o]=n[c]:delete n[o],o+=h,c+=h;return n}},function(e,t,n){var i=n(50);e.exports=function(e,t){var n=[];return i(e,!1,n.push,n,t),n}},function(e,t,n){var i=n(12),r=n(10),a=n(58),s=n(9);e.exports=function(e,t,n,o,c){i(t);var l=r(e),u=a(l),h=s(l.length),f=c?h-1:0,d=c?-1:1;if(n<2)for(;;){if(f in u){o=u[f],f+=d;break}if(f+=d,c?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:h>f;f+=d)f in u&&(o=t(o,u[f],f,l));return o}},function(e,t,n){"use strict";var i=n(12),r=n(5),a=n(68),s=[].slice,o={},c=function(e,t,n){if(!(t in o)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";o[t]=Function("F,a","return new F("+i.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=s.call(arguments,1),o=function(){var i=n.concat(s.call(arguments));return this instanceof o?c(t,i.length,i):a(t,i,e)};return r(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t,n){"use strict";var i=n(8).f,r=n(39),a=n(42),s=n(27),o=n(37),c=n(20),l=n(50),u=n(98),h=n(138),f=n(43),d=n(7),p=n(31).fastKey,g=d?"_s":"size",m=function(e,t){var n,i=p(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var h=e(function(e,i){o(e,h,t,"_i"),e._i=r(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&l(i,n,e[u],e)});return a(h.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[g]=0},"delete":function(e){var t=this,n=m(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[g]--}return!!n},forEach:function(e){o(this,h,"forEach");for(var t,n=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),d&&i(h.prototype,"size",{get:function(){return c(this[g])}}),h},def:function(e,t,n){var i,r,a=m(e,t);return a?a.v=n:(e._l=a={i:r=p(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=a),i&&(i.n=a),e[g]++,"F"!==r&&(e._i[r]=a)),e},getEntry:m,setStrong:function(e,t,n){u(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?h(0,n.k):"values"==t?h(0,n.v):h(0,[n.k,n.v]):(e._t=void 0,h(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){var i=n(57),r=n(129);e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return r(this)}}},function(e,t,n){"use strict";var i=n(42),r=n(31).getWeak,a=n(2),s=n(5),o=n(37),c=n(50),l=n(23),u=n(11),h=l(5),f=l(6),d=0,p=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},m=function(e,t){return h(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},"delete":function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var l=e(function(e,i){o(e,l,t,"_i"),e._i=d++,e._l=void 0,void 0!=i&&c(i,n,e[a],e)});return i(l.prototype,{"delete":function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this)["delete"](e):t&&u(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=r(e);return t===!0?p(this).has(e):t&&u(t,this._i)}}),l},def:function(e,t,n){var i=r(a(t),!0);return i===!0?p(e).set(t,n):i[e._i]=n,e},ufstore:p}},[420,7,4,90],function(e,t,n){var i=n(5),r=Math.floor;e.exports=function(e){return!i(e)&&isFinite(e)&&r(e)===e}},[424,2],function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var i=n(41),r=n(72),a=n(59),s=n(10),o=n(58),c=Object.assign;e.exports=!c||n(4)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=i})?function(e,t){for(var n=s(e),c=arguments.length,l=1,u=r.f,h=a.f;c>l;)for(var f,d=o(arguments[l++]),p=u?i(d).concat(u(d)):i(d),g=p.length,m=0;g>m;)h.call(d,f=p[m++])&&(n[f]=d[f]);return n}:c},[432,8,2,41,7],[434,16,40],[437,11,16,64,103],function(e,t,n){var i=n(41),r=n(16),a=n(59).f;e.exports=function(e){return function(t){for(var n,s=r(t),o=i(s),c=o.length,l=0,u=[];c>l;)a.call(s,n=o[l++])&&u.push(e?[n,s[n]]:s[n]);return u}}},function(e,t,n){var i=n(40),r=n(72),a=n(2),s=n(3).Reflect;e.exports=s&&s.ownKeys||function(e){var t=i.f(a(e)),n=r.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(3).parseFloat,r=n(53).trim;e.exports=1/i(n(108)+"-0")!==-(1/0)?function(e){var t=r(String(e),3),n=i(t);return 0===n&&"-"==t.charAt(0)?-0:n}:i},function(e,t,n){var i=n(3).parseInt,r=n(53).trim,a=n(108),s=/^[\-+]?0[xX]/;e.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(e,t){var n=r(String(e),3);return i(n,t>>>0||(s.test(n)?16:10))}:i},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var i=n(9),r=n(107),a=n(20);e.exports=function(e,t,n,s){var o=String(a(e)),c=o.length,l=void 0===n?" ":String(n),u=i(t);if(u<=c||""==l)return o;var h=u-c,f=r.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),s?f+o:o+f}},[449,6],function(e,t,n){"use strict";var i=n(132);e.exports=n(65)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,n){n(7)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(67)})},function(e,t,n){"use strict";var i=n(132);e.exports=n(65)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},function(e,t,n){"use strict";var i,r=n(23)(0),a=n(14),s=n(31),o=n(140),c=n(134),l=n(5),u=s.getWeak,h=Object.isExtensible,f=c.ufstore,d={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(l(e)){var t=u(e);return t===!0?f(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(this,e,t)}},m=e.exports=n(65)("WeakMap",p,g,c,!0,!0);7!=(new m).set((Object.freeze||Object)(d),7).get(d)&&(i=c.getConstructor(p),o(i.prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(e){var t=m.prototype,n=t[e];a(t,e,function(t,r){if(l(t)&&!h(t)){this._f||(this._f=new i);var a=this._f[e](t,r);return"set"==e?this:a}return n.call(this,t,r)})}))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(181),a=i(r);e.exports=function(e){var t=e.el,n=(e.providedDependencies,e.models,e.translate,e.basePath,document.createElement("canvas"));n.setAttribute("id","game"),n.setAttribute("width","640px"),n.setAttribute("height","480px"),n.style.position="fixed",n.style.left="calc(50% - 320px)",t.appendChild(n),fetch("/api/marketplace/v1/listing?filter=FEATURED").then(function(e){return e.json()}).then(function(e){return(0,a["default"])(e)})}},function(e,t,n){(function(e){"use strict";n(409);var t=n(170),i=n(171),r=n(172),a=n(173),s=n(174),o=n(175),c=n(176),l=(n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(177),n(178),n(179),n(180),"/wicket/resource/com.appdirect.wicket.resources.Resource/spa/themes/base/ipa/rpg-home/graphics/");Class.create("RPGJS",{_defaultData:function(e){e=e||{};var t={actors:{},system:{},map_infos:{},tilesets:{},
actions:{},autotiles:{},classes:{},items:{},weapons:{},armors:{},variables:{},switches:{},states:{},skills:{},elements:{},dynamic_events:{},common_events:{},animations:{}};for(var n in t)e[n]||(e[n]=t[n]);return e},maps:{},events:{},dyn_event:{},defines:function(e){return this.params=e,this.params.autoload=void 0==this.params.autoload||this.params.autoload,this},loadMaterials:function(t){CE.getJSON("Data/Materials.json",function(n){e.materials=n,t&&t()})},loadDatabase:function(t){var n=this;CE.getJSON("Data/Database.json",function(i){e.data=n._defaultData(i),t&&t()})},setData:function(t,n,i){"number"!=typeof n?e.materials[t]=n:(e.data[t][n]||(e.data[t][n]={}),e.data[t][n]=i)},setMaterials:function(t,n,i){"string"!=typeof n&&(e.materials[t]=n)},setMap:function(e,t){this.maps[e]=t},setEvent:function(e,t,n){this.events[e]||(this.events[e]={}),this.events[e][t]=n},setDynamicEvent:function(e,t){this.dyn_event[e]=t},getDynamicEvent:function(e){return this.dyn_event[e]},getGlobalEvent:function(e,t){return!!this.events[e]&&this.events[e][t]},load:function(t){var n=this;this.Switches=e.game_switches=Class.New("Game_Switches"),this.Variables=e.game_variables=Class.New("Game_Variables"),this.SelfSwitches=e.game_selfswitches=Class.New("Game_SelfSwitches"),this.Map=e.game_map=Class.New("Game_Map"),this.Actors=e.game_actors=Class.New("Game_Actors"),this.Player=e.game_player=Class.New("Game_Player"),this.Scene=this.scene,this.scene.load(function(){n.params.plugins?n.Plugin.add(n.params.plugins,function(){h.Plugin.call("Sprite","loadBeforeGame"),t&&t.call(n)}):t&&t.call(n)},this.params.scene_path)},ready:function(t){var n=this,i=[Animation,Input,Spritesheet,Scrolling,Window,Text,Effect];this.params.tiled&&i.push(Tiled),u=window.RPGJS_Canvas=CE.defines(this.params.canvas,this.params).extend(i).ready(function(){n.System=e.game_system=Class.New("Game_System"),e.game_save=Class.New("Game_Save"),n.params.autoload?n.loadMaterials(function(){n.loadDatabase(function(){n.load(t)})}):(e.materials={},e.data=n._defaultData(),n.Database&&(e.data=CE.extend(e.data,n.Database)),n.Materials&&(e.materials=n.Materials),n.load(t))})},scene:{map:function(e){var t=this.call("Scene_Map");return t.load(e),t},call:function(e,t){return u.Scene.call(e,t)},load:function(e,n){a(),c(),o(),s(),r(),t(),i(),e()}},loadScript:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=t,n.src=e+".js",document.getElementsByTagName("head")[0].appendChild(n)},Plugin:{list:[],_refreshScene:function(){for(var e=0;e<this.list.length;e++)this.list[e].Sprite.scene=u.Scene.get("Scene_Map")},add:function(e,t){function n(e,t){function n(e,n){return s++,Class.get(e+"_"+n)?(r[e]=Class.New(e+"_"+n),r.name=n,void(2==s&&t&&(r.Game._class_=r.Sprite,r.Sprite._class_=r.Game,r.Sprite.scene=u.Scene.get("Scene_Map"),a.list.push(r),t()))):void t()}function i(e,t,n){return e+"/"+t+"/"+n+"_"+t}var r={},s=0;e+=".js";var o=u.Materials.getBasePath(e),c=u.Materials.getFilename(e),l=["",""];o?(l[0]=i(o,c,"Game"),l[1]=i(o,c,"Sprite")):(l[0]=i("plugins",c,"Game"),l[1]=i("plugins",c,"Sprite")),h.loadScript(l[0],function(){n("Game",c)}),h.loadScript(l[1],function(){n("Sprite",c)})}function i(){s++,s==e.length&&t&&t()}var r,a=this,s=0;e instanceof Array||(e=[e]);for(var o=0;o<e.length;o++)r=e[o],n.call(this,r,i)},call:function(e,t,n){var i;n instanceof Array||(n=[n]);for(var r=0;r<this.list.length;r++)i=this.list[r][e],i[t]&&i[t].apply(i,n)}},Path:{tilesets:l+"Tilesets/",windowskins:l+"Windowskins/",autotiles:l+"Autotiles/",characters:l+"Characters/",animations:l+"Animations/",pictures:l+"Pictures/",battlers:l+"Battlers/",icons:l+"Icons/",tiles:l+"Tiles/",faces:l+"Faces/",fonts:l+"fonts/",gameovers:l+"Gameovers/",bgms:"Audio/BGM/",bgss:"Audio/BGS/",mes:"Audio/ME/",ses:"Audio/SE/",getFile:function(e,t,n){var i=this[e]+t,r={};return n?(r[e+"_"+n]=i,r):i},get:function(t,n,i,r){var a,s={};if(!e.materials[t]){if(h.params.ignoreLoadError)return!1;throw"[Path.get] "+t+" doesn't exist"}if(!e.materials[t][n]){if(h.params.ignoreLoadError)return!1;throw"[Path.get]"+t+" - "+n+" doesn't exist"}return a=(r?"":this[t])+e.materials[t][n],i?(s[t+"_"+n]=a,s):a},isSound:function(e){return"bgms"==e||"bgss"==e||"mes"==e||"ses"==e},loadMaterial:function(e,t,n){var i={},r=this.isSound(e)?"sounds":"images",a=this.get(e,t);i[e+"_"+t]=a,u.Materials.sounds[e+"_"+t]&&n&&n(),u.Materials.load(r,i,n)},load:function(e,t,n,i){var r={},a=this.isSound(e)?"sounds":"images";r[e+"_"+n]=this[e]+t,u.Materials.load(a,r,i)}}});var u,h=window.RPGJS=Class.New("RPGJS"),e=window}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";var t={actors:[],add:function(t,n){var i=e.data.actors[t];e.data.classes[i["class"]];n.name=i.name,n._id=t,n.maxLevel=i.level_max,i.params=i.params||{},i.params.exp?n.makeExpList(i.params.exp):n.makeExpList(25,30);for(var r={maxhp:[741,7467],maxsp:[534,5500],str:[67,635],dex:[54,564],agi:[58,582],"int":[36,349]},a=["maxhp","maxsp","str","dex","agi","int"],s=0;s<a.length;s++){var o=a[s];i.params[o]?n.setParam(o,i.params[o]):n.setParam(o,r[o][0],r[o][1],"proportional")}n.setClass(i["class"]),n.setLevel(i.level_min);var c=n.getCurrentParam("maxhp");n.initParamPoints("hp",c,0,"maxhp");var l=n.getCurrentParam("maxsp");n.initParamPoints("sp",l,0,"maxsp"),n.initParamPoints("atk",0,0,99999),n.initParamPoints("pdef",0,0,99999),n.initParamPoints("mdef",0,0,99999),n.addItem("weapons",i.weapon),n.addItem("armors",i.shield),n.addItem("armors",i.helmet),n.addItem("armors",i.body_armor),n.addItem("armors",i.accessory),n.equipItem("weapons",i.weapon),n.equipItem("armors",i.shield),n.equipItem("armors",i.helmet),n.equipItem("armors",i.body_armor),n.equipItem("armors",i.accessory),this.actors.push(n)},get:function(e){return void 0==e?this.actors:this.actors[e]},getById:function(e){for(var t=0;t<this.actors.length;t++)if(this.actors[t]._id==e)return this.actors[t];return!1}};Class.create("Game_Actors",t)}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";Class.create("Game_Character",{entity:null,_z:null,exp:[],exist:!0,currentLevel:1,maxLevel:99,currentExp:0,skillsByLevel:[],params:{},itemEquiped:{},className:"",states:{},skills:[],defstates:{},hp:0,sp:0,items:{},paramPoints:{},typeMove:[],removeMove:{},_timeMove:"",_tick:{},initialize:function(){this.id=0,this.position(0,0),this.rect(4,16,24,16),this._initialize&&this._initialize.apply(this,arguments)},setProperties:function(t){if(t=t||{},t.options)for(var n=0;n<t.options.length;n++)t[t.options[n]]=!0;this.trigger=t.trigger,this.direction_fix=t.direction_fix,this.no_animation=t.no_animation,this.stop_animation=t.stop_animation,this.speed=void 0===t.speed?3:t.speed,this.type=t.type||"fixed",this.frequence=5*(t.frequence||0),this.nbSequenceX=t.nbSequenceX||4,this.nbSequenceY=t.nbSequenceY||4,this.speedAnimation=t.speedAnimation||5,this.graphic_pattern=void 0===t.pattern?0:t.pattern,this.through=!!+t.graphic||t.through,this.alwaysOnTop=void 0!==t.alwaysOnTop&&t.alwaysOnTop,this.alwaysOnBottom=void 0!==t.alwaysOnBottom&&t.alwaysOnBottom,this.regX=void 0!==t.regX?t.regX:0,this.regY=void 0!==t.regY?t.regY:0,this.alwaysOnBottom&&(this._z=0),this.alwaysOnTop&&(this._z=e.game_map.getSize()+1),this.direction=t.direction||"bottom",this.graphic=+t.graphic,this.graphic_params=t["graphic-params"],this.moveStart()},moveto:function(t,n,i){i=i||{},void 0===i.tileToPixel&&(i.tileToPixel=!0);var r=i.tileToPixel?e.game_map.tileToPixel(t,n):{x:t,y:n};this.position(r.x,r.y),i.refresh&&e.game_map.callScene("setEventPosition",[this.id,r.x,r.y])},lastTypeMove:function(){return this.typeMove[this.typeMove.length-1]},removeTypeMove:function(e){for(var t=0;t<this.typeMove.length;t++)this.typeMove[t]==e&&(this.removeTypeMove[e]=!0,delete this.typeMove[t]);var n=this.lastTypeMove();if(n)switch(n){case"random":this.moveRandom();break;case"approach":this.approachPlayer()}},approachPlayer:function(){function t(){if(n.removeTypeMove.approach)return void(n.removeTypeMove.approach=!1);if(e.game_map.getEvent(n.id)){var i=n.directionRelativeToPlayer();i&&n.moveOneTile(i,function(){0!=n.frequence&&e.game_map.callScene("stopEvent",[n.id]),n._tick=setTimeout(t,60*n.frequence)})}}var n=this;t()},directionRelativeToPlayer:function(){function t(){return i.x>this.x?"right":i.x<this.x?"left":void 0}function n(){return i.y<this.y?"up":i.y>this.y?"bottom":void 0}var i=e.game_player;return!!i&&(Math.abs(i.x-this.x)<Math.abs(i.y-this.y)?n.call(this):t.call(this))},turn:function(t){this.direction=t,e.game_map.callScene("turnEvent",[this.id,t])},moveRoute:function(t,n,i){function r(e){e||(e=1),setTimeout(s,1e3/60*e)}function a(e){return"left"==e||"right"==e?"left"==e?"right":"left":"up"==e?"bottom":"up"}function s(){var l,u;if(o++,l=t[o],void 0!==l){if(/speed_[0-9]+/.test(l))return u=/speed_([0-9]+)/.exec(l),c.speed=u[1],void r();if(/frequence_[0-9]+/.test(l))return u=/frequence_([0-9]+)/.exec(l),c.setParameter("frequence",u[1]),void r();if(/wait_[0-9]+/.test(l))return u=/wait_([0-9]+)/.exec(l),void r(u[1]);if(/graphic_[0-9]+/.test(l))return u=/graphic_([0-9]+)/.exec(l),c.setParameter("graphic",u[1]),void r();if(/opacity_[0-9]+/.test(l))return u=/opacity_([0-9]+)/.exec(l),c.setParameter("opacity",u[1]),void r();if(/switch_(ON|OFF)_[0-9]+/.test(l))return u=/switch_(ON|OFF)_([0-9]+)/.exec(l),e.game_switches.set(u[2],"ON"==u[1]),void r();switch(l){case 2:case 4:case 6:case 8:case"up":case"left":case"right":case"bottom":case"random":case"lower_left":case"lower_right":case"upper_left":case"upper_right":if("random"==l){var h=CE.random(0,4);switch(h){case 0:l="left";break;case 1:l="right";break;case 2:l="up";break;case 3:l="bottom"}}c.moveOneTile(l,function(){s()});break;case"turn_right":case"turn_left":case"turn_up":case"turn_bottom":u=/turn_(.+)/.exec(l),c.turn(u[1]),r();break;case"turn_90d_right":case"turn_90d_left":case"turn_90d_right_or_left":"turn_90d_right_or_left"==l&&(l=1==CE.random(1,2)?"turn_90d_right":"turn_90d_left");var f=["up","right","bottom","left"],d=CE.inArray(c.direction,f)+("turn_90d_right"==l?-1:1);d>f.length-1?d=0:d<0&&(d=f.length-1),c.turn(f[d]),r();break;case"turn_180d":u=a(c.direction),c.turn(u),r();break;case"turn_at_random":var h=CE.random(0,4);switch(h){case 0:l="left";break;case 1:l="right";break;case 2:l="up";break;case 3:l="bottom"}c.turn(l),r();break;case"turn_toward":case"turn_away":u=e.game_player.direction,"turn_toward"==l&&(u=a(u)),c.turn(u),r();break;case"step_forward":case"step_backward":case"move_toward":case"move_away":u=e.game_player.direction;var p,g=!1;"step_forward"!=l&&"move_toward"!=l||(u=a(u)),p=a(u),"move_toward"!=l&&"move_away"!=l&&(g={direction:p}),c.moveOneTile(u,function(){g&&(c.direction=p),s()},g);break;case"direction_fix_ON":case"no_animation_ON":case"stop_animation_ON":case"through_ON":case"alwaysOnTop_ON":case"alwaysOnBottom_ON":case"direction_fix_OFF":case"no_animation_OFF":case"stop_animation_OFF":case"through_OFF":case"alwaysOnTop_OFF":case"alwaysOnBottom_OFF":u=/(.+)_(ON|OFF)/.exec(l),c.setParameter(u[1],"ON"==u[2]),r()}}else i.repeat?(o=-1,r()):(e.game_map.callScene("stopEvent",[c.id]),n&&n.call(c))}var o=-1,c=this;i=i||{},s()},setParameter:function(t,n){this[t]=n,e.game_map.callScene("setParameterEvent",[this.id,t,n])},moveRandom:function(){function t(){if(n.removeTypeMove.random)return void(n.removeTypeMove.random=!1);if(e.game_map.getEvent(n.id)){var i,r=CE.random(0,4);switch(r){case 0:i="left";break;case 1:i="right";break;case 2:i="up";break;case 3:i="bottom"}n.moveOneTile(i,function(i){i||(0!=n.frequence&&e.game_map.callScene("stopEvent",[n.id]),n._tick=setTimeout(t,60*n.frequence))})}}var n=this;this._tick&&clearTimeout(this._tick),t()},movePause:function(){this._tick&&clearTimeout(this._tick)},moveStart:function(){switch(this.type){case"random":this.moveRandom();break;case"approach":this.approachPlayer()}},moveTilePath:function(t){function n(){var a=t[r];a&&i.moveOneTile(a,function(){0!=i.frequence&&e.game_map._scene.stopEvent(i.id),r++,setTimeout(n,60*i.frequence)})}var i=this,r=0;n()},moveOneTile:function(t,n,i){function r(e){clearInterval(o._timeMove),o._timeMove=null}var a=e.game_map.tile_w/this.speed,s=0,o=this;this.frequence;this._timeMove&&r(),this.callbackMove=n,this._timeMove=setInterval(function(){(0==o.id||e.game_map.getEvent(o.id))&&(o.moveDir(t,!1,!1,i),s++,s>=a&&(r(),o.callbackMove&&o.callbackMove.call(o)))},1e3/60)},killIntervalMove:function(){clearInterval(this._timeMove),clearTimeout(this._tick)},moveDir:function(t,n,i,r){r=r||{};var a,s,o=this.speed,c=0,l=0;r.direction||(this.direction=t),"lower_left"!=t&&"upper_left"!=t&&"left"!=t||(c=-o),"lower_right"!=t&&"upper_right"!=t&&"right"!=t||(c=+o),"upper_left"!=t&&"upper_right"!=t&&"up"!=t||(l=-o),"lower_right"!=t&&"lower_left"!=t&&"bottom"!=t||(l=+o),(/^lower/.test(t)||/^upper/.test(t))&&(i=2,t=/.+_(.+)/.exec(t)[1]);var u=e.game_map.passable(this,this.x,this.y,c+this.x,l+this.y,t);return a=!(!u.passable&&!this.alwaysOnTop),s=this.position(u.x,u.y,!0),e.game_map.callScene("moveEvent",[this.id,s,t,i,r]),n?{pos:s,passable:a}:s},detectionEvents:function(t,n){var i=e.game_map.events,r=[];for(var a in i)ev=i[a],ev.x<=this.x+t&&ev.x>=this.x-t&&ev.y<=this.y+t&&ev.y>=this.y-t&&ev.id!=this.id&&(e.game_selfswitches.set(ev.map_id,ev.id,n,!0),r.push(ev));return RPGJS.Plugin.call("Game","eventDetected",[r,this]),r},jumpa:function(t,n,i,r){var a,s,o;0==t&&0==n||(a=Math.abs(t)>Math.abs(n)?t<0?"left":"right":n<0?"up":"down"),s=this.x+t,o=this.y+n,(0==t&&0==n||e.game_map.passable(this,this.x,this.y,s,o,a))&&(this.position(s,o),console.log(s,o),this.removeTypeMove("approach"),this.removeTypeMove("random"),e.game_map.callScene("jumpEvent",[this.id,t,n,i,r]))},serialize:function(){for(var e=["id","x","y","nbSequenceX","nbSequenceY","speedAnimation","graphic_pattern","graphic","graphic_params","direction","direction_fix","no_animation","stop_animation","frequence","speed","regX","regY","alwaysOnBottom","alwaysOnTop","exist","is_start"],t={},n=0;n<e.length;n++)t[e[n]]=this[e[n]];return RPGJS.Plugin.call("Game","serializeCharacter",[t,this]),t},makeExpList:function(e,t,n){if(n=n||this.maxLevel,e instanceof Array)this.exp=e;else{this.exp[0]=this.exp[1]=0;for(var i,r=2.4+t/100,a=2;a<=n;a++)i=e*Math.pow(a+3,r)/Math.pow(5,r),this.exp[a]=this.exp[a-1]+parseInt(i)}return this.exp},addExp:function(e){return this.setExp(this.currentExp+e)},setExp:function(e){if(0==this.exp.length)throw"makeExpList() must be called before setExp()";var t,n=this.currentLevel;this.currentExp=e;for(var i=0;i<this.exp.length;i++)if(this.exp[i]>e){t=i-1;break}t||(t=this.maxLevel,this.currentExp=this.exp[this.exp.length-1]),this.currentLevel=t;var r=t-n;return 0!=r&&this._changeSkills(),r},setLevel:function(e){var t=this.currentLevel;return this.currentLevel=e,this.exp.length>0&&(this.currentExp=this.exp[e]),this._changeSkills(),e-t},nextExp:function(){return this.exp[+this.currentLevel+1]},_changeSkills:function(){for(var e,t=0;t<=this.currentLevel;t++)e=this.skillsByLevel[t],e&&this.learnSkill(e)},setParam:function(e,t,n,i){if(this.params[e]||(this.params[e]=[0]),t instanceof Array)this.params[e]=t;else{var r;"proportional"==i&&(r=(n-t)/(this.maxLevel-1));for(var a=1;a<=this.maxLevel;a++)this.params[e][a]=Math.ceil(t+(a-1)*r);this.params[e].push(n)}return this.params[e]},getCurrentParam:function(e){if(!e)return this.params;if(!this.params[e])throw"getCurrentParam - parameter "+e+" doesn't exist";return this.params[e][this.currentLevel]},setParamLevel:function(e,t,n){if(!this.params[e])throw"setParamLevel - parameter "+e+" doesn't exist";this.params[e][t]&&(this.params[e][t]=n)},addCurrentParam:function(e,t,n){var i=this.getCurrentParam(e);this.params[e][n]&&(this.params[e][this.currentLevel]=i+t)},initParamPoints:function(e,t,n,i,r){this.paramPoints[e]={current:t,min:n,max:i,callbacks:r||{}}},getParamPoint:function(e){if(!this.paramPoints[e])throw"Call the 'initParamPoints' before";return this.paramPoints[e].current},getAllParamsPoint:function(){return this.paramPoints},setMaxParamPoint:function(e){return this.paramPoints[type]?void(this.paramPoints[type].max=e):(console.log("Call the 'initParamPoints' before"),!1)},changeParamPoints:function(e,t,n){if(n=n||"add",!this.paramPoints[e])return console.log("Call the 'initParamPoints' before"),!1;var i=this.paramPoints[e].current,r=this.paramPoints[e].max,a=this.paramPoints[e].min,s=this.paramPoints[e].callbacks;return"string"==typeof r&&(r=this.getCurrentParam(r)),/%$/.test(t)?i+=i*parseInt(t)/100:"add"==n?i+=+t:"sub"==n?i-=+t:i=+t,i<=a?(i=a,s.onMin&&s.onMin.call(this)):i>=r&&(i=r,s.onMax&&s.onMax.call(this)),this.paramPoints[e].current=i,RPGJS.Plugin.call("Game","changeParamPoints",[e,t,n,this]),i},equipItem:function(t,n){var i=this.removeItem(t,n);if(!i)return!1;this.itemEquiped[t]||(this.itemEquiped[t]=[]);var r=e.data[t][n];r&&(r.atk&&this.changeParamPoints("atk",r.atk),r.pdef&&this.changeParamPoints("pdef",r.pdef),r.mdef&&this.changeParamPoints("mdef",r.mdef),this.itemEquiped[t].push(n),r=e.data[t][n],this._setState(r.states))},itemIsEquiped:function(e,t){return!!this.itemEquiped[e][t]},removeItemEquiped:function(t,n){if(!this.itemEquiped[t])return!1;var i,r=e.data[t][n];if(r)return r.atk&&this.changeParamPoints("atk",-r.atk),r.pdef&&this.changeParamPoints("pdef",-r.pdef),r.mdef&&this.changeParamPoints("mdef",-r.mdef),i=this.getIndexEquipedById(t,n),i!==!1&&(this.addItem(t,n),this.itemEquiped[t].splice(i,1)),!0},getItemsEquipedByType:function(e){return!!this.itemEquiped[e]&&this.itemEquiped[e]},getIndexEquipedById:function(e,t){if(!this.itemEquiped[e])return!1;for(var n=0;n<this.itemEquiped[e].length;n++)if(this.itemEquiped[e][n]==t)return n;return!1},getItemsEquipedByAttr:function(t,n,i){var r;if(!this.itemEquiped[t])return!1;var a=e.data[t];if(!a)return!1;for(var s=0;s<this.itemEquiped[t].length;s++)if(r=this.itemEquiped[t][s],a[r]&&a[r][n]==i)return r;return!1},skillsToLearn:function(e){this.skillsByLevel=e},setSkillToLearn:function(e,t){this.skillsByLevel[e]=t},setClass:function(t){var n=e.data.classes[t];return!!n&&(this.className=n.name,this.classId=t,n.skills&&this.skillsToLearn(n.skills),n.elements&&this.setElements(n._elements),n.states&&this.setDefStates(n.states),!0)},setElements:function(e){var t={};if(e instanceof Array)for(var n=0;n<e.length;n++)t[e[n][0]]=e[n][1];else t=e;this.elements=t},getElement:function(e){return this.elements[e]},setDefStates:function(e){for(var t={},n=0;n<e.length;n++)t[e[n][0]]=e[n][1];this.defstates=t},learnSkill:function(t){var n,i;t instanceof Array||(t=[t]);for(var r=0;r<t.length;r++)n=this.getSkill(t[r]),n||(this.skills.push(t[r]),i=e.data.skills[t[r]],i&&this._setState(i.states))},removeSkill:function(e){delete this.getSkill(e)},getSkill:function(e){if(!e)return this.skills;for(var t=0;t<this.skills.length;t++)if(this.skills[t]==e)return this.skills[t];return!1},addState:function(t){var n,i,r=1;if(this.defstates[t]){switch(this.defstates[t]){case-100:r=1;break;case 0:r=1.2;break;case 50:r=1.5;break;case 100:r=2;break;case 150:r=10;break;case 200:r=20}if(n=CanvasEngine.random(0,100),i=CanvasEngine.random(0,Math.round(100/r)),n<=i)return!1}var a,s={};return s.duringTime=0,this.states[t]=s,a=e.data.states[t],a.on_start&&Class.New("Game_CommonEvents",[a.on_start]).exec(),a.on_during&&(this.states[t].interval=setInterval(function(){Class.New("Game_CommonEvents",[a.on_during]).exec()},3e3)),this.states[t],this._setState(a.states),!0},removeState:function(t){if(!this.states[t])return!1;var n=e.data.states[t];n.on_release&&Class.New("Game_CommonEvents",[n.on_release]).exec(),this.states[t].interval&&clearInterval(this.states[t].interval),delete this.states[t]},_setState:function(e){for(var t,n=0;n<e.length;n++)t=e[n],+t[1]==-1?this.removeState(t[0]):1==+t[1]&&this.addState(t[0])},stateInflicted:function(e){return this.states[e]},addItem:function(t,n,i){if(0==+n)return!1;i||(i=1),this.items[t]||(this.items[t]={}),this.items[t][n]||(this.items[t][n]=0),this.items[t][n]+=i;var r=e.data.items[n];r&&this._setState(r.states),RPGJS.Plugin.call("Game","addItem",[t,n,i,this])},removeItem:function(e,t,n){return n||(n=1),!!this.items[e]&&(!!this.items[e][t]&&(this.items[e][t]-=n,this.items[e][t]<=0&&delete this.items[e][t],!0))},useItem:function(t,n){var i=e.data[t][n];if(i&&+i.consumable)return!!i.hit_rate&&(this.changeParamPoints("hp",i.recvr_hp_pourcent+"%"),this.changeParamPoints("hp",i.recvr_hp),this.changeParamPoints("sp",i.recvr_sp_pourcent+"%"),this.changeParamPoints("sp",i.recvr_sp),"0"!=i.parameter&&this.addCurrentParam(i.parameter,i.parameter_inc),this.removeItem(t,n),!0)},getItem:function(e,t){var n=this.getItems(e);return!!n[t]&&this.items[e][t]},getItems:function(e){return e?(this.items[e]||(this.items[e]={}),this.items[e]):this.items}}).attr_reader(["x","y","real_x","real_y","character_name","direction"]).extend("EntityModel")}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";Class.create("Game_CommonEvents",{initialize:function(e){this.id=e},exec:function(t,n){var i,r=e.data.common_events[this.id];if("function"==typeof t&&(n=t,t=!1),t||(t=e.game_player),r){for(var a=0;a<r.commands.length;a++)r.commands[a]=r.commands[a].replace(/&apos;/g,"'");RPGJS.Plugin.call("Game","commonEvents",[t,this]),i=Class.New("Interpreter",[this.event,r.commands]),i.execCommands(n)}}})}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";Class.create("Game_Event",{currentPage:-1,pages:[],auto:null,_initialize:function(e,t){this.map_id=e,this.pages=t[1]||[];for(var n in t[0])this[n]=t[0][n];this.moveto(this.x,this.y),this.interpreter=Class.New("Interpreter",[this])},addPage:function(e,t){return e.commands=t,this.pages.push(e),this},display:function(){this.refresh(),e.game_map.displayEvent(this.id)},refresh:function(){if(this.setPage(),this.currentPage==-1)this.exist=!1;else{this.exist=!0;var e=this.pages[this.currentPage];this.setProperties(e),this.interpreter.assignCommands(e.commands)}return this.serialize()},update:function(){this.interpreter.isRun||("auto"!=this.trigger&&"parallel_process"!=this.trigger||this.execTrigger(),"auto_one_time"==this.trigger&&this.auto!=this.currentPage&&(this.auto=this.currentPage,this.execTrigger()))},setPage:function(){var t=!1;this.currentPage=-1;for(var n=this.pages.length-1;n>=0;n--)if(!t)if(this.pages[n].conditions){for(var i=!0,r=this.pages[n].conditions,a=1;a<=3;a++)void 0!==r["switch_"+a]&&"0"!=r["switch_"+a]&&(i&=e.game_switches.get(r["switch_"+a]));if(void 0!==r.self_switch&&"0"!=r.self_switch&&(i&=e.game_selfswitches.get(this.map_id,this.id,r.self_switch)),void 0!==r.variable&&"0"!=r.variable){var s=e.game_variables.get(r.variable),o=r.variable_value;i&=s>=o}i&&(this.currentPage=n,t=!0)}else this.currentPage=n,t=!0;return t},execTrigger:function(){return"action_button"==this.trigger?this.directionRelativeToPlayer():"auto"==this.trigger&&(e.game_player.freeze=!0),this.execCommands(),!(this.interpreter.searchCommand("TRANSFER_PLAYER").length>0)},execCommands:function(){e.game_player.freeze=!0;var t=this.interpreter.getCurrentCommand();CE.inArray(t.name,["MOVE_ROUTE"])==-1&&(this.old_direction=this.direction,this.direction=this.directionRelativeToPlayer()),this.movePause(),e.game_map.callScene("refreshEvent",[this.id,this.serialize()]),this.interpreter.execCommands()},finishCommands:function(){e.game_player.freeze=!1,"fixed"!=this.type&&this.old_direction&&(this.direction=this.old_direction),this.moveStart(),RPGJS.Plugin.call("Game","eventCommandsFinish",[this]),e.game_map.callScene("refreshEvent",[this.id,this.serialize()])},remove:function(){e.game_map.removeEvent(this.id)},detectionPlayer:function(t){var n=e.game_player;return n.x<=this.x+t&&n.x>=this.x-t&&n.y<=this.y+t&&n.y>=this.y-t}}).attr_reader(["trigger","list","starting"]).extend("Game_Character")}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";var t=!1,n={grid:null,nb_autotiles_max:64,events:{},tile_w:32,tile_h:32,_scene:null,_callback:null,_tick:{},initialize:function(){},transfer_player:function(t,n){e.game_player.moveto(t,n)},load:function(t,n,i){function r(e){var t,n,i,r;s.map.data=e,RPGJS.params.tiled?(t=e.layers[0].width,n=e.layers[0].height,i=e.tilewidth,r=e.tileheight,s.tileset_prop=s.toTilesetProperties(e.tilesets[0])):(t=e.map.length,n=e.map[0].length,i=s.tile_w,r=s.tile_h),s.grid=Class.New("Grid",[t,n]),s.grid.setCellSize(i,r),s.grid.setPropertyCell(RPGJS.params.tiled?s.toMapProperties(e.layers,e.width,e.height):e.map),s._setup()}this.tileset_data=e.data.tilesets,this.actions_data=e.data.actions,this.autotiles_data=e.data.autotiles,t=t||{};var a,s=this,o=t.map_id;"function"==typeof o&&(a=n,n=o,i=a,o=!1),o?this.map_id=o:this.map_id=e.data.system?e.data.system.start.id:0,e.game_player.map_id=this.map_id,t.pos&&(e.game_player.x=t.pos.x,e.game_player.y=t.pos.y),this.map=e.data.map_infos[this.map_id],this.map||(this.map={}),n&&(this._callback=n),i&&(this._scene=i);var c=RPGJS.maps[this.map_id];c?r({map:c}):(CE.Core||CE).getJSON("wicket/resource/com.appdirect.wicket.resources.Resource/spa/themes/base/ipa/rpg-home/data/maps/MAP-"+this.map_id+".json",r),this.tick()},toMapProperties:function(e,t,n){for(var i,r=[],a=0;a<e.length;a++)if("tilelayer"==e[a].type){i=e[a].data;for(var s=0;s<i.length;s++)r[s]||(r[s]=[]),r[s].push(0==i[s]?null:i[s]+48*this.nb_autotiles_max-1)}return CE.toMatrix(r,t,n)},toTilesetProperties:function(e){for(var t,n,i=e.imageheight/e.tileheight*(e.imagewidth/e.tilewidth),r=[],a=0;a<i;a++)n=[],t=e.tileproperties[a],t&&t.passable&&(n=[null,t.passable]),r.push(n);return r},scrollMap:function(e){this.callScene("scrollMap",[e])},passable:function(t,n,i,r,a,s){function o(e){for(var t,n,i=0;i<e.length;i++)if(t=e[i],void 0!=t[0]){n=t[0].sides;var r=(0==i||2==i)&&n!=i,a=(1==i||3==i)&&n!=i;if("left"==s&&(3==n&&1==i||r))return!0;if("right"==s&&(1==n&&3==i||r))return!0;if("bottom"==s&&(2==n&&0==i||a))return!0;if("up"==s&&(0==n&&2==i||a))return!0}return!1}function c(e){function o(e,t){return{x:e*p.tile_w,y:t*p.tile_h}}var c,l,u=t.getPolygon().points,h=r,f=a;if(e instanceof Class){var d=e.getPolygon().points;c=[{x:e.x+d[0].x,y:e.y+d[0].y},{x:e.x+d[1].x,y:e.y+d[1].y},{x:e.x+d[2].x,y:e.y+d[2].y},{x:e.x+d[3].x,y:e.y+d[3].y}]}else c=[o(e.col,e.row),o(e.col+1,e.row),o(e.col+1,e.row+1),o(e.col,e.row+1)];switch(s){case"left":l=Math.abs(c[1].x-(n+u[0].x)),h=n-l;break;case"right":l=Math.abs(c[0].x-(n+u[1].x)),h=n+l;break;case"up":l=Math.abs(c[3].y-(i+u[0].y)),f=i-l;break;case"bottom":l=Math.abs(c[0].y-(i+u[2].y)),f=i+l}return{passable:!1,x:h,y:f}}t.savePosition(),t.position(r,a);for(var l,u,h,f,d=this.grid.getEntityCells(t),p=this,g=d.cells,m=!0,v=0;v<g.length;v++){if(l=this.grid.getPropertyByCell(g[v].col,g[v].row),!l)return t.restorePosition(),{passable:!1,x:n,y:i};for(var _=1,y=l.length-1;y>=0;y--)(l[y]||0==l[y])&&(h=this.isAutotile(l[y])?this.getPropAutotile(l[y]):this.getPropTile(l[y]),_&=h?!(void 0!==h[1]&&h[1]>0):1);if(!_&&(m=o(this.grid.testCell(g[v],t,{ignoreTypeLine:!0})),!m)){t.restorePosition();var b=c.call(this,g[v]);return b}}var w,x;for(var u in this.events)if(w=this.events[u],w&&w.exist&&u!=t.id)if(f=t.hit(w),f.over>=1)if(o(f.result.coincident))0==t.id&&(w._hit=!1);else{if(0==t.id&&(w._hit=!0),t.restorePosition(),1==f.over)if("contact"==w.trigger){if(x=w.execTrigger(),!x)return{passable:!0}}else RPGJS.Plugin.call("Game","eventContact",[w,this]);if(w.through)return c.call(this,w)}else 0==t.id&&(w._hit=!1);return 0!=t.id&&(f=t.hit(e.game_player),f.over>=1&&!o(f.result.coincident))?(RPGJS.Plugin.call("Game","contactPlayer",[t,this]),{passable:!1,x:n,y:i}):(t.restorePosition(),{passable:!0,x:r,y:a})},getEvent:function(e){return this.events[e]},execEvent:function(){var e;for(var t in this.events)e=this.events[t],e&&e._hit&&"action_button"==e.trigger&&(RPGJS.Plugin.call("Game","execEvent",[e,this]),e.execTrigger())},updateEvents:function(){for(var e in this.events)this.events[e].update()},refreshEvents:function(){var e;for(var t in this.events)e=this.events[t].refresh(),this.callScene("refreshEvent",[t,e])},refreshPlayer:function(){var t=e.game_player.serialize();this.callScene("refreshEvent",[0,t])},isAutotile:function(e){return e<48*this.nb_autotiles_max},getPropAutotile:function(e){if(!this._autotiles)return!0;var t=Math.floor(e/48);return this._autotiles[t]},getPropTile:function(e){if(!this._priorities)return!0;var t=e-48*this.nb_autotiles_max;return this._priorities[t]},_setup:function(){function n(n,i){if(r++,!i||(u.push(i.serialize()),r==s)){var a={data:o.map.data,propreties:o._priorities,musics:{bgm:o.map.bgm,bgs:o.map.bgs},graphics:{tileset:c.graphic,autotiles:l?l.autotiles:{}},autotiles:o._autotiles,player:e.game_player.serialize(),events:u,system:e.data.system,actions:o.actionSerialize()};t?o.callScene("load",a):o._callback(a)}}this.map.events||(this.map.events=[]),this.map.dynamic_event||(this.map.dynamic_event=[]);var i,r=0,a=this.map.events.length,s=this.map.dynamic_event.length+a,o=this,c=this.tileset_data[this.map.tileset_id],l=this.autotiles_data[this.map.autotiles_id],u=[];if(c||(c={name:"",propreties:{},graphic:null}),this._tileset_name=c.name,this._priorities=this.tileset_prop?this.tileset_prop:c.propreties,this._autotiles=l?l.propreties:{},e.game_player.start(),this.events)for(var h in this.events)this.events[h].killIntervalMove();this.events={};for(var f=0;f<a;f++)i=this.map.events[f],this.loadEvent(i,n);for(var f=0;f<this.map.dynamic_event.length;f++)i=this.map.dynamic_event[f],this.addDynamicEvent(i.name,i.id,i,n,{refresh:!1});0==s&&n(),RPGJS.Plugin.call("Game","loadMap",[this])},getSize:function(){return this.grid.getNbCell()*this.tile_w*this.tile_h},getTileSize:function(){return{width:this.tile_w,height:this.tile_h}},tileToPixel:function(e,t){return{x:e*this.tile_w,y:t*this.tile_h}},loadEvent:function i(t,n,r){function i(e){var i=CanvasEngine.uniqid();e instanceof Array?e[0].id?i=e[0].id:e[0].id=i:(i=CanvasEngine.uniqid(),e.pages||(e.pages=[e]),e=[{id:i,name:t+"-"+i},e.pages]),a.events[i]=Class.New("Game_Event",[a.map_id,e]),a.events[i].refresh(),RPGJS.Plugin.call("Game","addEvent",[a.events[i],a.map_id,e,n,this]),r&&r.call(this,i,a.events[i],e)}var a=this;"function"==typeof n&&(r=n,n=!1);var s="Data/Events/"+(n?"":"MAP-"+this.map_id+"/")+t+".json",o=n?e.data[t][n]:RPGJS.getGlobalEvent(this.map_id,t);o?i(o):(CE.Core||CE).getJSON(s,i)},createEvent:function(e,t,n,i){return i=i||{},i.id=e,i.x=t,i.y=n,this.events[e]=Class.New("Game_Event",[this.map_id,[i]])},displayEvent:function(e){var t=this.getEvent(e);this.callScene("addEvent",[t.serialize()])},addDynamicEvent:function(e,t,n,i,r){var a=this;r=r||{},this.loadEvent(e,t,function(e,t,s){r.direction&&(t.direction=r.direction),t.moveto(n.x,n.y,r),r.add&&a.callScene("addEvent",[t.serialize()]),i&&i.call(this,e,t,s)})},removeEvent:function(e){RPGJS.Plugin.call("Game","removeEvent",[this.events[e],this]),this.callScene("removeEvent",[e]),delete this.events[e]},callScene:function(e,n){t?this.scene.emit("Scene_Map."+e,n):this._scene[e].apply(this._scene,n)},actionSerialize:function(){var e,t={},n={keypress:"",animation_up:"",animation_bottom:"",animation_right:"",animation_left:"",animation_finish:"",graphic:"","graphic-params":"",speed:""};for(var i in this.actions_data){e=this.actions_data[i],t[i]={};for(var r in e)r in n&&(t[i][r]=e[r])}return t},execAction:function(e){RPGJS.Plugin.call("Game","action",[this.actions_data[e],e,this])},tick:function(){var e=this;this._tick=setInterval(function(){RPGJS.Plugin.call("Game","tick",[e])},1e3/60)},clear:function(){for(var e in this.events)this.events[e].killIntervalMove();this._tick&&clearInterval(this._tick)}};Class.create("Game_Map",n)}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";var t={freeze:!1,gold:0,step:0,time:0,map_id:0,init:function(e){this._initialize(e)},_initialize:function(t){if(t||e.data.system.start){e.data.system.start||(e.data.system=t),
e.data.system.start||(e.data.system.start={x:0,y:0,id:1}),e.data.system.actor||(e.data.system.actor=1);var n=e.data.system,i=e.data.actors[n.actor];i&&(this.x=n.start.x,this.y=n.start.y,this.setProperties({graphic:i.graphic,"graphic-params":i["graphic-params"]}),e.game_actors.add(n.actor,this)),this.startTime()}},start:function(){this.is_start=this.map_id==e.data.system.start.id,this.moveto(this.x,this.y)},startTime:function(){var e=this;setInterval(function(){e.time++},1e3)},addGold:function(e){this.gold+=+e,this.gold<0&&(this.gold=0),RPGJS.Plugin.call("Game","changeGold",[e,this])}};Class.create("Game_Player",t).extend("Game_Character")}).call(t,function(){return this}())},function(e,t){"use strict";Class.create("Game_Plugin",{_class_:null,callSprite:function(e,t){if(e="_"+e,this._class_&&this._class_[e])return this._class_[e].apply(this._class_,t)}})},function(e,t){"use strict";Class.create("Game_Save",{data:[],set:function(e,t){this.data[e]=t},get:function(e){return this.data[e]}})},function(e,t){(function(e){"use strict";Class.create("Game_SelfSwitches",{initialize:function(){this.data={}},get:function(e,t,n){return!(!this.data[e]||!this.data[e][t])&&this.data[e][t][n]},set:function(t,n,i,r){this.data[t]||(this.data[t]={}),this.data[t][n]||(this.data[t][n]={}),this.data[t][n][i]=r,RPGJS.Plugin.call("Game","selfswitch",[t,n,i,r,this]),e.game_map.refreshEvents()}})}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";Class.create("Game_Switches",{initialize:function(){this.data={}},get:function(e){return null!=this.data[e]&&this.data[e]},set:function(t,n){t instanceof Array||(t=[t]);for(var i=0;i<t.length;i++)this.data[t[i]]=n;RPGJS.Plugin.call("Game","switches",[t,n,this]),e.game_map.refreshEvents()}})}).call(t,function(){return this}())},function(e,t){"use strict";Class.create("Game_System",{_current:{bgm:null,bgs:null,se:null,me:null},_memorize:{bgm:null,bgs:null},bgmPlay:function(e){this._playAudio(e,"bgm")},bgsPlay:function(e){this._playAudio(e,"bgs")},mePlay:function(e){this._playAudio(e,"me")},sePlay:function(e){this._playAudio(e,"se")},seStop:function(){return!!this._current.se&&void this._stopAudio(this._current.se,"se")},memorizeMusic:function(){this._memorize.bgm=this._current.bgm,this._memorize.bgs=this._current.bgs},restoreMusic:function(){this._stopAudio(this._current.bgm,"bgm"),this._stopAudio(this._current.bgs,"bgs"),this._playAudio(this._memorize.bgm,"bgm"),this._playAudio(this._memorize.bgs,"bgs")},fadeOutMusic:function(e){var t=this;this._current.bgm&&RPGJS_Canvas.Sound.fadeOut("bgms_"+this._current.bgm,e,function(){t._stopAudio(t._current.bgm,"bgm")}),this._current.bgs&&RPGJS_Canvas.Sound.fadeOut("bgss_"+this._current.bgs,e,function(){t._stopAudio(t._current.bgs,"bgs")})},fadeOutSound:function(e){var t=this;this._current.me&&RPGJS_Canvas.Sound.fadeOut("mes_"+this._current.me,e,function(){t._stopAudio(t._current.me,"me")}),this._current.se&&RPGJS_Canvas.Sound.fadeOut("ses_"+this._current.se,e,function(){t._stopAudio(t._current.se,"se")})},_playAudio:function(e,t){this._current[t]!=e&&(this._current[t]&&this._stopAudio(this._current[t],t),this._current[t]=e,RPGJS.Path.loadMaterial(t+"s",e,function(){RPGJS_Canvas.Sound.playLoop(t+"s_"+e)}))},_stopAudio:function(e,t){this._current[t]=null,RPGJS_Canvas.Sound.stop(t+"s_"+e)}})},function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var r=n(114),a=t(r);Class.create("Game_Variables",{initialize:function(){this.data={}},get:function(e){return null!=this.data[e]?this.data[e]:0},set:function(t,n,r){for("number"==typeof t&&(t=[t]),"object"==("undefined"==typeof n?"undefined":(0,a["default"])(n))&&(n instanceof Array?n=CE.random(n[0],n[1]):void 0!==n.variable&&(n=e.game_variables.get(n.variable))),i=0;i<t.length;i++){switch(_var=this.get(t[i]),r){case"add":_var+=+n;break;case"sub":_var-=n;break;case"mul":_var*=n;break;case"div":_var/=n;break;case"mod":_var%=n;break;default:_var=n}this.data[t[i]]=_var}RPGJS.Plugin.call("Game","variable",[t,n,r,this]),e.game_map.refreshEvents()}})}).call(t,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _typeof2=__webpack_require__(114),_typeof3=_interopRequireDefault(_typeof2);Class.create("Interpreter",{currentCmd:null,tmpCommands:[],indent:0,_conditions:{},isRun:!1,event:null,initialize:function(e,t){this.preprogrammedCommands(),this.event=e,t&&this.assignCommands(t)},preprogrammedCommands:function(){var e={CHANGE_GOLD:"cmdChangeGold",SHOW_TEXT:"cmdShowText",ERASE_EVENT:"cmdErase",TRANSFER_PLAYER:"cmdTransferPlayer",BLINK:"cmdBlink",CALL:"cmdCall",SHOW_ANIMATION:"cmdShowAnimation",MOVE_ROUTE:"cmdMoveRoute",SELF_SWITCH_ON:"cmdSelfSwitches",SELF_SWITCH_OFF:"cmdSelfSwitches",SWITCHES_ON:"cmdSwitches",SWITCHES_OFF:"cmdSwitches",SCREEN_FLASH:"cmdScreenFlash",SCREEN_TONE_COLOR:"cmdScreenColorTone",SCREEN_SHAKE:"cmdScreenShake",VARIABLE:"cmdVariables",SET_EVENT_LOCATION:"cmdSetEventLocation",SCROLL_MAP:"cmdScrollMap",PLAY_BGM:"cmdPlayBGM",PLAY_BGS:"cmdPlayBGS",PLAY_ME:"cmdPlayME",PLAY_SE:"cmdPlaySE",STOP_SE:"cmdStopSE",FADE_OUT_MUSIC:"cmdFadeOutMusic",FADE_OUT_SOUND:"cmdFadeOutSound",RESTORE_MUSIC:"cmdRestoreMusic",MEMORIZE_MUSIC:"cmdMemorizeMusic",CHANGE_ITEMS:"cmdChangeItems",CHANGE_WEAPONS:"cmdChangeItems",CHANGE_ARMORS:"cmdChangeItems",CHANGE_LEVEL:"cmdChangeLevel",CHANGE_EXP:"cmdChangeEXP",CHANGE_STATE:"cmdChangeState",CHANGE_CLASS:"cmdChangeClass",CHANGE_SKILLS:"cmdChangeSkills",CHANGE_NAME:"cmdChangeName",CHANGE_GRAPHIC:"cmdChangeGraphic",CHANGE_EQUIPMENT:"cmdChangeEquipment",CHANGE_PARAMS:"cmdChangeParams",CHANGE_HP:"cmdChangeParamPoints",CHANGE_SP:"cmdChangeParamPoints",RECOVER_ALL:"cmdRecoverAll",SHOW_PICTURE:"cmdShowPicture",MOVE_PICTURE:"cmdMovePicture",ROTATE_PICTURE:"cmdRotatePicture",ERASE_PICTURE:"cmdErasePicture",CHANGE_WINDOWSKIN:"cmdChangeWindowskin",DETECTION_EVENTS:"cmdDetectionEvents",CALL_COMMON_EVENT:"cmdCallCommonEvent",CALL_SYSTEM:"cmdCallSystem",CALL_SAVE:"cmdCallSave",ADD_DYNAMIC_EVENT:"cmdAddDynamicEvent",ADD_DYNAMIC_EVENT_RELATIVE:"cmdAddDynamicEventRelative",WAIT:"cmdWait",SCRIPT:"cmdScript",IF:"cmdIf",ELSE:"cmdElse",ENDIF:"cmdEndif",CHOICES:"cmdChoices",CHOICE:"cmdChoice",ENDCHOICES:"cmdEndChoices"};for(var t in e)Interpreter.addCommand(t,e[t])},getNextCommand:function(){return this.getCommand(this.getCurrentPos()+1)},getPrevCommand:function(){return this.getCommand(this.getCurrentPos()-1)},getCurrentCommand:function(){return this.getCommand(this.getCurrentPos())},getCurrentPos:function(){return this.currentCmd||this.setCurrentPos(0),this.currentCmd},setCurrentPos:function(e){this.currentCmd=e},getCommand:function(e){var t=this._command(e);return!!t&&{name:t.name,params:t.params}},searchCommand:function(e){for(var t,n,i=[],r=0;r<this.commands.length;r++)t=this.commands[r],n=new RegExp("^"+e),n.test(t)&&i.push(r);return i},_command:function(e){var t,n,i,r,a,s=this.tmpCommands.length>0?this.tmpCommands[e]:this.commands[e];if(s)try{if(r=/^([^:]+)(:(.+))?$/.exec(s),null==r)throw'"'+s+'" => Invalid command';if(t=r[1],n=r[3],r=/^([^\(]+)\(([^\)]+)\)$/.exec(t),null!=r&&(a=r[2],t=r[1]),i=/CHOICE_[0-9]+/.test(t)?Interpreter.commandFunction.CHOICE:Interpreter.commandFunction[t])return n?(n=n.replace(/'/g,'"'),n=n.replace(/&quote;/g,"'"),n=JSON.parse(n),{name:t,id:a,params:n,callback:i}):{name:t,id:a,callback:i}}catch(o){throw/ILLEGAL$/.test(o)&&(o='"'+s+'" => Invalid parameters'),o}return!1},assignCommands:function(e){e=e||[],this.commands=CE.clone(e),this.parseCommands()},parseCommands:function(){for(var e,t,n,i,r,a={},s={},o=0,c=0,l=!1,u=0;u<this.commands.length;u++)e=this.commands[u],n=/(^[^:]+)/.exec(e),null!=n&&(t=n[1],"IF"==t?(i=CanvasEngine.uniqid(),a[o]=i,this._conditions[i]={"if":u},o++,l=!0):"ELSE"==t?(i=a[o-1],this._conditions[i]["else"]=u,l=!0):"ENDIF"==t&&(o--,i=a[o],this._conditions[i].endif=u,l=!0),"CHOICES"==t?(i=CanvasEngine.uniqid(),s[c]=i,this._conditions[i]={choices:u},c++,l=!0):/CHOICE_[0-9]+/.test(t)?(n=/CHOICE_([0-9]+)/.exec(t),i=s[c-1],this._conditions[i]["choice_"+n[1]]=u,l=!0):"ENDCHOICES"==t&&(c--,i=s[c],this._conditions[i].endchoices=u,l=!0),l&&(r=t+"("+i+")",this.commands[u]=e.replace(t,r)),l=!1)},execCommands:function(e){this._finish||(this._finish=e);var t=this._command(this.getCurrentPos());if(t){this.isRun=!0;this[t.callback].call(this,t.params,t.name,t.id)}else this.setCurrentPos(0),this.isRun=!1,this.tmpCommands=[],this.event&&this.event.finishCommands(),this._finish&&this._finish.call(this)},nextCommand:function(){this.setCurrentPos(this.getCurrentPos()+1),this.execCommands()},commandsExit:function(e){this.currentCmd=-2},cmdShowText:function(e){for(var t=this,n=(this.getPrevCommand(),this.getNextCommand()),i=e.text,r=/%V\[([0-9]+)\]/g,a=r.exec(i);null!=a;)i=i.replace(a[0],global.game_variables.get(a[1])),a=r.exec(i);i=i.replace(/&#39;/g,"'"),this.scene_window||(this.scene_window=RPGJS.scene.call("Scene_Window",{overlay:!0}),this.scene_window.box()),"CHOICES"!=n.name?this.scene_window.onEnterPress(function(){"SHOW_TEXT"!=n.name&&(RPGJS_Canvas.Scene.exit("Scene_Window"),t.scene_window=null),t.nextCommand()}):this.nextCommand(),this.scene_window.text(i)},cmdChoice:function(e,t,n){this.setCurrentPos(this._conditions[n].endchoices),this.nextCommand()},cmdChoices:function(e,t,n){var i=[];if(!(e instanceof Array)){for(var r in e)""!=e[r]&&i.push(e[r]);e=i}var a=this;this.scene_window||(this.scene_window=RPGJS.scene.call("Scene_Window",{overlay:!0})),this.scene_window.choices(e),this.scene_window.onEnterPressChoice(function(e){var t=a._conditions[n];a._conditions[n].val=!1,a.setCurrentPos(t["choice_"+e]),RPGJS_Canvas.Scene.exit("Scene_Window"),a.scene_window=null,a.nextCommand()})},cmdEndChoices:function(){this.nextCommand()},cmdErase:function(){this.event.remove(),this.commandsExit(),this.nextCommand()},cmdSwitches:function(e,t){var n=e.id;n||(n=e),global.game_switches.set(n,"SWITCHES_ON"==t),this.nextCommand()},cmdSelfSwitches:function(e,t){var n=e.id;n||(n=e),global.game_selfswitches.set(this.event.map_id,this.event.id,n,"SELF_SWITCH_ON"==t),this.nextCommand()},cmdVariables:function(e){var t,n=e.operand;"object"==("undefined"==typeof n?"undefined":(0,_typeof3["default"])(n))?n instanceof Array?t=Math.floor(Math.random()*(n[1]-n[0]))+n[0]:void 0!==n.variable&&(t=global.game_variables.get(n.variable)):t=n,global.game_variables.set(e.id,t,e.operation),this.nextCommand()},cmdChangeGold:function(e){var t=this._getValue(e);global.game_player.addGold(t),this.nextCommand()},cmdMoveRoute:function(e){var t=this,n=this._target(e.target),i=e.options||[],r=CE.inArray("wait_end",i)!=-1;console.log(i),n.moveRoute(e.move,function(){r&&t.nextCommand()},{repeat:CE.inArray("repeat",i)!=-1}),r||this.nextCommand()},cmdShowAnimation:function(e){var t=this._target(e.target);global.game_map.callScene("animation",[t.id,e.name]),this.nextCommand()},cmdTransferPlayer:function(e){var t=this._getPos(e);e.direction&&"0"!=e.direction&&(global.game_player.direction=e.direction),RPGJS.scene.call("Scene_Map",{params:{map_id:t.id,pos:t}}).load(),global.game_player.freeze=!1},cmdBlink:function(e){function t(){i.nextCommand()}var n,i=this;switch(e.target){case"this":n=this.event.id;break;case"player":n=0;break;default:n=e.target}global.game_map.callScene("blink",[n,e.duration,e.frequence,function(){"_no"!=e.wait&&t()}]),"_no"==e.wait&&t()},cmdScreenFlash:function(e){function t(){n.nextCommand()}var n=this,i=[e.color,e.speed],r=null;"_no"==e.wait?t():r=t,global.game_map._scene.effect("screenFlash",i,r)},cmdScreenColorTone:function(e){function t(){n.nextCommand()}var n=this;e.composite=e.composite||"darker";var i=[e.color,e.speed,e.composite,e.opacity],r=null;"_no"==e.wait?t():r=t,global.game_map._scene.effect("changeScreenColorTone",i,r)},cmdScreenShake:function(e){function t(){n.nextCommand()}var n=this,i=[e.power[0],e.speed[0],e.duration,e.axis],r=null;"_no"==e.wait?t():r=t,global.game_map._scene.effect("shake",i,r)},cmdSetEventLocation:function(e){var t,n,i=this._target(e.event),r={refresh:!0};if("constant"==e["position-type"]&&e.appointement)t=e.appointement.x,n=e.appointement.y;else if("variables"==e["position-type"])t=global.game_variables.get(e.x),n=global.game_variables.get(e.y);else if("other_event"==e["position-type"]){var a=this._target(e.other_event);t=a.x,n=a.y,r.tileToPixel=!1,a.moveto(i.x,i.y,r)}e.direction&&(i.direction=e.direction),i.moveto(t,n,r),this.nextCommand()},cmdScrollMap:function(e){var t=this,n={x:e.x*global.game_map.tile_w,y:e.x*global.game_map.tile_h};global.game_map.scrollMap(n,function(){t.nextCommand()})},cmdWait:function(e){var t=this;setTimeout(function(){t.nextCommand()},1e3*e.frame/60)},cmdPlayBGM:function(e){global.game_system.bgmPlay(e.id),this.nextCommand()},cmdPlayBGS:function(e){global.game_system.bgsPlay(e.id),this.nextCommand()},cmdPlayME:function(e){global.game_system.mePlay(e.id),this.nextCommand()},cmdPlaySE:function(e){global.game_system.sePlay(e.id),this.nextCommand()},cmdStopSE:function(){global.game_system.seStop(),this.nextCommand()},cmdFadeOutMusic:function(e){global.game_system.fadeOutMusic(e.frame),this.nextCommand()},cmdFadeOutSound:function(){global.game_system.fadeOutSound(params.frame),this.nextCommand()},cmdMemorizeMusic:function(){global.game_system.memorizeMusic(),this.nextCommand()},cmdRestoreMusic:function(){global.game_system.restoreMusic(),this.nextCommand()},cmdChangeItems:function(e,t){var n,i,r;switch(n=this._getValue(e),t){case"CHANGE_WEAPONS":r="weapons";break;case"CHANGE_ARMORS":r="armors";break;default:r="items"}i=e.id,n>=0?global.game_player.addItem(r,i,n):global.game_player.removeItem(r,i,Math.abs(n)),this.nextCommand()},cmdChangeLevel:function(e){var t=this._getValue(e);this._execActor(e,function(e){e.setLevel(t)}),this.nextCommand()},cmdChangeEXP:function(e){var t=this._getValue(e);this._execActor(e,function(e){e.addExp(t)}),this.nextCommand()},cmdChangeParams:function(e){var t=this._getValue(e);this._execActor(e,function(n){n.addCurrentParam(e.param,t,n.currentLevel)}),this.nextCommand()},cmdChangeParamPoints:function(e,t){var n,i=this._getValue(e);this._execActor(e,function(e){switch(t){case"CHANGE_HP":n="hp";break;case"CHANGE_SP":n="sp"}e.changeParamPoints(n,i)}),this.nextCommand()},cmdRecoverAll:function(e){var t,n=[["hp","maxhp"],["sp","maxsp"]];this._execActor(e,function(e){for(var i=0;i<n.length;i++)t=e.getCurrentParam(n[i][1]),e.changeParamPoints(n[i][0],t,"set")}),this.nextCommand()},cmdChangeSkills:function(e){this._execActor(e,function(t){"increase"==e.operation?t.learnSkill(e.skill):t.removeSkill(e.skill)}),this.nextCommand()},cmdChangeName:function(e){this._execActor(e,function(t){t.name=e.name}),this.nextCommand()},cmdChangeClass:function(e){this._execActor(e,function(t){t.setClass(e["class"])}),this.nextCommand()},cmdChangeGraphic:function(e){global.game_player.graphic=e.graphic,global.game_player.graphic_params=e["graphic-params"],global.game_map.refreshPlayer(),this.nextCommand()},cmdChangeEquipment:function(e){var t,n=e["operand-type"];t="weapon"==n?"weapons":"armors",this._execActor(e,function(n){var i=n.getItemsEquipedByType(t);n.removeItemEquiped(t,i),n.equipItem(t,e.operand)}),this.nextCommand()},cmdChangeState:function(e){this._execActor(e,function(t){"increase"==e.operation?t.addState(e.state):t.removeState(e.state)}),this.nextCommand()},_valuePicture:function(e){return("variables"==e["operand-type"]||e.variables)&&(e.x=global_game_variables.get(e.x),e.y=global_game_variables.get(e.y)),e},cmdShowPicture:function(e){var t=this;e=this._valuePicture(e),e.filename=RPGJS.Path.get("pictures",e.filename,!1,!0),global.game_map.callScene("pictures",["add",[e.id,e,function(){t.nextCommand()}]])},cmdMovePicture:function(e){e=this._valuePicture(e),global.game_map.callScene("pictures",["move",[e.id,e.duration,e]]),this.nextCommand()},cmdRotatePicture:function(e){global.game_map.callScene("pictures",["rotate",[e.id,e.speed]]),this.nextCommand()},cmdErasePicture:function(e){global.game_map.callScene("pictures",["erase",[e.id]]),this.nextCommand()},cmdDetectionEvents:function(e){this.event.detectionEvents(e.area*global.game_map.tile_w,e.id),this.nextCommand()},cmdCallCommonEvent:function(e){var t=this;Class.New("Game_CommonEvents",[e.name]).exec(this.event,function(){t.nextCommand()})},cmdAddDynamicEvent:function(e){var t=this,n=this._getPos(e);global.game_map.addDynamicEvent("dynamic_events",e.name,{x:n.x,y:n.y},function(e,n){t.nextCommand()},{add:!0,direction:"0"!=e.direction&&e.direction})},cmdAddDynamicEventRelative:function(e){var t,n,i=this,r=global.game_player.direction,a=global.game_map.tile_w,s=global.game_map.tile_h,o=global.game_player.x/a,c=global.game_player.y/s;if(+e.move){for(var l=[],u=0;u<+e.dir-1;u++)l.push(r);var h=+e.dir;switch(t=o,n=c,r){case"left":t=o-h;break;case"right":t=o+h;break;case"up":n=c-h;break;case"bottom":n=c+h}global.game_map.addDynamicEvent("dynamic_events",e.name,{x:t,y:n},function(e,t){t.moveTilePath(l),i.nextCommand()},{add:!0})}else{t=o,n=c;var h=+e.dir;switch(r){case"left":t=o-h;break;case"right":t=o+h;break;case"up":n=c-h;break;case"bottom":n=c+h}global.game_map.addDynamicEvent("dynamic_events",e.name,{x:t,y:n},function(e,t){i.nextCommand()},{add:!0})}},cmdCallSystem:function(e){for(var t=0;t<Menu_Generated.scenes.length;t++)s=Menu_Generated.scenes[t],s.id==e.menus&&(scene=RPGJS.scene.call(s.menu_id,{overlay:!0}));this.nextCommand()},cmdCallSave:function(){var e=RPGJS.scene.call("Scene_Load");e.refresh("save")},cmdScript:function cmdScript(params){var t=params.text.replace(/&#34;/g,'"');eval(t),this.nextCommand()},cmdIf:function cmdIf(params,name,id){function actor(e,t,n){var i=global.game_actors.getById(e);if(i)return"isParameter"==n?i[t]:(n instanceof Array||(n=[n]),i[t].apply(i,n))}function event(e){return void 0===e||"NULL"==e?this_event:0==e?global.game_player:global.game_map.getEvent(e)}var this_event=this.event;params.command&&(params=params.command);var _var={"self_switch[%1]":'global.game_selfswitches.get(this_event.map_id, this_event.id, "%1")',"switch[%1]":"global.game_switches.get(%1)","variable[%1]":"global.game_variables.get(%1)","actor_in_party[%1]":"global.game_actors.getById(%1)","actor_name[%1]":'actor(%1, "name", "isParameter")',"actor_skill_learned[%1,%2]":'actor(%1, "getSkill", %2)',"actor_state_inflicted[%1,%2]":'actor(%1, "stateInflicted", %2)',"actor_weapon_equiped[%1,%2]":'actor(%1, "itemIsEquiped", ["weapons", %2])',"actor_armor_equiped[%1,%2]":'actor(%1, "itemIsEquiped", ["armors", %2])',"character_facing[%1]":"event(%1).direction",gold:"global.game_player.gold","item_possessed[%1]":'global.game_player.getItem("items", %1)',"weapon_possessed[%1]":'global.game_player.getItem("weapons", %1)',"armor_possessed[%1]":'global.game_player.getItem("armors", %1)'},patt,new_key,n;for(var key in _var)if(new_key=key.replace(/\[/g,"\\["),new_key=new_key.replace(/\]/g,"\\]"),new_key=new_key.replace(/%[0-9]+/g,"([0-9A-Z]+)"),patt=new RegExp(new_key,"gi"),n=patt.exec(params),params=params.replace(patt,_var[key]),n)for(var i=1;i<=10;i++)n[i]&&(params=params.replace("%"+i,n[i]));var e=eval(params),c;c=this._conditions[id],e||(c.val=!1,c["else"]?this.setCurrentPos(c["else"]):this.setCurrentPos(c.endif)),this.nextCommand()},cmdElse:function(e,t,n){this.setCurrentPos(this._conditions[n].endif),this.nextCommand()},cmdEndif:function(){this.nextCommand()},_nextRealPos:function(){self.currentCmd+1,self.indent},_execActor:function(e,t){var n=[];void 0==e.actor&&(e.actor=0),n="all"==e.actor?global.game_actors.get():[global.game_actors.getById(e.actor)];for(var i=0;i<n.length;i++)t&&n[i]&&t.call(this,n[i]);return n},_getValue:function(e){var t,n;return e.variable||"variables"==e["operand-type"]?(n=e.variable||e.operand,t=global.game_variables.get(n)):t=e.constant||e.operand,t*("decrease"==e.operation?-1:1)},_getPos:function(e){var t={x:e.x,y:e.y,id:e.name};return"constant"==e["position-type"]?t={x:e.appointement.x,y:e.appointement.y,id:e.appointement.id}:"variables"==e["position-type"]&&(t.id=global.game_variables.get(t.id),t.x=global.game_variables.get(t.x),t.y=global.game_variables.get(t.y)),t},_actor:function(e,t){return t.getDatabase("actors",e)},_target:function(e){return"this"==e||void 0===e?this.event:"player"==e||0==e?global.game_player:global.game_map.getEvent(e)}}),window.Interpreter={},Interpreter.commandFunction={},Interpreter.setCommand=function(e,t){Interpreter.commandFunction[e]=t},Interpreter.addCommand=Interpreter.setCommand}).call(exports,function(){return this}())},function(e,t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Gameover",materials:{images:{background:"Graphics/Gameovers/gameover.jpg"}},ready:function(e){var t=this.createElement();t.drawImage("background"),e.append(t),RPGJS_Canvas.Input.press([Input.Enter,Input.Space],function(){RPGJS.scene.call("Scene_Title")}),e.on("touch",function(){RPGJS.scene.call("Scene_Title")}),RPGJS.Plugin.call("Sprite","gameover",[this])}})}},function(e,t){(function(t){"use strict";e.exports=function(){var e,n={scenes:[],scenes_id:{},elements:{},ready:function(e){this.refresh(e)},get:function(e,t){var n,i=this.scenes_id[e];if(!t)return i;for(var r in i._elements)if(n=i._elements[r],n.element.id==t)return n},getElement:function(e){return this.elements[e]},refresh:function(e,t){var n,i;t?this.elements=t:this.elements=this.data._elements;for(var r in this.elements)n=this.elements[r],n||(n={}),n.graphism||(n.graphism={}),n.element||(n.element={}),n.trigger||(n.trigger={}),i=this.createElement(),i.width=this.getCss("width",n.graphism),i.height=this.getCss("height",n.graphism),i.opacity=this.getCss("opacity",n.graphism),i.x=this.getCss("pos_x",n.graphism),i.y=this.getCss("pos_y",n.graphism),i.lineWidth=this.getCss("border",n.graphism),i.strokeStyle=n.graphism.border_color,i.strokeRect(0,0,i.width,i.height),i.fillStyle=n.graphism.color,i.fillRect(0,0,i.width,i.height),i.attr("id",n.element.id),n.trigger.trigger&&i.on(n.trigger.trigger,function(){Class.New("Game_CommonEvents",[n.trigger.event_common]).exec()}),e.append(i),this.elements[n.element.id]=i},getCss:function(e,n){if(n[e]){if(/^[0-9]+$/.test(n[e])&&n["check-"+e]&&"_no"!=n["check-"+e]){var i=n[e+"-var"],r=0,a=+n[e];switch(i["operand-type"]){case"variables":r=t.game_variables.get(i.operand)}switch(i.operation){case"add":a+=r;break;case"sub":a-=r;break;case"mul":a*=r;break;case"div":a/=r;break;case"mod":a%=r;break;default:a=r}return a}return n[e]}}},i=t.data._scenes;for(var r in i)e=i[r],RPGJS_Canvas.Scene.New({name:e.menu_id,data:e,elements:n.elements,ready:n.ready,refresh:n.refresh,getCss:n.getCss,getElement:n.getElement}),n.scenes.push(e),n.scenes_id[e.menu_id]=e}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Load",materials:{images:{background:"Graphics/Pictures/Layer00.png",box:"Graphics/Pictures/Sprite_Status.png"}},drawText:function(e,t,n,i){var r=RPGJS_Canvas.Text["new"](this,e);return r.style({size:"18px",color:"white",textBaseline:"top",family:"RPG",shadow:"1 1 10 #DBD862"}).draw(t,n,i),r},ready:function(e){var t=this.createElement();t.drawImage("background");for(var n,i,r,a=RPGJS_Canvas.Window["new"](this),s=this.createElement(["set"]),o=[],c=this.getCanvas(),l=this,u=0;u<4;u++)n=this.createElement(300,70),n.drawImage("box"),r="rpg_slot"+(u+1),n.opacity=.1,n.propagationOpacity=!1,n.y=u*(n.img.height+10),n.attr("name",r),n.attr("index",u),i=Marshal.load(r),i?(this.refreshSlot(n,i.get(u)),n.attr("exist",!0)):n.attr("exist",!1),s.set.append(n),o.push(n);s.set.x=c.width/2-n.img.width/2,s.set.y=30,a.open(e),e.append(t,s.set),a.cursor.init(o),a.cursor.select(function(e){l.select&&l.select.call(l,e,i)}),a.cursor.change(function(e){for(var t=0;t<o.length;t++)o[t].opacity=.3;e.opacity=.7}),a.cursor.enable(!0),a.cursor.setIndex(0,!0)},refresh:function(e){var t;this.type=e,"save"==e?(this.select=this._execSave,t=function(){RPGJS_Canvas.Scene.exit("Scene_Load")}):(this.select=this._execLoad,t=function(){RPGJS.scene.call("Scene_Title")}),RPGJS_Canvas.Input.press([Input.Esc],t)},refreshSlot:function(e,t){function n(e){var t=""+Math.floor(e/60/60),n=""+Math.floor(e/60%60),i=""+Math.floor(e%60);return 1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),t+" : "+n+" : "+i}e.empty();var i=new Date;i.setTime(+t.date);var r=this.createElement();RPGJS.Path.loadMaterial("characters",t.actor_face,function(){var n=RPGJS_Canvas.Materials.get("characters_"+t.actor_face);r.drawImage("characters_"+t.actor_face,0,0,n.width/t.actor_nbSequenceX,n.height/t.actor_nbSequenceY,-t.actor_regX,-t.actor_regY,n.width/t.actor_nbSequenceX,n.height/t.actor_nbSequenceY),r.x=50,r.y=25,e.append(r)});var a=-30;this.drawText(t.actor_name,e,150+a,10),this.drawText("LV "+t.level,e,150+a,35),this.drawText(t.actor_name,e,150+a,10),this.drawText("LV "+t.level,e,150+a,35),this.drawText(n(t.time),e,200+a,10),this.drawText(i.toLocaleString(),e,200+a,35)},_execSave:function(e){var n=t.game_player,i=e.attr("name"),r={time:n.time,date:""+(new Date).getTime(),actor_face:n.graphic,actor_name:n.name,actor_nbSequenceX:n.nbSequenceX,actor_nbSequenceY:n.nbSequenceY,actor_regX:n.graphic_params.regX,actor_regY:n.graphic_params.regY,level:n.currentLevel};t.game_save.set(e.attr("index"),r),this.refreshSlot(e,r),Marshal.dump(t.game_save,i),Marshal.dump(t.game_switches,i),Marshal.dump(t.game_variables,i),Marshal.dump(t.game_selfswitches,i),Marshal.dump(t.game_actors,i)},_execLoad:function(e,n){var i=e.attr("name");e.attr("exist")&&(t.game_save=n,t.game_switches=Marshal.load(i),t.game_variables=Marshal.load(i),t.game_selfswitches=Marshal.load(i),t.game_actors=Marshal.load(i),t.game_player=t.game_actors.get(0),t.game_player.x/=t.game_map.tile_w,t.game_player.y/=t.game_map.tile_h,RPGJS.scene.call("Scene_Map",{params:{map_id:t.game_player.map_id}}).load())},exit:function(){}})}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Map",data:{},ready:function(e,n){var i=this;this.stage=e,this.params=n,RPGJS.Plugin._refreshScene(),CE.io&&(CE.io.emit("load",n),CE.io.on("Scene_Map.load",function(e){t.game_map.load(n,function(){i.loadMaterials(e)},i,e)}))},load:function(e){var n=this;t.game_map.load(this.params,function(t){n.data=t,n.loadMaterials(t,e)},this)},loadMaterials:function(e,n){function i(){var e=a.length+s.length;f+=Math.round(100/e),p.width=v*(f/100),m.fillText("Loading "+f+"%",100,15)}function r(){o&&(c.stage.empty(),c.tilesetLoad(e),n&&n()),o++}var a=[],s=[],o=0,c=this;if(e.graphics.tileset&&a.push({tileset:RPGJS.Path.get("tilesets",e.graphics.tileset)}),e.player.graphic&&a.push(RPGJS.Path.get("characters",e.player.graphic,!0)),a.push({window:"/wicket/resource/com.appdirect.wicket.resources.Resource/spa/themes/base/ipa/rpg-home/graphics/Windowskins/window.png"}),t.materials.windowskins){var l=1;for(var u in t.materials.windowskins){l=u;break}a.push({window:RPGJS.Path.get("windowskins",l)})}e.autotiles_img=[],e.graphics.autotiles&&CE.each(e.graphics.autotiles,function(t,n){var i=RPGJS.Path.get("autotiles",n,!0);a.push(i);for(var r in i){e.autotiles_img.push(r);break}}),e.events&&CE.each(e.events,function(e,t){+t.graphic&&a.push(RPGJS.Path.get("characters",t.graphic,!0))});var h;for(var u in this.data.actions)h=this.data.actions[u],h.graphic&&a.push(RPGJS.Path.get("characters",h.graphic,!0));a.concat(RPGJS.Plugin.call("Sprite","mapLoadImages",[a,this])),+e.musics.bgm&&s.push(RPGJS.Path.get("bgms",e.musics.bgm,!0)),+e.musics.bgs&&s.push(RPGJS.Path.get("bgss",e.musics.bgs,!0)),s.concat(RPGJS.Plugin.call("Sprite","mapLoadSounds",[s,this]));var f=0,d=this.getCanvas(),p=this.createElement(300,20),g=this.createElement(300,20),m=this.createElement(),v=p.width;m.font="15px Arial",m.fillStyle="white",g.x=d.width/2-g.width/2,g.y=d.height/2-g.height/2,g.strokeStyle="white",g.append(p,m),this.stage.append(g),RPGJS_Canvas.Materials.load("images",a,i,r),RPGJS_Canvas.Materials.load("sounds",s,i,r)},nbKeyPress:0,keysAssign:function(){function e(e,i){e.keypress&&RPGJS_Canvas.Input.press(Input[e.keypress],function(){n.spriteset.player.playAnimationAction(i),t.game_map.execAction(i)})}var n=this;RPGJS_Canvas.Input.reset(),CanvasEngine.each(["Up","Right","Left","Bottom"],function(e,i){RPGJS_Canvas.Input.press(Input[i],function(){t.game_player.freeze||(n.nbKeyPress++,n.spriteset.player.startMove())}),RPGJS_Canvas.Input.keyUp(Input[i],function(){n.nbKeyPress--,RPGJS_Canvas.Input.isPressed([Input.Up,Input.Right,Input.Left,Input.Bottom])||n.spriteset.player.stop()})}),RPGJS_Canvas.Input.press([Input.Enter,Input.Space],function(){RPGJS.Plugin.call("Sprite","pressAction",[n]),t.game_map.execEvent()}),RPGJS_Canvas.Input.press([Input.Esc],function(){n.pause(!0),RPGJS.Plugin.call("Sprite","pressEsc",[n]);RPGJS.scene.call("Scene_Menu",{overlay:!0})});var i;for(var r in this.data.actions)i=this.data.actions[r],e(i,r)},tilesetLoad:function(){this.spriteset=Class.New("Spriteset_Map",[this,this.stage,this.data,{autotiles:this.data.autotiles_img,actions:this.data.actions}]),+this.data.musics.bgm&&t.game_system.bgmPlay(this.data.musics.bgm),+this.data.musics.bgs&&t.game_system.bgsPlay(this.data.musics.bgs),this.keysAssign(),"_no"!=this.data.system.gamepad&&"undefined"!=typeof Gamepad,RPGJS.Plugin.call("Sprite","loadMap",[this])},render:function(e){if(!this.spriteset)return void e.refresh();var n={left:[Input.Left,"x"],right:[Input.Right,"x"],bottom:[Input.Bottom,"y"],up:[Input.Up,"y"]},i=(this.spriteset.player,0);for(var r in n)RPGJS_Canvas.Input.isPressed(n[r][0])&&!t.game_player.freeze&&(i++,1==this.data.system.diagonal?t.game_player.moveDir(r,!1,this.nbKeyPress):1==i&&t.game_player.moveDir(r,!1));this.spriteset.scrollingUpdate(),this.updateEvents(),RPGJS.Plugin.call("Sprite","sceneMapRender",[this]),e.refresh()},exit:function(){t.game_map.clear()},animation:function(e,t){this.getSpriteset().getEvent(e).showAnimation(t)},effect:function(e,t,n){this.getSpriteset().effect(e,t,n)},pictures:function(e,t){var n=this.getSpriteset();n[e+"Picture"].apply(n,t)},updateEvents:function(){t.game_map.updateEvents()},scrollMap:function(e,t){this.getSpriteset().scrollMap(e,t)},getSpriteset:function(){return this.spriteset},stopEvent:function(e){var t=this.getSpriteset();t&&t.stopEvent(e)},moveEvent:function(e,t,n,i,r){var a=this.getSpriteset();a&&a.moveEvent(e,t,n,i,r)},setParameterEvent:function(e,t,n){var i=this.getSpriteset();i&&i.setParameterEvent(e,t,n)},turnEvent:function(e,t){var n=this.getSpriteset();n&&n.turnEvent(e,t)},jumpEvent:function(e,t,n,i,r){var a=this.getSpriteset();a&&this.getSpriteset().getEvent(e).jumpCharacter(t,n,i,r)},setEventPosition:function(e,t,n){var i=this.getSpriteset();i&&this.getSpriteset().getEvent(e).setPosition(t,n)},blink:function(e,t,n,i){var r=this.getSpriteset().getEvent(e);r&&(r=r.getSprite(),RPGJS_Canvas.Effect["new"](this,r).blink(t,n,i))},removeEvent:function(e){this.getSpriteset().removeCharacter(e)},refreshEvent:function(e,t){this.getSpriteset().refreshCharacter(e,t)},addEvent:function(e){this.getSpriteset().addCharacter(e)}})}}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Menu",materials:{images:{background:"../materials/Graphics/Pictures/Layer00.png",button:"../materials/Graphics/Pictures/Sprite_Button.png",party:"../materials/Graphics/Pictures/Sprite_Status.png",hp:"../materials/Graphics/Pictures/HP.png",sp:"../materials/Graphics/Pictures/SP.png",gold:"../materials/Graphics/Icons/gold.png",icon:"../materials/Graphics/Icons/time.png"}},drawText:function(e,t,n,i,r){r=r||{};var a=RPGJS_Canvas.Text["new"](this,e);return a.style({size:r.size||"20px",color:r.color||"white",textBaseline:"top",family:"RPG",shadow:"1 1 10 #DBD862"}).draw(t,n,i),a},ready:function(e){this.data={actors:t.game_actors.get(),player:t.game_player};var n=this.createElement();
n.drawImage("background"),e.append(n),this.openWindow("index")},displayBar:function(e,t,n){var i=this.createElement(),r=this.createElement(),a=Math.floor(e.getCurrentParam(t));return i.strokeStyle="black",i.strokeRect(0,0,112,18),r.drawImage(n,1,1,100*e.getParamPoint(n)/a+"%"),i.opacity=.8,i.x=150,i.append(r),this.drawText(n.toUpperCase(),i,10,-2,{size:"20px"}),this.drawText(Math.floor(e.getParamPoint(n))+" / "+a,i,120,2,{size:"10px"}),i},displayActors:function(e,t){for(var n,i,r,a,s,o=(this.createElement(),[]),c=RPGJS_Canvas.Window["new"](this),l=c.getContent(),u=0;u<4;u++)if(a=this.data.actors[u],s=this.createElement(),r=this.createElement(),s.drawImage("party"),s.opacity=a?.6:.3,s.y=(s.img.height+10)*u,s.x=20,a){n=this.displayBar(a,"maxhp","hp"),n.y=35,i=this.displayBar(a,"maxsp","sp"),i.y=60,s.attr("id",a._id);var h=RPGJS_Canvas.Materials.get("characters_"+a.graphic);a.graphic_params=a.graphic_params||{regX:0,regY:0},r.drawImage("characters_"+a.graphic,0,0,h.width/a.nbSequenceX,h.height/a.nbSequenceY,-a.graphic_params.regX,-a.graphic_params.regY,h.width/a.nbSequenceX,h.height/a.nbSequenceY),r.x=40,r.y=30,s.append(r),s.append(n),s.append(i),s.propagationOpacity=!1,this.drawText("LV "+a.currentLevel,s,270,10,{size:"20px"}),this.drawText(a.name,s,150,10),l.append(s),o.push(s)}else l.append(s),o.push(s);return l.y=10,width_actor=s.img.width,c.open(e),c.cursor.init(o),c.cursor.select(function(e){var n=e.attr("id");void 0!=n&&t&&t.call(this,n)}),c.cursor.change(function(e){for(var t=(e.attr("id"),0);t<o.length;t++)o[t].x=20;e.x=0}),c.cursor.enable(!1),{box:c,set:l,width:width_actor}},__index:function(e){function t(e,t){t=t||[],c.transitionExit([{el:r,to:{x:s.width+a}},{el:u,to:{x:-g}},{el:v,to:{y:s.height+50}}],function(){c.openWindow(e,t)})}function n(e,t,n,i){var r=this.createElement();r.drawImage(e),r.x=t,r.y=n,i.append(r)}var i,r,a,s=this.getCanvas(),o="items",c=this,l=RPGJS_Canvas.Window["new"](this),u=l.getContent(),h={items:"Items",skills:"Skills",equip:"Equip",status:"Status",save:"Save"};RPGJS_Canvas.Input.reset();var f,d,p=0,a=0,g=0,m=[],v=this.createElement();for(key in h)f=h[key],d=this.createElement(),d.attr("id",key),d.drawImage("button"),d.y=(d.img.height+10)*p,0!=p&&(d.x=-20),d.opacity=.4,this.drawText(f,d,40,5,{size:"25px"}),d.propagationOpacity=!1,u.append(d),m.push(d),p++;u.x=-d.img.width,g=d.img.width,u.y=50,i=this.displayActors(e,function(e){t(o,[e])}),r=i.set,a=i.width,l.open(e),l.cursor.init(m),l.cursor.select(function(e){var n=e.attr("id");return CE.inArray(n,["status","equip","skills"])!=-1?(l.cursor.enable(!1),i.box.cursor.enable(!0),i.set.children()[0].x=0,o=n,void c._esc(function(){i.box.cursor.enable(!1),l.cursor.enable(!0);for(var e=i.set.children(),t=0;t<e.length;t++)e[t].x=20})):void t(n)}),l.cursor.change(function(e){for(var t=0;t<m.length;t++)m[t].x=-20;e.x=0}),l.cursor.assignKeys(),r.x=s.width+a,v.fillStyle="#44456C",v.fillRect(0,0,s.width,50),v.y=s.height+50,v.opacity=.5,v.propagationOpacity=!1;var _=10;this.drawText(this.data.player.gold,v,65,_,{size:"20px"}),n.call(this,"gold",25,_,v),e.append(v),this.transitionStart([{el:r,to:{x:s.width-a}},{el:u,to:{x:0}},{el:v,to:{y:s.height-50}}]),this._esc(function(){RPGJS_Canvas.Scene.exit("Scene_Menu")})},_esc:function(e){RPGJS_Canvas.Input.press([Input.Esc],function(){e.call(this)})},_transition:function(e,t,n){function i(){a++,a==t.length&&n&&n()}for(var r,a=0,s="start"==e?Ease.easeOutSine:Ease.easeInSine,o=0;o<t.length;o++)r=t[o],RPGJS_Canvas.Timeline.New(r.el).to(r.to,40,s).call(i)},transitionStart:function(e,t){this._transition("start",e,t)},transitionExit:function(e,t){this._transition("exit",e,function(){for(var n=0;n<e.length;n++)e[n].el.remove();t&&t()})},_back:function(){var e=this;RPGJS_Canvas.Input.reset(),RPGJS_Canvas.Input.press([Input.Esc],function(){e.openWindow("index")})},_help:function(e){var t=this.createElement();return t.fillStyle="#44456C",t.fillRect(0,0,280,180),t.y=70,t.x=e.width,t.opacity=.5,t.propagationOpacity=!1,t},changeHelp:function(e,t,n){if(e){var i=e.attr("id"),r=n[i];icon=this.createElement(),t.empty(),icon.drawImage("icon"),icon.scaleTo(2),icon.x=140-icon.img.width,icon.y=40,t.append(icon),this.drawText(r.description,t,10,120,{size:"22px",lineWidth:100})}},_displayItem:function(e,t,n){n=n||{},void 0==n.position&&(n.position=!0);var i=this.createElement(["set","icon","text","nb"]);return i.icon.drawImage("icon"),this.drawText(e.name,i.text,35,0),e.nb&&this.drawText(e.nb,i.nb,250,0),n.position&&(i.set.y=t*(i.icon.img.height+10)+20,i.set.x=20),i.set.append(i.icon,i.text,i.nb),i.set.attr("id",e.id),i.set.attr("type",n.type),i.set.attr("consumable",e.consumable),i.set.width=280,i.set.height=40,void 0!=e.consumable&&0==+e.consumable&&(i.set.opacity=.4),i.set},__items:function(e,n){function i(){var e,t,n=0,i=[];p.empty();for(var r in l)for(var c in l[r]){switch(r){case"items":t=a[c];break;case"armors":t=o[c];break;case"weapons":t=s[c]}t.nb=l[r][c],t.id=c,"armors"!=r&&"weapons"!=r||(t.consumable=0),e=this._displayItem(t,n,{type:r}),d+=e.y,p.append(e),i.push(e),n++}return i}function r(){var e,t,i=[];p.empty();for(var r=0;r<n.skills.length;r++)t=n.data[n.skills[r]],t.nb=t.sp_costs,t.id=n.skills[r],t.consumable=0,e=this._displayItem(t,r),d+=e.y,p.append(e),i.push(e);return i}var a=t.data.items,s=t.data.weapons,o=t.data.armors,c=this,l=this.data.player.getItems();console.log(l);var u,h=this.getCanvas(),f=this._help(h),d=0,p=this.createElement();u=n?r.call(this):i.call(this);var g=this.createCursor(e,300,180,u),m=g.getContent(),v=this.createElement();g.cursor.el.hide(),v.width=300,v.height=350,m.fillStyle="#44456C",m.fillRect(0,0,300,350),m.y=70,m.x=-350,m.opacity=.5,m.propagationOpacity=!1,p.width=300,p.height=d;var _=RPGJS_Canvas.Scrolling["new"](this);_.mouseScroll(v,p),m.append(v),e.append(f);var y=this.createElement(),b=this.displayActors(e,function(e){var t=g.cursor.getCurrentElement().attr("id");this.enable(!1),g.cursor.enable(!0),c.data.player.useItem("items",t),RPGJS_Canvas.Timeline.New(y).to({x:h.width},40).call(),u=i.call(c),g.cursor.refresh(u,!0)});y.fillStyle="#44456C",y.fillRect(0,0,b.width,h.height),y.x=h.width,y.propagationOpacity=!1,y.opacity=.7,y.append(b.set),e.append(y),g.cursor.change(function(e){var t,i;if(n)t=n.data;else switch(i=e.attr("type")){case"items":t=a;break;case"armors":t=o;break;case"weapons":t=s}c.changeHelp(e,f,t)}),g.cursor.select(function(e){if(0!=+e.attr("consumable")){var t=e.attr("id");a[t];this.enable(!1),b.box.cursor.enable(!0),RPGJS_Canvas.Timeline.New(y).to({x:h.width-b.width},40).call()}}),this.transitionStart([{el:f,to:{x:h.width-300}},{el:m,to:{x:20}}],function(){g.cursor.enable(!0),g.cursor.setIndex(0,!0)}),this._esc(function(){c.transitionExit([{el:f,to:{x:h.width}},{el:m,to:{x:-350}}],function(){c.openWindow("index")})})},__skills:function(e,n){var i=t.game_actors.getById(n),r={actor:i,skills:i.getSkill(),data:t.data.skills};this.__items(e,r)},__equip:function(e,n){function i(){var e,t,n=[],i=h.getItemsEquipedByType("weapons")[0],r=this.createElement();v.empty(),i?(e=f[i],e.id=i,t=this._displayItem(e,0,{position:!1}),r.append(t),t.x=100,r.attr("id",i)):r.attr("id",!1),r.attr("type","weapons"),this.drawText("Weapon",r,0,0),v.append(r),v.x=10,v.y=10,n.push(r);var a,s,o,c=(h.getItemsEquipedByType("armors"),{shield:"Shield",helmet:"Helmet",body_armor:"Body Armor",accessory:"Accessory"}),l=1;for(var u in c)r=this.createElement(),r.y=35*l,this.drawText(c[u],r,0,0),o=h.getItemsEquipedByAttr("armors","kind",u),o?(a=d[o],a.nb=!1,a.id=o,s=this._displayItem(a,l,{position:!1}),s.x=100,r.attr("id",o),r.append(s)):r.attr("id",!1),r.attr("type","armors"),r.attr("kind",u),v.append(r),n.push(r),l++;return n}function r(e){var t,n,i;o.empty(),this.drawText(h.name,o,20,10,{size:"30px"}),this.drawText("LV : "+h.currentLevel,o,20,45),CE.each(["atk","pdef","mdef"],function(e,t){u.drawText(t.toUpperCase()+" :   "+h.getParamPoint(t),o,20,35*e+75)}),e&&("weapons"==m.currentType?(t=f[m.currentItem],n=f[e]):"armors"==m.currentType&&(t=d[m.currentItem],n=d[e]),CE.each(["atk","pdef","mdef"],function(e,r){var a=h.getParamPoint(r),s=!1;i=t?t[r]?a-t[r]+(n?+n[r]:0):a:a+(n?+n[r]:0),i>a?s="green":i<a&&(s="red"),u.drawText("-->",o,170,35*e+75),u.drawText(i,o,230,35*e+75,{color:s})}))}function a(e,t){var n,i=0,r=0,a=[],s={};b.empty(),m.currentItem&&(n=this._displayItem({id:"0",name:"Remove"},i),r+=n.y,b.append(n),a.push(n),i++);for(var o in p[e])s="weapons"==e?f[o]:d[o],"armors"==e&&m.currentKind!=s.kind||(s.nb=p[e][o],s.id=o,n=this._displayItem(s,i),r+=n.y,b.append(n),a.push(n),i++);b.width=300,b.height=r,_.cursor.refresh(a)}function s(){this._esc(function(){w.cursor.remove(),_.cursor.remove(),u.transitionExit([{el:l,to:{x:c.width}},{el:o,to:{y:-300}},{el:equipment,to:{y:c.height}},{el:y,to:{x:c.width}}],function(){u.openWindow("index")})})}var o=this.createElement(),c=this.getCanvas(),l=this._help(c),u=this,h=t.game_actors.getById(n),f=t.data.weapons,d=t.data.armors,p=this.data.player.getItems(),g=this.createElement();g.width=180,g.height=300;var m={currentItem:0,changeItem:0},v=this.createElement(),_=this.createCursor(e,300,180,[]),y=_.getContent(),b=this.createElement();y.append(b),equipment_list=i.call(this);var w=this.createCursor(e,300,180,equipment_list);equipment=w.getContent(),equipment.append(v),w.cursor.enable(!0),CE.each([o,equipment,y],function(e,t){t.fillStyle="#44456C",t.opacity=.5,t.propagationOpacity=!1,t.fillRect(0,0,300,180)}),o.y=-300,o.x=20,equipment.y=c.height,equipment.x=20,y.y=270,y.x=c.width,y.append(g);var x=RPGJS_Canvas.Scrolling["new"](this);x.mouseScroll(g,b),r.call(this),w.cursor.change(function(e){m.currentType=e.attr("type"),m.currentKind=e.attr("kind"),m.currentItem=e.attr("id"),a.call(u,m.currentType,m.currentKind),console.log(m.currentItem)}),w.cursor.select(function(e){this.enable(!1),m.currentItem=e.attr("id"),_.cursor.enable(!0),m.currentType=e.attr("type"),m.currentKind=e.attr("kind"),_.cursor.setIndex(0,!0),u._esc(function(){_.cursor.enable(!1),w.cursor.enable(!0),r.call(u),s.call(u)})}),_.cursor.change(function(e){r.call(u,e.attr("id"))}),_.cursor.select(function(e){var t=+e.attr("id");this.enable(!1),w.cursor.enable(!0),h.removeItemEquiped(m.currentType,m.currentItem),0!=t&&h.equipItem(m.currentType,t),m.currentItem=null,r.call(u),equipment_list=i.call(u),w.cursor.refresh(equipment_list),a.call(u,m.currentType,m.currentKind)}),e.append(o,l),this.transitionStart([{el:l,to:{x:c.width-300}},{el:o,to:{y:70}},{el:equipment,to:{y:270}},{el:y,to:{x:c.width-300}}],function(){w.cursor.setIndex(0,!0)}),s.call(this)},__status:function(e,n){var i,r,a=this.createElement(),s=this.createElement(),o=this.getCanvas(),c=this,l=t.game_actors.getById(n);this.drawText(l.name,s,20,20,{size:"30px"}),this.drawText(l.className,s,300,20,{size:"30px"}),this.drawText("LV : "+l.currentLevel,s,300,65,{size:"18px"}),this.drawText("EXP : "+l.currentExp,s,300,95,{size:"18px"}),this.drawText("NEXT : "+l.nextExp(),s,300,125,{size:"18px"});var u=l.getAllParamsPoint(),h=1;for(var f in u)"hp"!=f&&"sp"!=f&&(this.drawText(f.toUpperCase()+" :   "+u[f].current,s,20,30*h+120,{size:"18px"}),h++);var d=l.getCurrentParam(),p=1;for(var g in d)"maxhp"!=g&&"maxsp"!=g&&(this.drawText(g.toUpperCase()+" :   "+l.getCurrentParam(g),s,20,30*p+250,{size:"18px"}),p++);a.x=o.width,i=this.displayBar(l,"maxhp","hp"),i.y=65,r=this.displayBar(l,"maxsp","sp"),r.y=90,i.x=20,r.x=20,s.fillStyle="#44456C",s.fillRect(0,0,500,480),s.x=20,s.y=o.height,s.opacity=.5,s.propagationOpacity=!1,s.append(i),s.append(r),e.append(s),e.append(a),this.transitionStart([{el:a,to:{x:o.width-a.img.width}},{el:s,to:{y:20}}]),this._esc(function(){c.transitionExit([{el:a,to:{x:o.width}},{el:s,to:{y:o.height}}],function(){c.openWindow("index")})})},__save:function(e){var t=RPGJS.scene.call("Scene_Load",{overlay:!0});t.refresh("save")},__exit:function(e){},createCursor:function(e,t,n,i,r){r=r||{};var a=RPGJS_Canvas.Window["new"](this,t,n);content=a.getContent();var s=this.createElement();return s.fillStyle="#7778AA",s.fillRect(-10,-10,t-10,40),s.opacity=.5,s.hide(),e.append(s),a.open(e),a.cursor.init(s,i),a.cursor.enable(!1),a},openWindow:function(e,t){t||(t=[]),t=[this.getStage()].concat(t),this["__"+e].apply(this,t)},exit:function(){RPGJS_Canvas.Scene.get("Scene_Map").pause(!1),RPGJS_Canvas.Scene.get("Scene_Map").keysAssign()}})}}).call(t,function(){return this}())},function(e,t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Title",materials:{images:{background:"../materials/Graphics/Titles/picture11.jpg",cursor_on:"../materials/Graphics/Pictures/Mn_Sel.png",cursor_off:"../materials/Graphics/Pictures/Mn_Sel_Off.png"}},ready:function(e){var t=this.createElement();t.drawImage("background");var n=RPGJS_Canvas.Window["new"](this);content=n.getContent(),n.open(e);var i,r,a,s={new_game:"New Game",load_game:"Load"},o=this.createElement(),c=[],l=[],u=0,h=this;for(var f in s){i=this.createElement(300,70),a=this.createElement("cursor");var r=RPGJS_Canvas.Text.New(this,s[f]);r.style({size:"25px",color:"white",textBaseline:"top",family:"Megadeth",shadow:"1 1 10 #DBD862"}).draw(i,0,0),i.y=60*u,i.attr("index",u),i.attr("id",f),"load_game"!=f||this.existSaves()?i.attr("enable",!0):(i.opacity=.4,i.attr("enable",!1)),a.drawImage("cursor_off",-75,10),i.append(a),l.push(a),c.push(i),o.append(i),u++}o.x=350,o.y=300,e.append(t,o),n.cursor.init(c),n.cursor.select(function(e){var t=e.attr("id");e.attr("enable")&&h[t].call(h)}),n.cursor.change(function(e){for(var t=e.attr("index"),n=0;n<l.length;n++)l[n].drawImage("cursor_off",-75,10);l[t].drawImage("cursor_on",-75,10)}),n.cursor.enable(!0),n.cursor.setIndex(0,!0)},new_game:function(){CE.io?RPGJS.scene.call("Scene_Map"):RPGJS.scene.call("Scene_Map").load()},load_game:function(){var e=RPGJS.scene.call("Scene_Load");e.refresh("load")},existSaves:function(){for(var e=1;e<=4;e++)if(Marshal.exist("rpg_slot"+e))return!0;return!1}})}},function(e,t){"use strict";e.exports=function(){RPGJS_Canvas.Scene.New({name:"Scene_Window",_onEnterPress:null,_onEnterPressChoice:null,ready:function(e){this.stage=e},onEnterPress:function(e){this._onEnterPress=e},onEnterPressChoice:function(e){this._onEnterPressChoice=e},box:function(){var e=this;this.window=RPGJS_Canvas.Window.New(this,500,200,"window"),this.window.setBackground("#32343A",6,.7),this.window.position("bottom"),this.window.open(this.stage),RPGJS_Canvas.Input.reset(),RPGJS_Canvas.Input.press([Input.Enter,Input.Space],function(){e._onEnterPress&&e._onEnterPress.call(this)})},choices:function(e){function t(){for(var t,n=0,i=0;i<e.length;i++)t=a.measureText(e[i],"18px").width,t>n&&(n=t);return n}var n,i,r=[],a=this.getCanvas(),s=this,o=t()+50,c=35*e.length+25,l=RPGJS_Canvas.Window.New(this,o,c,"window");l.setBackground("#32343A",6,.7),l.position("top");for(var u=0;u<e.length;u++)n=this.createElement(35,o),n.y=35*u,n.attr("index",u),i=RPGJS_Canvas.Text.New(this,e[u]),i.style({size:"18px",color:"white"}).draw(n,0,10),r.push(n),l.getContent().append(n);var h=this.createElement();h.fillStyle="#7778AA",h.fillRect(-10,-10,o-30,30),h.opacity=.5,l.cursor.init(h,r,{enter:[Input.Enter,Input.Space]}),l.cursor.select(function(e){s._onEnterPressChoice(e.attr("index"))}),l.open(this.stage),this.stage.append(h),l.cursor.setIndex(0),l.cursor.enable(!0)},text:function e(t){var n=this.window.getContent();n.empty();var e=RPGJS_Canvas.Text.New(this,t);e.style({size:"18px",lineWidth:400,color:"white"}).draw(n,20,20,{line:{frames:20,onFinish:function(){}}})},exit:function(){RPGJS_Canvas.Scene.get("Scene_Map").keysAssign()}})}},function(e,t){(function(e){"use strict";Class.create("Sprite",{showAnimation:function(t){if(e.data.animations){var n=e.data.animations[t],i=this;n&&RPGJS.Path.loadMaterial("animations",n.graphic,function(e){n.pattern_w=n.pattern_w||5,n.pattern_h=n.pattern_h||3;var t=e.width/n.pattern_w,r=e.height/n.pattern_h,a=RPGJS_Canvas.Animation.New({images:"animations_"+n.graphic,addIn:i.entity.el,animations:{_default:{frequence:+n.frequence,position:{top:i.height/2,left:i.width/2},frames:n.frames,size:{width:t,height:r}}}});a.play("_default","remove")})}}})}).call(t,function(){return this}())},function(e,t){(function(e){"use strict";Class.create("Sprite_Character",{el:null,scene:null,old_direction:"",direction:"bottom",initial_dir:null,width:0,height:0,_actions:{},initialize:function(e,t,n,i){this.scene=e,this.entity=Class.New("Entity",[e.getStage(),{},!1]),this.entity.setModel(i),this.refresh(t),this.setPosition(this.x,this.y),n.append(this.entity.el)},remove:function(){this.entity.el.remove()},refresh:function(e){var t=this;if(e){for(var n in e)this[n]=e[n];this.graphic_params=this.graphic_params||{};for(var n in this.graphic_params)this[n]=""!=this.graphic_params[n]?this.graphic_params[n]:this[n];this.is_start||(this.direction=e.direction)}if(this.regY&&(this.regY=+this.regY),this.regX&&(this.regX=+this.regX),this.pattern||(this.pattern=0),!this.exist)return void this.entity.el.removeCmd("drawImage");if(this.initial_dir||(this.initial_dir=this.direction),+this.graphic){var i=function(){if(t.graphic){var e=RPGJS_Canvas.Materials.get("characters_"+t.graphic);t.width=e.width/t.nbSequenceX,t.height=e.height/t.nbSequenceY,t.entity.el.drawImage("characters_"+t.graphic,0,0,t.width,t.height,-t.regX,-t.regY,t.width,t.height),t.setAnimation(),t.setSpritesheet(),t.stop(),t.stop_animation&&t.startMove()}};RPGJS.Path.loadMaterial("characters",this.graphic,i)}else this.stop(),this.entity.el.removeCmd("drawImage");void 0!=this.opacity&&(this.entity.el.opacity=this.opacity/255),this.entity.el.regX=this.regX,this.entity.el.regY=this.regY},getSprite:function(){return this.entity.el},setSpritesheet:function(){for(var t,n=[],i=0;i<this.nbSequenceY;i++)for(var r=0;r<this.nbSequenceX;r++){switch(t="",i){case 0:t="bottom";break;case 1:t="left";break;case 2:t="right";break;case 3:t="up"}t+="_"+r,n.push(t)}this.spritesheet=RPGJS_Canvas.Spritesheet.New("characters_"+this.graphic,{grid:[{size:[this.nbSequenceX,this.nbSequenceY],tile:[this.width,this.height],set:n,reg:[0+this.regX,this.height-e.game_map.tile_h+this.regY]}]})},setAnimation:function(){var t=this.nbSequenceX-1,n=(this.nbSequenceY-1,Math.abs(-18+4*this.speed)),i={left:0-this.regX,top:-(this.height-e.game_map.tile_h)-this.regY};this.animation=RPGJS_Canvas.Animation.New({images:"characters_"+this.graphic,animations:{bottom:{frames:[1,t],size:{width:this.width,height:this.height},position:i,frequence:n},left:{frames:[t+1,2*t+1],size:{width:this.width,height:this.height},position:i,frequence:n},right:{frames:[2*t+2,3*t+2],size:{width:this.width,height:this.height},position:i,frequence:n},up:{frames:[3*t+3,4*t+3],size:{width:this.width,height:this.height},position:i,frequence:n}}}),this.animation.add(this.entity.el,!0)},initAnimationActions:function(e){function t(t){function h(){RPGJS_Canvas.Scene.get("Scene_Map").animation(0,e[t].animation_finish),u.stop()}o=e[t],o.graphic&&(o["graphic-params"]||(o["graphic-params"]={}),o["graphic-params"].nbSequenceX||(o["graphic-params"].nbSequenceX=4),o["graphic-params"].nbSequenceY||(o["graphic-params"].nbSequenceY=4),o["graphic-params"].regX||(o["graphic-params"].regX=0),o["graphic-params"].regY||(o["graphic-params"].regY=0),c=RPGJS_Canvas.Materials.get("characters_"+o.graphic),l={width:c.width/o["graphic-params"].nbSequenceX,height:c.height/o["graphic-params"].nbSequenceY},n=o["graphic-params"].nbSequenceX-1,i=o["graphic-params"].nbSequenceY-1,r=o.speed,a={left:0-o["graphic-params"].regX,top:-18-o["graphic-params"].regY},s={},s[t+"_bottom"]={frames:[0,n],size:l,position:a,frequence:r,finish:h},s[t+"_left"]={frames:[n+1,2*n+1],size:l,position:a,frequence:r,finish:h},s[t+"_right"]={frames:[2*n+2,3*n+2],size:l,position:a,frequence:r,finish:h},s[t+"_up"]={frames:[3*n+3,4*n+3],size:l,position:a,frequence:r,finish:h},this.action_animation=RPGJS_Canvas.Animation.New({images:"characters_"+o.graphic,animations:s}),this.action_animation.add(this.entity.el),this._actions=e)}var n,i,r,a,s,o,c,l,u=this;for(var h in e)t.call(this,h)},playAnimationAction:function(e){var t;this._actions[e]&&(t=this.getDisplayDirection(),this.action_animation.play(e+"_"+t,"stop"),RPGJS_Canvas.Scene.get("Scene_Map").animation(0,this._actions[e]["animation_"+t]))},setParameter:function(e,t){this[e]=t,this.refresh()},setPosition:function(e,t){this.entity.position(e,t)},jumpCharacter:function(e,t,n,i){this.jumping=!0;var r=(Math.sqrt(e*e+t*t),this);this.stop();var a=1,s=function o(){var n=4*r.speed;(0!=e&&Math.abs(e)/n)<a||0!=t&&Math.abs(t)/n?(r.getSprite().off("canvas:render",o),r.jumping=!1,r.startMove(),i&&i()):(0!=e&&(r.entity.el.x+=e<0?-n:n),0!=t&&(r.entity.el.y+=t<0?-n:n)),a++};this.getSprite().on("canvas:render",s)},stop:function(){var e=this;if(this.animation){var t=this.getDisplayDirection()+"_"+this.pattern;e.animation.stop(),e.spritesheet._set[t]&&e.spritesheet.draw(e.entity.el,t)}},startMove:function(){this.animation&&this.animation.play(this.getDisplayDirection(),"loop")},move:function(e,t,n,i,r){this.jumping||(i&&2==i||this.turn(r.direction||n),this.entity.el.x=t.x,this.entity.el.y=t.y)},turn:function(e){this.direction=e,this.changeDirection()},changeDirection:function(){var e=this.getDisplayDirection();this.spritesheet&&(this.direction!=this.old_direction||this.animation.isStopped())&&this.graphic&&(this.spritesheet.exist(e+"_0")&&this.spritesheet.draw(this.entity.el,e+"_0"),this.no_animation||this.animation.play(e,"loop"),this.old_direction=this.direction)},getDisplayDirection:function(){return this.direction_fix?this.initial_dir:this.direction}}).extend("Sprite")}).call(t,function(){return this}())},function(e,t){"use strict";Class.create("Sprite_Plugin",{_class_:null,callModel:function(e,t){if(e="_"+e,this._class_&&this._class_[e])return this._class_[e].apply(this._class_,t)}})},function(e,t){(function(e){"use strict";var t;Class.create("Spriteset_Map",{stage:null,scene:null,data:null,tile_w:32,tile_h:32,width:0,height:0,nb_layer:3,nb_autotiles_max:64,autotiles:[],event_layer:null,events:{},layer:[],picture_layer:null,map:null,pictures:{},initialize:function(e,t,n,i){var r=this;this.scene=e,this.stage=t,this.data=n,this.params=i,this.map=this.scene.createElement(),this.picture_layer=this.scene.createElement(),this.stage.append(this.map,this.picture_layer),RPGJS.params.tiled?this.tiled():(this.nb_layer=2*this.nb_layer+1,CE.each(this.nb_layer,function(t){r.layer[t]=e.createElement(),r.map.append(r.layer[t])}),this.tilemap({}))},tiled:function n(){RPGJS.Plugin.call("Sprite","drawMapBegin",[this]);var n=RPGJS_Canvas.Tiled["new"](),e=this;n.ready(function(){e.width=this.width,e.height=this.height,RPGJS.Plugin.call("Sprite","drawMapEnd",[this]),e.characters(e.event_layer=this.getLayerObject())}),n.load(this.scene,this.map,this.data.data,{pack:!0})},tilemap:function(e){function n(e,t,n){var i,r,o,c,l=a.tile_h/2,u=document.createElement("canvas"),h=u.getContext("2d");for(i=0;i<4;i++){switch(r=0,o=0,c=e.getImageData(16*t[i][0],16*t[i][1],l,l),i){case 1:r=l;break;case 2:r=l,o=l;break;case 3:o=l}h.putImageData(c,r,o)}s.push(u)}function i(e,t){var n=0;e=2*(e-1),t=2*(t-1);var i=[];for(n=0;n<4;n++){switch(n){case 1:e++;break;case 2:t++;break;case 3:e--}i.push([e,t])}return i}function r(e,t,i,r){var a,s,o;switch(e){case 0:n(t,i.center,r);break;case 1:var c,l=[],u=[];for(a=1;a<=4;a++){for(s=0;s<=l.length;s++)u.push((0!=s?l[s-1]:"")+a+";");for(s=0;s<u.length;s++){l.push(u[s]),c=u[s].split(";"),c.pop();var h=[];for(o=1;o<=4;o++)CE.inArray(o,c)!=-1?h.push(i.corner[o-1]):h.push(i.center[o-1]);n(t,h,r)}u=[]}break;case 2:var f,d,p=[i.left,i.top,i.right,i.bottom],g=[2,3];for(a=0;a<4;a++){for(s=0;s<4;s++)f=CE.clone(p[a]),1!=s&&3!=s||(d=g[0]-1,f[d]=i.corner[d]),2!=s&&3!=s||(d=g[1]-1,f[d]=i.corner[d]),n(t,f,r);g[0]++,g[1]++,g[0]>4&&(g[0]=1),g[1]>4&&(g[1]=1)}break;case 3:n(t,[i.left[0],i.right[1],i.right[2],i.left[3]],r),n(t,[i.top[0],i.top[1],i.bottom[2],i.bottom[3]],r);break;case 4:var f,p=[i.top_left,i.top_right,i.bottom_right,i.bottom_left],d=3;for(a=0;a<p.length;a++){for(s=0;s<2;s++)f=CE.clone(p[a]),1==s&&(f[d-1]=i.corner[d-1]),n(t,f,r);d++,d>4&&(d=1)}break;case 5:var p=[[i.top_left[0],i.top_right[1],i.right[2],i.left[3]],[i.top_left[0],i.top[1],i.bottom[2],i.bottom_left[3]],[i.left[0],i.right[1],i.bottom_right[2],i.bottom_left[3]],[i.top[0],i.top_right[1],i.bottom_right[2],i.bottom[3]]];for(a=0;a<p.length;a++)n(t,p[a],r);break;case 6:n(t,i.full,r),n(t,i.full,r)}}RPGJS.Plugin.call("Sprite","drawMapBegin",[this]);var a=this,s=[];if(this.params.autotiles){var o={center:i(2,3),full:i(1,1),corner:i(3,1),left:i(1,3),right:i(3,3),top:i(2,2),bottom:i(2,4),top_left:i(1,2),top_right:i(3,2),bottom_left:i(1,4),bottom_right:i(3,4)};CE.each(this.params.autotiles,function(e,n){var i=document.createElement("canvas"),a=i.getContext("2d"),s=RPGJS_Canvas.Materials.images[n];for(i.width=s.width,i.height=s.height,a.drawImage(s,0,0),t=0;t<7;t++)r(t,a,o,!1)})}var c,l,u,h=this.data.data.map,f=this.data.autotiles||{},d=this.data.propreties||{},p=RPGJS_Canvas.Materials.get("tileset");this.width=h.length,this.height=h[0].length,CE.each(h,function(e,t){CE.each(h[e],function(t,n){CE.each(h[e][t],function(n,i){if(void 0!==h[e][t][n]&&null!=h[e][t][n]){var r=a.scene.createElement();if(48*a.nb_autotiles_max<=i){i-=48*a.nb_autotiles_max;var o=parseInt(i/(256/a.tile_h))*a.tile_h,g=i%(256/a.tile_w)*a.tile_w;a.data.graphics&&a.data.graphics.tileset&&(c=a.tile_w,g+a.tile_w>p.width&&(c-=g+a.tile_w-p.width),l=a.tile_h,o+a.tile_h>p.height&&(l-=o+a.tile_h-p.height),r.drawImage("tileset",g,o,c,l,0,0,c,l)),u=d[i]}else s[i]&&(r.drawImage(s[i]),u=f[Math.floor(i/48)]);r.x=e*a.tile_w,r.y=t*a.tile_h,u||(u=[0,0]),0==u.length&&(u=[0,0]),a.layer[4*(u[0]>0?1:0)].append(r)}})})});var g=this.getWidthPixel(),m=this.getHeightPixel();this.layer[0].pack(g,m),this.layer[4].pack(g,m),RPGJS.Plugin.call("Sprite","drawMapEnd",[this]),this.event_layer=this.layer[3],this.characters(this.event_layer)},characters:function(t){for(var n,i=0;i<this.data.events.length;i++)n=this.data.events[i],this.addCharacter(n);this.player=Class.New("Sprite_Character",[this.scene,this.data.player,t,e.game_player]),this.player.initAnimationActions(this.data.actions),this.scrolling=RPGJS_Canvas.Scrolling.New(this.scene,this.tile_w,this.tile_h),this.scrolling.setMainElement(this.player.getSprite()),this.scrolling.addScroll({element:this.map,speed:e.game_player.speed,block:!0,width:this.getWidthPixel(),height:this.getHeightPixel()}),RPGJS.Plugin.call("Sprite","drawCharactersEnd",[this])},addCharacter:function(t){var n=Class.New("Sprite_Character",[this.scene,t,this.event_layer,e.game_map.getEvent(t.id)]);this.events[t.id]=n,RPGJS.Plugin.call("Sprite","addCharacter",[n,t,this])},addPicture:function(e,t,n){var i=this;t.opacity=t.opacity||255,t.zoom_x=t.zoom_x||100,t.zoom_y=t.zoom_y||100,RPGJS.Path.load("pictures",t.filename,e,function(r){var a=i.scene.createElement();a.drawImage("pictures_"+e),a.x=t.x,a.y=t.y,a.width=r.width,a.height=r.height,"center"==t.origin&&a.setOriginPoint("middle"),a.scaleX=t.zoom_x/100,a.scaleY=t.zoom_y/100,a.opacity=t.opacity/255,i.picture_layer.append(a),i.pictures[e]=a,n&&n()})},movePicture:function(e,t,n,i){var r=this.pictures[e];if(!r)return!1;"center"==n.origin&&r.setOriginPoint("middle");var a=RPGJS_Canvas.Timeline.New(r);n.opacity=n.opacity||255,n.zoom_x=n.zoom_x||100,n.zoom_y=n.zoom_y||100,a.to({x:+n.x},+t).call(i)},rotatePicture:function(e,t){var n=this.pictures[e];if(!n)return!1;var i=RPGJS_Canvas.Timeline.New(n);i.to({rotation:360},t).call(function(){n.rotation=0})},erasePicture:function(e){var t=this.pictures[e];return!!t&&(t.remove(),void delete this.pictures[e])},effect:function i(e,t,n){function r(){a.scrolling.freeze=!1,n&&n()}var a=this,i=RPGJS_Canvas.Effect.New(this.scene,this.map);this.scrolling.freeze=!0,t.push(r),i[e].apply(i,t)},scrollMap:function(e,t){var n=this;this.scrolling.freeze=!0,RPGJS_Canvas.Timeline.New(this.map).to({x:-e.x,y:-e.y},120).call(function(){n.scrolling.freeze=!1,t&&t()})},refreshCharacter:function(e,t){var n=this.getEvent(e);n&&n.refresh(t)},removeCharacter:function(e){this.getEvent(e).remove(),delete this.events[e]},moveEvent:function(e,t,n,i,r){var a="left"==n||"right"==n?"x":"y";this.getEvent(e).move(a,t,n,i,r),this.event_layer.children().sort(function(e,t){var n=e._z?e._z:e.y,i=t._z?t._z:t.y;return n-i})},setParameterEvent:function(e,t,n){this.getEvent(e).setParameter(t,n)},turnEvent:function(e,t){this.getEvent(e).turn(t)},stopEvent:function(e){this.getEvent(e).stop()},getEvent:function(e){return 0==e?this.player:this.events[e]},scrollingUpdate:function(){this.scrolling.update()},getWidthPixel:function(){return this.width*this.tile_w},getHeightPixel:function(){return this.height*this.tile_h}})}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=m.Map.createEvent("EV-1",7,9),n=e.slice(0,10),i=n.map(function(e,t){return["CHOICE_"+t,"SHOW_TEXT: {'text': 'Boi: Nice, "+e.name+" is a pretty cool app developed by "+e.developerName+". I&quote;ll redirect you to it!'}",'SCRIPT: {"text": "window.location.assign(&quote;/apps/'+e.id+'&quote;);"}']}).reduce(function(e,t){return e.concat(t)},[]);t.addPage({trigger:"action_button",type:"fixed",graphic:"2"},["CHOICES: "+(0,l["default"])(n.map(function(e){return e.name}))].concat((0,h["default"])(i),["ENDCHOICES"])),t.display()}function a(){var e=m.Map.createEvent("EV-2",9,19);e.addPage({trigger:"action_button",type:"fixed",graphic:"3"},['SHOW_TEXT: {"text": "Leonard: Hey man! Welcome to my town, my name is Senor Leonard Face."}','SHOW_TEXT: {"text": "Leonard: There is some pretty interesting stuff going on around here, apparently a merchant has started selling subscription based cloud applications just north of here."}','SHOW_TEXT: {"text": "Leonard: Her name is Lady Boi But On. Feel free to hit her up."}']),e.display()}function s(){m.Player.init({actor:1,start:{x:11,y:19,id:1}})}function o(e){m.Materials=d["default"],m.Database=g["default"],m.defines({canvas:"game",autoload:!1,scene_path:"../"}).ready(function(){s(),m.Scene.map(function(){r(e),a()})})}Object.defineProperty(t,"__esModule",{value:!0});var c=n(184),l=i(c),u=n(187),h=i(u);t["default"]=o,n(156);var f=n(404),d=i(f),p=n(403),g=i(p),m=window.RPGJS},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[i](e,t,{writable:!0,configurable:!0,value:n})}if(n(402),n(407),n(188),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var i="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){e.exports={"default":n(189),__esModule:!0}},function(e,t,n){e.exports={"default":n(190),__esModule:!0}},function(e,t,n){e.exports={"default":n(191),__esModule:!0}},function(e,t,n){e.exports={"default":n(192),__esModule:!0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(183),a=i(r);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a["default"])(e)}},function(e,t,n){n(231),e.exports=n(26).RegExp.escape},function(e,t,n){n(126),n(216),e.exports=n(46).Array.from},function(e,t,n){var i=n(46),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(219),n(218),n(220),n(221),e.exports=n(46).Symbol},function(e,t,n){n(126),n(222),e.exports=n(87).f("iterator")},12,function(e,t){e.exports=function(){}},[411,36,124,214],[412,75,22],[413,35,56],[417,62,121,80],[419,30],[421,75],[422,55,22],[423,75],[424,54],[425,119,56,81,48,22],[427,22],138,[428,62,36],[429,63,61,34,35,60],[432,35,54,62,47],[433,80,56,36,85,34,117,47],[434,36,120],[436,34,125,82],[442,84,76],[443,84],[451,196,22,55,46],[452,115,78,125,203,201,124,197,215,205],[453,194,206,55,36,118],function(e,t){},[455,30,34,47,78,123,208,60,83,81,63,22,87,86,207,198,202,54,36,85,56,119,211,210,35,62,120,80,121,79,48],[456,86],[457,86],function(e,t,n){
n(217);for(var i=n(30),r=n(48),a=n(55),s=n(22)("toStringTag"),o=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var l=o[c],u=i[l],h=u&&u.prototype;h&&!h[s]&&r(h,s,l),a[l]=a.Array}},function(e,t,n){var i=n(5),r=n(96),a=n(6)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var i=n(223);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){"use strict";var i=n(2),r=n(25),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return r(i(this),e!=a)}},[417,41,72,59],[428,41,16],function(e,t,n){"use strict";var i=n(229),r=n(68),a=n(12);e.exports=function(){for(var e=a(this),t=arguments.length,n=Array(t),s=0,o=i._,c=!1;t>s;)(n[s]=arguments[s++])===o&&(c=!0);return function(){var i,a=this,s=arguments.length,l=0,u=0;if(!c&&!s)return r(e,n,a);if(i=n.slice(),c)for(;t>l;l++)i[l]===o&&(i[l]=arguments[u++]);for(;s>u;)i.push(arguments[u++]);return r(e,i,a)}}},function(e,t,n){e.exports=n(3)},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){var i=n(1),r=n(230)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},function(e,t,n){var i=n(1);i(i.P,"Array",{copyWithin:n(128)}),n(49)("copyWithin")},function(e,t,n){"use strict";var i=n(1),r=n(23)(4);i(i.P+i.F*!n(21)([].every,!0),"Array",{every:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var i=n(1);i(i.P,"Array",{fill:n(88)}),n(49)("fill")},function(e,t,n){"use strict";var i=n(1),r=n(23)(2);i(i.P+i.F*!n(21)([].filter,!0),"Array",{filter:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(23)(6),a="findIndex",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)(a)},function(e,t,n){"use strict";var i=n(1),r=n(23)(5),a="find",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)(a)},function(e,t,n){"use strict";var i=n(1),r=n(23)(0),a=n(21)([].forEach,!0);i(i.P+i.F*!a,"Array",{forEach:function(e){return r(this,e,arguments[1])}})},[452,27,1,10,137,95,9,89,112,70],function(e,t,n){"use strict";var i=n(1),r=n(64)(!1),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(21)(a)),"Array",{indexOf:function(e){return s?a.apply(this,arguments)||0:r(this,e,arguments[1])}})},function(e,t,n){var i=n(1);i(i.S,"Array",{isArray:n(96)})},function(e,t,n){"use strict";var i=n(1),r=n(16),a=[].join;i(i.P+i.F*(n(58)!=Object||!n(21)(a)),"Array",{join:function(e){return a.call(r(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var i=n(1),r=n(16),a=n(33),s=n(9),o=[].lastIndexOf,c=!!o&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(c||!n(21)(o)),"Array",{lastIndexOf:function(e){if(c)return o.apply(this,arguments)||0;var t=r(this),n=s(t.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,a(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}})},function(e,t,n){"use strict";var i=n(1),r=n(23)(1);i(i.P+i.F*!n(21)([].map,!0),"Array",{map:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(89);i(i.S+i.F*n(4)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)r(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var i=n(1),r=n(130);i(i.P+i.F*!n(21)([].reduceRight,!0),"Array",{reduceRight:function(e){return r(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var i=n(1),r=n(130);i(i.P+i.F*!n(21)([].reduce,!0),"Array",{reduce:function(e){return r(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var i=n(1),r=n(93),a=n(19),s=n(44),o=n(9),c=[].slice;i(i.P+i.F*n(4)(function(){r&&c.call(r)}),"Array",{slice:function(e,t){var n=o(this.length),i=a(this);if(t=void 0===t?n:t,"Array"==i)return c.call(this,e,t);for(var r=s(e,n),l=s(t,n),u=o(l-r),h=Array(u),f=0;f<u;f++)h[f]="String"==i?this.charAt(r+f):this[r+f];return h}})},function(e,t,n){"use strict";var i=n(1),r=n(23)(3);i(i.P+i.F*!n(21)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){"use strict";var i=n(1),r=n(12),a=n(10),s=n(4),o=[].sort,c=[1,2,3];i(i.P+i.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!n(21)(o)),"Array",{sort:function(e){return void 0===e?o.call(a(this)):o.call(a(this),r(e))}})},function(e,t,n){n(43)("Array")},function(e,t,n){var i=n(1);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=n(1),r=n(4),a=Date.prototype.getTime,s=function(e){return e>9?e:"0"+e};i(i.P+i.F*(r(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!r(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}})},function(e,t,n){"use strict";var i=n(1),r=n(10),a=n(25);i(i.P+i.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=r(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var i=n(6)("toPrimitive"),r=Date.prototype;i in r||n(13)(r,i,n(225))},function(e,t,n){var i=Date.prototype,r="Invalid Date",a="toString",s=i[a],o=i.getTime;new Date(NaN)+""!=r&&n(14)(i,a,function(){var e=o.call(this);return e===e?s.call(this):r})},function(e,t,n){var i=n(1);i(i.P,"Function",{bind:n(131)})},function(e,t,n){"use strict";var i=n(5),r=n(18),a=n(6)("hasInstance"),s=Function.prototype;a in s||n(8).f(s,a,{value:function(e){if("function"!=typeof this||!i(e))return!1;if(!i(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var i=n(8).f,r=n(32),a=n(11),s=Function.prototype,o=/^\s*function ([^ (]*)/,c="name",l=Object.isExtensible||function(){return!0};c in s||n(7)&&i(s,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(o)[1];return a(e,c)||!l(e)||i(e,c,r(5,t)),t}catch(n){return""}}})},function(e,t,n){var i=n(1),r=n(139),a=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:r(e-1+a(e-1)*a(e+1))}})},function(e,t,n){function i(e){return isFinite(e=+e)&&0!=e?e<0?-i(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=n(1),a=Math.asinh;r(r.S+r.F*!(a&&1/a(0)>0),"Math",{asinh:i})},function(e,t,n){var i=n(1),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var i=n(1),r=n(100);i(i.S,"Math",{cbrt:function(e){return r(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var i=n(1);i(i.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var i=n(1),r=Math.exp;i(i.S,"Math",{cosh:function(e){return(r(e=+e)+r(-e))/2}})},function(e,t,n){var i=n(1),r=n(99);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(e,t,n){var i=n(1),r=n(100),a=Math.pow,s=a(2,-52),o=a(2,-23),c=a(2,127)*(2-o),l=a(2,-126),u=function(e){return e+1/s-1/s};i(i.S,"Math",{fround:function(e){var t,n,i=Math.abs(e),a=r(e);return i<l?a*u(i/l/o)*l*o:(t=(1+o/s)*i,n=t-(t-i),n>c||n!=n?a*(1/0):a*n)}})},function(e,t,n){var i=n(1),r=Math.abs;i(i.S,"Math",{hypot:function(e,t){for(var n,i,a=0,s=0,o=arguments.length,c=0;s<o;)n=r(arguments[s++]),c<n?(i=c/n,a=a*i*i+1,c=n):n>0?(i=n/c,a+=i*i):a+=n;return c===1/0?1/0:c*Math.sqrt(a)}})},function(e,t,n){var i=n(1),r=Math.imul;i(i.S+i.F*n(4)(function(){return r(4294967295,5)!=-5||2!=r.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,a=n&i,s=n&r;return 0|a*s+((n&i>>>16)*s+a*(n&r>>>16)<<16>>>0)}})},function(e,t,n){var i=n(1);i(i.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var i=n(1);i(i.S,"Math",{log1p:n(139)})},function(e,t,n){var i=n(1);i(i.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var i=n(1);i(i.S,"Math",{sign:n(100)})},function(e,t,n){var i=n(1),r=n(99),a=Math.exp;i(i.S+i.F*n(4)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var i=n(1),r=n(99),a=Math.exp;i(i.S,"Math",{tanh:function(e){var t=r(e=+e),n=r(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var i=n(1);i(i.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){"use strict";var i=n(3),r=n(11),a=n(19),s=n(94),o=n(25),c=n(4),l=n(40).f,u=n(17).f,h=n(8).f,f=n(53).trim,d="Number",p=i[d],g=p,m=p.prototype,v=a(n(39)(m))==d,_="trim"in String.prototype,y=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=_?t.trim():f(t,3);var n,i,r,a=t.charCodeAt(0);if(43===a||45===a){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if(s=c.charCodeAt(l),s<48||s>r)return NaN;return parseInt(c,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?c(function(){m.valueOf.call(n)}):a(n)!=d)?s(new g(y(t)),n,p):y(t)};for(var b,w=n(7)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)r(g,b=w[x])&&!r(p,b)&&h(p,b,u(g,b));p.prototype=m,m.constructor=p,n(14)(i,d,p)}},function(e,t,n){var i=n(1);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var i=n(1),r=n(3).isFinite;i(i.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},function(e,t,n){var i=n(1);i(i.S,"Number",{isInteger:n(136)})},function(e,t,n){var i=n(1);i(i.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(1),r=n(136),a=Math.abs;i(i.S,"Number",{isSafeInteger:function(e){return r(e)&&a(e)<=9007199254740991}})},function(e,t,n){var i=n(1);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var i=n(1);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var i=n(1),r=n(146);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(e,t,n){var i=n(1),r=n(147);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(e,t,n){"use strict";var i=n(1),r=n(33),a=n(127),s=n(107),o=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h="0",f=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*l[n],l[n]=i%1e7,i=c(i/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=c(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+s.call(h,7-n.length)+n}return t},g=function(e,t,n){return 0===t?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)},m=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};i(i.P+i.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){o.call({})})),"Number",{toFixed:function(e){var t,n,i,o,c=a(this,u),l=r(e),v="",_=h;if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(t=m(c*g(2,69,1))-69,n=t<0?c*g(2,-t,1):c/g(2,t,1),n*=4503599627370496,t=52-t,t>0){for(f(0,n),i=l;i>=7;)f(1e7,0),i-=7;for(f(g(10,i,1),0),i=t-1;i>=23;)d(1<<23),i-=23;d(1<<i),f(1,1),d(2),_=p()}else f(0,n),f(1<<-t,0),_=p()+s.call(h,l);return l>0?(o=_.length,_=v+(o<=l?"0."+s.call(h,l-o)+_:_.slice(0,o-l)+"."+_.slice(o-l))):_=v+_,_}})},function(e,t,n){"use strict";var i=n(1),r=n(4),a=n(127),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,n){var i=n(1);i(i.S+i.F,"Object",{assign:n(140)})},function(e,t,n){var i=n(1);i(i.S,"Object",{create:n(39)})},function(e,t,n){var i=n(1);i(i.S+i.F*!n(7),"Object",{defineProperties:n(141)})},function(e,t,n){var i=n(1);i(i.S+i.F*!n(7),"Object",{defineProperty:n(8).f})},function(e,t,n){var i=n(5),r=n(31).onFreeze;n(24)("freeze",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(16),r=n(17).f;n(24)("getOwnPropertyDescriptor",function(){return function(e,t){return r(i(e),t)}})},function(e,t,n){n(24)("getOwnPropertyNames",function(){return n(142).f})},function(e,t,n){var i=n(10),r=n(18);n(24)("getPrototypeOf",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(5);n(24)("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},function(e,t,n){var i=n(5);n(24)("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(5);n(24)("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},function(e,t,n){var i=n(1);i(i.S,"Object",{is:n(148)})},function(e,t,n){var i=n(10),r=n(41);n(24)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(5),r=n(31).onFreeze;n(24)("preventExtensions",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(5),r=n(31).onFreeze;n(24)("seal",function(e){return function(t){return e&&i(t)?e(r(t)):t}})},function(e,t,n){var i=n(1);i(i.S,"Object",{setPrototypeOf:n(102).set})},function(e,t,n){"use strict";var i=n(57),r={};r[n(6)("toStringTag")]="z",r+""!="[object z]"&&n(14)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(e,t,n){var i=n(1),r=n(146);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(e,t,n){var i=n(1),r=n(147);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(e,t,n){"use strict";var i,r,a,s=n(38),o=n(3),c=n(27),l=n(57),u=n(1),h=n(5),f=n(12),d=n(37),p=n(50),g=n(104),m=n(109).set,v=n(101)(),_="Promise",y=o.TypeError,b=o.process,w=o[_],b=o.process,x="process"==l(b),E=function(){},S=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(E,E)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(i){}}(),C=function(e,t){return e===t||e===w&&t===a},P=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},k=function(e){return C(w,e)?new T(e):new r(e)},T=r=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=i}),this.resolve=f(t),this.reject=f(n)},I=function(e){try{e()}catch(t){return{error:t}}},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,r=1==e._s,a=0,s=function(t){var n,a,s=r?t.ok:t.fail,o=t.resolve,c=t.reject,l=t.domain;try{s?(r||(2==e._h&&O(e),e._h=1),s===!0?n=i:(l&&l.enter(),n=s(i),l&&l.exit()),n===t.promise?c(y("Promise-chain cycle")):(a=P(n))?a.call(n,o,c):o(n)):c(i)}catch(u){c(u)}};n.length>a;)s(n[a++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){m.call(o,function(){var t,n,i,r=e._v;if(A(e)&&(t=I(function(){x?b.emit("unhandledRejection",r,e):(n=o.onunhandledrejection)?n({promise:e,reason:r}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=x||A(e)?2:1),e._a=void 0,t)throw t.error})},A=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!A(t.promise))return!1;return!0},O=function(e){m.call(o,function(){var t;x?b.emit("rejectionHandled",e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})})},z=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=P(e))?v(function(){var i={_w:n,_d:!1};try{t.call(e,c(N,i,1),c(z,i,1))}catch(r){z.call(i,r)}}):(n._v=e,n._s=1,M(n,!1))}catch(i){z.call({_w:n,_d:!1},i)}}};S||(w=function(e){d(this,w,_,"_h"),f(e),i.call(this);try{e(c(N,this,1),c(z,this,1))}catch(t){z.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(42)(w.prototype,{then:function(e,t){var n=k(g(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),T=function(){var e=new i;this.promise=e,this.resolve=c(N,e,1),this.reject=c(z,e,1)}),u(u.G+u.W+u.F*!S,{Promise:w}),n(52)(w,_),n(43)(_),a=n(26)[_],u(u.S+u.F*!S,_,{reject:function(e){var t=k(this),n=t.reject;return n(e),t.promise}}),u(u.S+u.F*(s||!S),_,{resolve:function(e){if(e instanceof w&&C(e.constructor,this))return e;var t=k(this),n=t.resolve;return n(e),t.promise}}),u(u.S+u.F*!(S&&n(70)(function(e){w.all(e)["catch"](E)})),_,{all:function(e){var t=this,n=k(t),i=n.resolve,r=n.reject,a=I(function(){var n=[],a=0,s=1;p(e,!1,function(e){var o=a++,c=!1;n.push(void 0),s++,t.resolve(e).then(function(e){c||(c=!0,n[o]=e,--s||i(n))},r)}),--s||i(n)});return a&&r(a.error),n.promise},race:function(e){var t=this,n=k(t),i=n.reject,r=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},function(e,t,n){var i=n(1),r=n(12),a=n(2),s=(n(3).Reflect||{}).apply,o=Function.apply;i(i.S+i.F*!n(4)(function(){s(function(){})}),"Reflect",{apply:function(e,t,n){var i=r(e),c=a(n);return s?s(i,t,c):o.call(i,t,c)}})},function(e,t,n){var i=n(1),r=n(39),a=n(12),s=n(2),o=n(5),c=n(4),l=n(131),u=(n(3).Reflect||{}).construct,h=c(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),f=!c(function(){u(function(){})});i(i.S+i.F*(h||f),"Reflect",{construct:function(e,t){a(e),s(t);var n=arguments.length<3?e:a(arguments[2]);if(f&&!h)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var c=n.prototype,d=r(o(c)?c:Object.prototype),p=Function.apply.call(e,d,t);return o(p)?p:d}})},function(e,t,n){var i=n(8),r=n(1),a=n(2),s=n(25);r(r.S+r.F*n(4)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){a(e),t=s(t,!0),a(n);try{return i.f(e,t,n),!0}catch(r){return!1}}})},function(e,t,n){var i=n(1),r=n(17).f,a=n(2);i(i.S,"Reflect",{deleteProperty:function(e,t){var n=r(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var i=n(1),r=n(2),a=function(e){this._t=r(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(97)(a,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,n){var i=n(17),r=n(1),a=n(2);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return i.f(a(e),t)}})},function(e,t,n){var i=n(1),r=n(18),a=n(2);i(i.S,"Reflect",{getPrototypeOf:function(e){return r(a(e))}})},function(e,t,n){function i(e,t){var n,o,u=arguments.length<3?e:arguments[2];return l(e)===u?e[t]:(n=r.f(e,t))?s(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:c(o=a(e))?i(o,t,u):void 0}var r=n(17),a=n(18),s=n(11),o=n(1),c=n(5),l=n(2);o(o.S,"Reflect",{get:i})},function(e,t,n){var i=n(1);i(i.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var i=n(1),r=n(2),a=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(e){return r(e),!a||a(e)}})},function(e,t,n){var i=n(1);i(i.S,"Reflect",{ownKeys:n(145)})},function(e,t,n){var i=n(1),r=n(2),a=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(e){r(e);try{return a&&a(e),!0}catch(t){return!1}}})},function(e,t,n){var i=n(1),r=n(102);r&&i(i.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(n){return!1}}})},function(e,t,n){function i(e,t,n){var c,f,d=arguments.length<4?e:arguments[3],p=a.f(u(e),t);if(!p){if(h(f=s(e)))return i(f,t,n,d);p=l(0)}return o(p,"value")?!(p.writable===!1||!h(d))&&(c=a.f(d,t)||l(0),c.value=n,r.f(d,t,c),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var r=n(8),a=n(17),s=n(18),o=n(11),c=n(1),l=n(32),u=n(2),h=n(5);c(c.S,"Reflect",{set:i})},function(e,t,n){var i=n(3),r=n(94),a=n(8).f,s=n(40).f,o=n(69),c=n(67),l=i.RegExp,u=l,h=l.prototype,f=/a/g,d=/a/g,p=new l(f)!==f;if(n(7)&&(!p||n(4)(function(){return d[n(6)("match")]=!1,l(f)!=f||l(d)==d||"/a/i"!=l(f,"i")}))){l=function(e,t){var n=this instanceof l,i=o(e),a=void 0===t;return!n&&i&&e.constructor===l&&a?e:r(p?new u(i&&!a?e.source:e,t):u((i=e instanceof l)?e.source:e,i&&a?c.call(e):t),n?this:h,l)};for(var g=(function(e){e in l||a(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})}),m=s(u),v=0;m.length>v;)g(m[v++]);h.constructor=l,l.prototype=h,n(14)(i,"RegExp",l)}n(43)("RegExp")},function(e,t,n){n(66)("match",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(66)("replace",2,function(e,t,n){return[function(i,r){"use strict";var a=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,a,r):n.call(String(a),i,r)},n]})},function(e,t,n){n(66)("search",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},function(e,t,n){n(66)("split",2,function(e,t,i){"use strict";var r=n(69),a=i,s=[].push,o="split",c="length",l="lastIndex";if("c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[c]||2!="ab"[o](/(?:ab)*/)[c]||4!="."[o](/(.?)(.?)/)[c]||"."[o](/()()/)[c]>1||""[o](/.?/)[c]){var u=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);var i,o,h,f,d,p=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=void 0===t?4294967295:t>>>0,_=new RegExp(e.source,g+"g");for(u||(i=new RegExp("^"+_.source+"$(?!\\s)",g));(o=_.exec(n))&&(h=o.index+o[0][c],!(h>m&&(p.push(n.slice(m,o.index)),!u&&o[c]>1&&o[0].replace(i,function(){for(d=1;d<arguments[c]-2;d++)void 0===arguments[d]&&(o[d]=void 0)}),o[c]>1&&o.index<n[c]&&s.apply(p,o.slice(1)),f=o[0][c],m=h,p[c]>=v)));)_[l]===o.index&&_[l]++;return m===n[c]?!f&&_.test("")||p.push(""):p.push(n.slice(m)),p[c]>v?p.slice(0,v):p}}else"0"[o](void 0,0)[c]&&(i=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(n,r){var a=e(this),s=void 0==n?void 0:n[t];return void 0!==s?s.call(n,a,r):i.call(String(a),n,r)},i]})},function(e,t,n){"use strict";n(152);var i=n(2),r=n(67),a=n(7),s="toString",o=/./[s],c=function(e){n(14)(RegExp.prototype,s,e,!0)};n(4)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?c(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?r.call(e):void 0)}):o.name!=s&&c(function(){return o.call(this)})},function(e,t,n){"use strict";n(15)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(15)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(15)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(15)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";var i=n(1),r=n(105)(!1);i(i.P,"String",{codePointAt:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(1),r=n(9),a=n(106),s="endsWith",o=""[s];i(i.P+i.F*n(92)(s),"String",{endsWith:function(e){var t=a(this,e,s),n=arguments.length>1?arguments[1]:void 0,i=r(t.length),c=void 0===n?i:Math.min(r(n),i),l=String(e);return o?o.call(t,l,c):t.slice(c-l.length,c)===l}})},function(e,t,n){"use strict";n(15)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(15)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(15)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){var i=n(1),r=n(44),a=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,s=0;i>s;){if(t=+arguments[s++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var i=n(1),r=n(106),a="includes";i(i.P+i.F*n(92)(a),"String",{includes:function(e){return!!~r(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(15)("italics",function(e){return function(){return e(this,"i","","")}})},[454,105,98],function(e,t,n){"use strict";n(15)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){var i=n(1),r=n(16),a=n(9);i(i.S,"String",{raw:function(e){for(var t=r(e.raw),n=a(t.length),i=arguments.length,s=[],o=0;n>o;)s.push(String(t[o++])),o<i&&s.push(String(arguments[o]));return s.join("")}})},function(e,t,n){var i=n(1);i(i.P,"String",{repeat:n(107)})},function(e,t,n){"use strict";n(15)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";var i=n(1),r=n(9),a=n(106),s="startsWith",o=""[s];i(i.P+i.F*n(92)(s),"String",{startsWith:function(e){var t=a(this,e,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return o?o.call(t,i,n):t.slice(n,n+i.length)===i}})},function(e,t,n){"use strict";n(15)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(15)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(15)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){"use strict";n(53)("trim",function(e){return function(){return e(this,3)}})},[455,3,11,7,1,14,31,4,73,52,45,6,150,111,227,226,96,2,16,25,32,39,142,17,8,41,40,59,72,38,13],function(e,t,n){"use strict";var i=n(1),r=n(74),a=n(110),s=n(2),o=n(44),c=n(9),l=n(5),u=n(3).ArrayBuffer,h=n(104),f=a.ArrayBuffer,d=a.DataView,p=r.ABV&&u.isView,g=f.prototype.slice,m=r.VIEW,v="ArrayBuffer";i(i.G+i.W+i.F*(u!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,v,{isView:function(e){return p&&p(e)||l(e)&&m in e}}),i(i.P+i.U+i.F*n(4)(function(){return!new f(2).slice(1,void 0).byteLength}),v,{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(s(this),e);for(var n=s(this).byteLength,i=o(e,n),r=o(void 0===t?n:t,n),a=new(h(this,f))(c(r-i)),l=new d(this),u=new d(a),p=0;i<r;)u.setUint8(p++,l.getUint8(i++));return a}}),n(43)(v)},function(e,t,n){var i=n(1);i(i.G+i.W+i.F*!n(74).ABV,{DataView:n(110).DataView})},function(e,t,n){n(29)("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},function(e,t,n){n(29)("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},function(e,t,n){"use strict";var i=n(134);n(65)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},function(e,t,n){"use strict";var i=n(1),r=n(64)(!0);i(i.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(49)("includes")},function(e,t,n){var i=n(1),r=n(101)(),a=n(3).process,s="process"==n(19)(a);i(i.G,{asap:function(e){var t=s&&a.domain;r(t?t.bind(e):e)}})},function(e,t,n){var i=n(1),r=n(19);i(i.S,"Error",{isError:function(e){return"Error"===r(e)}})},function(e,t,n){var i=n(1);i(i.P+i.R,"Map",{toJSON:n(133)("Map")})},function(e,t,n){var i=n(1);i(i.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,a=t>>>0,s=n>>>0;return a+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},function(e,t,n){var i=n(1);i(i.S,"Math",{imulh:function(e,t){var n=65535,i=+e,r=+t,a=i&n,s=r&n,o=i>>16,c=r>>16,l=(o*s>>>0)+(a*s>>>16);return o*c+(l>>16)+((a*c>>>0)+(l&n)>>16)}})},function(e,t,n){var i=n(1);i(i.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,a=t>>>0,s=n>>>0;return a-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},function(e,t,n){var i=n(1);i(i.S,"Math",{umulh:function(e,t){var n=65535,i=+e,r=+t,a=i&n,s=r&n,o=i>>>16,c=r>>>16,l=(o*s>>>0)+(a*s>>>16);return o*c+(l>>>16)+((a*c>>>0)+(l&n)>>>16)}})},function(e,t,n){"use strict";var i=n(1),r=n(10),a=n(12),s=n(8);n(7)&&i(i.P+n(71),"Object",{__defineGetter__:function(e,t){s.f(r(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var i=n(1),r=n(10),a=n(12),s=n(8);n(7)&&i(i.P+n(71),"Object",{__defineSetter__:function(e,t){s.f(r(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var i=n(1),r=n(144)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){var i=n(1),r=n(145),a=n(16),s=n(17),o=n(89);i(i.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=a(e),i=s.f,c=r(n),l={},u=0;c.length>u;)o(l,t=c[u++],i(n,t));return l}})},function(e,t,n){"use strict";var i=n(1),r=n(10),a=n(25),s=n(18),o=n(17).f;n(7)&&i(i.P+n(71),"Object",{__lookupGetter__:function(e){var t,n=r(this),i=a(e,!0);do if(t=o(n,i))return t.get;while(n=s(n))}})},function(e,t,n){"use strict";var i=n(1),r=n(10),a=n(25),s=n(18),o=n(17).f;n(7)&&i(i.P+n(71),"Object",{__lookupSetter__:function(e){var t,n=r(this),i=a(e,!0);do if(t=o(n,i))return t.set;while(n=s(n))}})},function(e,t,n){var i=n(1),r=n(144)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){"use strict";var i=n(1),r=n(3),a=n(26),s=n(101)(),o=n(6)("observable"),c=n(12),l=n(2),u=n(37),h=n(42),f=n(13),d=n(50),p=d.RETURN,g=function(e){return null==e?void 0:c(e)},m=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},_=function(e){v(e)||(e._o=void 0,m(e))},y=function(e,t){l(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:c(n),this._c=n)}catch(r){return void e.error(r)}v(this)&&m(this)};y.prototype=h({},{unsubscribe:function(){_(this)}});var b=function(e){this._s=e};b.prototype=h({},{next:function(e){var t=this._s;if(!v(t)){var n=t._o;try{var i=g(n.next);if(i)return i.call(n,e)}catch(r){try{_(t)}finally{throw r}}}},error:function(e){var t=this._s;if(v(t))throw e;var n=t._o;t._o=void 0;try{var i=g(n.error);if(!i)throw e;e=i.call(n,e)}catch(r){try{m(t)}finally{throw r}}return m(t),e},complete:function(e){var t=this._s;if(!v(t)){var n=t._o;t._o=void 0;try{var i=g(n.complete);e=i?i.call(n,e):void 0}catch(r){try{m(t)}finally{throw r}}return m(t),e}}});var w=function(e){u(this,w,"Observable","_f")._f=c(e)};h(w.prototype,{subscribe:function(e){return new y(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||r.Promise)(function(n,i){c(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(n){
i(n),r.unsubscribe()}},error:i,complete:n})})}}),h(w,{from:function(e){var t="function"==typeof this?this:w,n=g(l(e)[o]);if(n){var i=l(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return s(function(){if(!n){try{if(d(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(i){if(n)throw i;return void t.error(i)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return s(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),f(w.prototype,o,function(){return this}),i(i.G,{Observable:w}),n(43)("Observable")},function(e,t,n){var i=n(28),r=n(2),a=i.key,s=i.set;i.exp({defineMetadata:function(e,t,n,i){s(e,t,r(n),a(i))}})},function(e,t,n){var i=n(28),r=n(2),a=i.key,s=i.map,o=i.store;i.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),i=s(r(t),n,!1);if(void 0===i||!i["delete"](e))return!1;if(i.size)return!0;var c=o.get(t);return c["delete"](n),!!c.size||o["delete"](t)}})},function(e,t,n){var i=n(153),r=n(129),a=n(28),s=n(2),o=n(18),c=a.keys,l=a.key,u=function(e,t){var n=c(e,t),a=o(e);if(null===a)return n;var s=u(a,t);return s.length?n.length?r(new i(n.concat(s))):s:n};a.exp({getMetadataKeys:function(e){return u(s(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,n){var i=n(28),r=n(2),a=n(18),s=i.has,o=i.get,c=i.key,l=function(e,t,n){var i=s(e,t,n);if(i)return o(e,t,n);var r=a(t);return null!==r?l(e,r,n):void 0};i.exp({getMetadata:function(e,t){return l(e,r(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){var i=n(28),r=n(2),a=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return a(r(e),arguments.length<2?void 0:s(arguments[1]))}})},function(e,t,n){var i=n(28),r=n(2),a=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return a(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(28),r=n(2),a=n(18),s=i.has,o=i.key,c=function(e,t,n){var i=s(e,t,n);if(i)return!0;var r=a(t);return null!==r&&c(e,r,n)};i.exp({hasMetadata:function(e,t){return c(e,r(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,n){var i=n(28),r=n(2),a=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return a(e,r(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var i=n(28),r=n(2),a=n(12),s=i.key,o=i.set;i.exp({metadata:function(e,t){return function(n,i){o(e,t,(void 0!==i?r:a)(n),s(i))}}})},function(e,t,n){var i=n(1);i(i.P+i.R,"Set",{toJSON:n(133)("Set")})},function(e,t,n){"use strict";var i=n(1),r=n(105)(!0);i(i.P,"String",{at:function(e){return r(this,e)}})},function(e,t,n){"use strict";var i=n(1),r=n(20),a=n(9),s=n(69),o=n(67),c=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};n(97)(l,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),i(i.P,"String",{matchAll:function(e){if(r(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):o.call(e),i=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=a(e.lastIndex),new l(i,t)}})},function(e,t,n){"use strict";var i=n(1),r=n(149);i(i.P,"String",{padEnd:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";var i=n(1),r=n(149);i(i.P,"String",{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";n(53)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(53)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},[456,111],[457,111],function(e,t,n){var i=n(1);i(i.S,"System",{global:n(3)})},function(e,t,n){for(var i=n(113),r=n(14),a=n(3),s=n(13),o=n(51),c=n(6),l=c("iterator"),u=c("toStringTag"),h=o.Array,f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,g=f[d],m=a[g],v=m&&m.prototype;if(v){v[l]||s(v,l,h),v[u]||s(v,u,g),o[g]=h;for(p in i)v[p]||r(v,p,i[p],!0)}}},function(e,t,n){var i=n(1),r=n(109);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(e,t,n){var i=n(3),r=n(1),a=n(68),s=n(228),o=i.navigator,c=!!o&&/MSIE .\./.test(o.userAgent),l=function(e){return c?function(t,n){return e(a(s,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};r(r.G+r.B+r.F*c,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(e,t,n){n(351),n(290),n(292),n(291),n(294),n(296),n(301),n(295),n(293),n(303),n(302),n(298),n(299),n(297),n(289),n(300),n(304),n(305),n(257),n(259),n(258),n(307),n(306),n(277),n(287),n(288),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(338),n(343),n(350),n(341),n(333),n(334),n(339),n(344),n(346),n(329),n(330),n(331),n(332),n(335),n(336),n(337),n(340),n(342),n(345),n(347),n(348),n(349),n(252),n(254),n(253),n(256),n(255),n(241),n(239),n(245),n(242),n(248),n(250),n(238),n(244),n(235),n(249),n(233),n(247),n(246),n(240),n(243),n(232),n(234),n(237),n(236),n(251),n(113),n(323),n(328),n(152),n(324),n(325),n(326),n(327),n(308),n(151),n(153),n(154),n(363),n(352),n(353),n(358),n(361),n(362),n(356),n(359),n(357),n(360),n(354),n(355),n(309),n(310),n(311),n(312),n(313),n(316),n(314),n(315),n(317),n(318),n(319),n(320),n(322),n(321),n(364),n(390),n(393),n(392),n(394),n(395),n(391),n(396),n(397),n(375),n(378),n(374),n(372),n(373),n(376),n(377),n(367),n(389),n(398),n(366),n(368),n(370),n(369),n(371),n(380),n(381),n(383),n(382),n(385),n(384),n(386),n(387),n(388),n(365),n(379),n(401),n(400),n(399),e.exports=n(26)},function(e,t){e.exports={actors:{1:{graphic:"1"}},tilesets:{1:{propreties:[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[5,0],[5,0],[5],[5],[5],[],[],[],[null,15],[null,15],[null,15],[null,15],[null,15],[],[5],[5],[null,15],[0],[null,15],[5],[5],[],[null,15],[null,15],[null,15],[5],[null,15],[null,15],[null,15],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[],[],[5],[5],[5],[5],[],[],[],[],[null,15],[],[],[null,15],[],[],[],[],[null,15],[],[],[null,15],[],[],[5],[5],[5],[5],[5],[null,15],[],[null,15],[5],[5],[null,15],[null,15],[null,15],[null,15],[],[null,15],[null,15],[null,15],[],[],[],[null,15],[],[],[null,15],[null,15],[],[],[],[],[],[],[null,15],[null,15],[5],[5,0],[5,0],[5,0],[5,0],[5],[5],[5],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,0],[null,0],[null,15],[null,15],[null,15],[null,15],[],[],[],[],[],[],[null,15],[5],[],[],[],[],[],[],[null,15],[null,15],[],[],[],[],[5],[5],[5],[5],[],[],[],[],[5],[5],[5],[5],[5],[5],[null,15],[null,15],[5],[5],[5],[5],[null,15],[null,15],[],[],[],[null,15],[null,15],[],[5],[5],[null,15],[null,15],[null,15],[null,15],[],[],[null,15],[null,15],[],[],[null,15],[null,15],[null,15],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[5],[5],[5],[5],[0],[],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[5,0],[5,0],[5,0],[5,0],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[null,15],[],[],[],[],[],[],[5],[5,0],[],[],[],[],[],[],[null,15],[null,15],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[null,15],[null,15],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],graphic:"1"}},autotiles:{1:{propreties:[[0,0],[0,15]],autotiles:["2","3"]}},common_events:{1:{commands:['SHOW_TEXT: {"text": "A common event"}']}},animations:{1:{graphic:"1",frequence:"2",pattern_w:"5",pattern_h:"3",frames:[[{pattern:1,x:-96,y:-96,zoom:50,rotation:0,opacity:100}],[{pattern:2,x:-96,y:-96,zoom:80,rotation:0,opacity:150}],[{pattern:3,x:-96,y:-96,zoom:100,rotation:0,opacity:255}],[{pattern:1,x:-96,y:-96,zoom:100,rotation:0,opacity:255}],[{pattern:2,x:-96,y:-96,zoom:100,rotation:0,opacity:255}],[{pattern:3,x:-96,y:-96,zoom:100,rotation:0,opacity:255}],[{pattern:1,x:-96,y:-96,zoom:100,rotation:0,opacity:255}],[{pattern:2,x:-96,y:-96,zoom:120,rotation:0,opacity:200}],[{pattern:3,x:-96,y:-96,zoom:140,rotation:0,opacity:180}],[{pattern:1,x:-96,y:-96,zoom:160,rotation:0,opacity:150}],[{pattern:2,x:-96,y:-96,zoom:180,rotation:0,opacity:120}],[{pattern:3,x:-96,y:-96,zoom:200,rotation:0,opacity:100}]]}},map_infos:{1:{tileset_id:"1",autotiles_id:"1"}}}},function(e,t){e.exports={characters:{1:"1.png",2:"2.png",3:"3.png"},tilesets:{1:"tileset.png"},autotiles:{2:"autotile1.png",3:"autotile2.png"},animations:{1:"anim.png"},windowskins:{1:"window.png"}}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):m=-1,p.length&&o())}function o(){if(!g){var e=r(s);g=!0;for(var t=p.length;t;){for(d=p,p=[];++m<t;)d&&d[m].run();m=-1,t=p.length}d=null,g=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var d,p=[],g=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||r(o)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){e.exports='/*!\n * Canvas Engine JavaScript Library 1.3.2\n * http:/canvasengine.net\n *\n * Copyright 2012, WebCreative5, Samuel Ronce\n * Licensed under the MIT.\n *\n * Date: September 14, 2012\n * Update : Mon Dec 30 12:00:44 2013\n */\nvar fs;function Kernel(b,a){this.class_method=b;this.class_name=a}Kernel._extend=function(a,b,g){var f;if(!(b instanceof Array)){b=[b]}for(var e=0;e<b.length;e++){g=g===undefined?true:g;f=b[e];if(typeof f=="string"){if(Class.__class_config[f]){f=Class.__class_config[f].methods}else{return a}}if(g){f=CanvasEngine.clone(f)}for(var d in f){a[d]=f[d]}}return a};Kernel.prototype={New:function(){return this["new"].apply(this,arguments)},"new":function(){this._class=new Class();Class.__class[this.class_name]=this._class;this._construct();return this._class},_construct:function(){this._class.extend(this.class_method)},_attr_accessor:function(d,a,f){var b=this;for(var e=0;e<d.length;e++){this.class_method["_"+d[e]]=null;this.class_method[d[e]]={};if(a){this.class_method[d[e]].set=function(g){b.class_method["_"+d[e]]=g}}if(f){this.class_method[d[e]].get=function(){return b.class_method["_"+d[e]]}}}return this},attr_accessor:function(a){return this._attr_accessor(a,true,true)},attr_reader:function(a){return this._attr_accessor(a,true,false)},attr_writer:function(a){return this._attr_accessor(a,false,true)},extend:function(a,b){Kernel._extend(this.class_method,a,b);return this},addIn:function(a){if(!Class.__class[a]){return this}Class.__class[a][this.name]=this;return this}};function Class(){this.name=null}Class.__class={};Class.__class_config={};Class.get=function(a){return Class.__class[a]};Class.create=function(e,d,h){var g,b,a;Class.__class_config[e]={};Class.__class[e]={};if(h){g=window[e];tmp_class=new Class();for(var f in tmp_class){g[f]=tmp_class[f]}for(var f in d){g[f]=d[f]}b=g}else{Class.__class_config[e].methods=d;var i=Class.__class_config[e].kernel=new Kernel(Class.__class_config[e].methods,e)}return i};Class.New=function(){return Class["new"].apply(this,arguments)};Class["new"]=function(d,e,a){var b;if(typeof e=="boolean"){a=e;e=[]}if(a==undefined){a=true}e=e||[];if(!Class.__class_config[d]){throw d+\' class does not exist. Use method "create" for build the structure of this class\'}b=Class.__class_config[d].kernel["new"]();if(a&&b.initialize){b.initialize.apply(b,e)}b.__name__=d;return b};Class.prototype={extend:function(a,b){return Kernel._extend(this,a,b)}};var CanvasEngine={};CanvasEngine.uniqid=function(){return Math.random()};CanvasEngine.arraySplice=function(b,d){var a;for(a=0;a<d.length;++a){if(b==d[a]){d.splice(a,1);return}}};CanvasEngine.ajax=function(a){a=CanvasEngine.extend({url:"./",type:"GET",statusCode:{}},a);a.data=a.data?JSON.stringify(a.data):null;if(fs){fs.readFile("./"+a.url,"ascii",function(i,e){if(i){throw i}e=e.toString("ascii");if(a.dataType=="json"){e=CanvasEngine.parseJSON(e)}a.success(e)});return}var h;try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){try{h=new XMLHttpRequest()}catch(b){h=false}}}function g(){var e;if(a.success){e=h.responseText;if(a.dataType=="json"){e=CanvasEngine.parseJSON(e)}else{if(a.dataType=="xml"){e=h.responseXML}}a.success(e)}}h.onreadystatechange=function(){if(h.readyState==4){if(a.statusCode&&a.statusCode[h.status]){a.statusCode[h.status]()}if(h.status==200){g()}else{if(a.error){a.error(h)}}}};h.open(a.type,a.url,true);if(a.mimeType){h.overrideMimeType(a.mimeType)}h.send(a.data)};CanvasEngine.getJSON=function(a,b,d){if(typeof b=="function"){d=b;b=null}CanvasEngine.ajax({url:a,dataType:"json",data:b,success:d})};CanvasEngine.parseJSON=function(a){return JSON.parse(a)};CanvasEngine.each=function(e,d){var b,a;if(!(e instanceof Array)&&!(typeof e=="number")){for(b in e){d.call(e,b,e[b])}return}if(e instanceof Array){a=e.length}else{if(typeof e=="number"){a=e;e=[]}}for(b=0;b<a;++b){d.call(e,b,e[b])}};CanvasEngine.inArray=function(b,d){var a;for(a=0;a<d.length;++a){if(b==d[a]){return a}}return -1};CanvasEngine.clone=function(a){var d;if(typeof(a)!="object"||a==null){return a}var b=a.constructor();if(b===undefined){return a}for(d in a){b[d]=CanvasEngine.clone(a[d])}return b};CanvasEngine.hexaToRGB=function(h){var f,e,a;function d(b){return(b.charAt(0)=="#")?b.substring(1,7):b}f=parseInt((d(h)).substring(0,2),16);e=parseInt((d(h)).substring(2,4),16);a=parseInt((d(h)).substring(4,6),16);return[f,e,a]};CanvasEngine.rgbToHex=function(e,d,a){return((1<<24)+(e<<16)+(d<<8)+a).toString(16).slice(1)};CanvasEngine._getRandomColorKey=function(){var e=Math.round(Math.random()*255),d=Math.round(Math.random()*255),a=Math.round(Math.random()*255);return CanvasEngine.rgbToHex(e,d,a)};CanvasEngine.random=function(b,a){return Math.floor((Math.random()*a)+b)};CanvasEngine.mobileUserAgent=function(){var a=navigator.userAgent;if(a.match(/(iPhone)/)){return"iphone"}else{if(a.match(/(iPod)/)){return"ipod"}else{if(a.match(/(iPad)/)){return"ipad"}else{if(a.match(/(BlackBerry)/)){return"blackberry"}else{if(a.match(/(Android)/)){return"android"}else{if(a.match(/(Windows Phone)/)){return"windows phone"}else{return false}}}}}}};CanvasEngine._benchmark={};CanvasEngine._interval_benchmark=60;CanvasEngine._freq_benchmark={};CanvasEngine.microtime=function(){var a=new Date().getTime()/1000;var b=parseInt(a,10);return a*1000};CanvasEngine.benchmark=function(b){var a=this.microtime();if(this._benchmark[b]){console.log("Performance "+b+" : "+(a-this._benchmark[b])+"ms")}this._benchmark[b]=a};CanvasEngine.objectSize=function(d){var b=0,a;for(a in d){if(d.hasOwnProperty(a)){b++}}return b};CanvasEngine.extend=function(b,a,d){if(!b){b={}}if(!a){a={}}return Kernel._extend(b,a,d)};if(typeof exports=="undefined"){var _ua=navigator.userAgent.toLowerCase(),_version=/(chrome|firefox|msie|version)(\\/| )([0-9.]+)/.exec(_ua);CanvasEngine.browser={mozilla:/mozilla/.test(_ua)&&!/webkit/.test(_ua),webkit:/webkit/.test(_ua),opera:/opera/.test(_ua),msie:/msie/.test(_ua),version:_version?_version[3]:null,which:function(){var a;CanvasEngine.each(["mozilla","webkit","opera","msie"],function(d,b){if(CanvasEngine.browser[b]){a=b}});return{ua:a,version:CanvasEngine.browser.version}}}}CanvasEngine.moveArray=function(f,e,d){var b,a;e=parseInt(e,10);d=parseInt(d,10);if(e!==d&&0<=e&&e<=f.length&&0<=d&&d<=f.length){a=f[e];if(e<d){for(b=e;b<d;b++){f[b]=f[b+1]}}else{for(b=e;b>d;b--){f[b]=f[b-1]}}f[d]=a}return f};CanvasEngine.toTimer=function(e){var a=""+Math.floor(e/60/60),b=""+Math.floor(e/60%60),d=""+Math.floor(e%60);if(a.length==1){a="0"+a}if(b.length==1){b="0"+b}if(d.length==1){d="0"+d}return{hour:a,min:b,sec:d}};CanvasEngine.algo={pascalTriangle:function(a){a=a||10;var f=[[1,1],[1,2,1]],b=a-f.length;for(var e=f.length;e<=b;e++){f[e]=[1];for(var d=1;d<=e;d++){f[e][d]=f[e-1][d]+f[e-1][d-1]}f[e][e+1]=1}return f},};CanvasEngine.toMatrix=function(h,g,a){var d=[],b=0;for(var e=0;e<a;e++){for(var f=0;f<g;f++){if(!d[f]){d[f]=[]}d[f][e]=h[b];b++}}return d};CanvasEngine.rotateMatrix=function(g,e){var a=[],f=[];e=e||"90";if(e=="90"||e=="-90"){for(var b=0;b<g[0].length;b++){a[b]=[];for(var d=0;d<g.length;d++){a[b][d]=g[d][b]}}}if(e=="-90"){var b=0;for(var d=a.length-1;d>=0;d--){f[b]=a[d];b++}return f}if(e=="180"){for(var d=0;d<g.length;d++){a[d]=g[d].reverse()}}return a};var _CanvasEngine=CanvasEngine;if(typeof(exports)!=="undefined"){exports.Class=Class;exports.CanvasEngine=CanvasEngine}(function(){var b=0;var d=["ms","moz","webkit","o"];for(var a=0;a<d.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[d[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[d[a]+"CancelAnimationFrame"]||window[d[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(i,f){var e=new Date().getTime();var g=Math.max(0,16-(e-b));var h=window.setTimeout(function(){i(e+g)},g);b=e+g;return h}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){clearTimeout(e)}}}());if(typeof Element!="undefined"){var prop,vendors=["ms","moz","webkit","o","khtml"];for(var x=0;x<vendors.length&&!Element.prototype.requestFullScreen;++x){Element.prototype.requestFullScreen=Element.prototype[vendors[x]+"RequestFullScreen"];document.cancelFullScreen=document[vendors[x]+"CancelFullScreen"]}}Class.create("ModelClientClass",{create:function(b,d,a){if(!(d instanceof Array)){a=d;d=false}a.events=d;Class.create(b,a)},"new":function(b){var a=Class["new"](b).extend({_methods:{},emit:function(f,i,k){if(!i){i=[]}if(typeof i=="function"){k=i}if(k){this.on(f,k)}if(this[f]){if(!(i instanceof Array)){var h=[];for(var g in i){h.push(i[g])}i=h}var e=this[f].apply(this,i);this.call(f,e)}},on:function(e,f){if(!this._methods[e]){this._methods[e]={}}this._methods[e].callback=f},call:function(e,f){if(this._methods[e]){this._methods[e].callback(f)}}});if(this.events){for(var d in this.events){obj=a[events[d]];if(obj){obj.on(this.events[d],function(e){if(!e){e={}}obj.call(a,e)})}}}return a}});var Model=Class["new"]("ModelClientClass"),Global_CE;CanvasEngine.io=null;CanvasEngine.socketIO=function(){if(typeof(io)=="undefined"){throw"Please add socket.io - http://socket.io"}return io};CanvasEngine.User={autoAuthentication:function(g,h){CanvasEngine.socketIO();if(typeof g!="string"){h=g;g="canvasengine"}var d=new RegExp(g+"=({.*?})","i"),a=document.cookie.match(d),b;if(a&&a[1]){try{b=JSON.parse(a[1]);CanvasEngine.io.emit("_autoAuthentication",{session:b.session_id});CanvasEngine.io.on("_autoAuthentication",function(e){if(e.ret=="success"&&h.success){h.success()}else{if(e.ret=="failed"&&h.failed){h.failed(e.err)}}})}catch(f){console.warn("Error session format in cookie ; ",f.stack)}}},_setCookie:function(e,f){var b=f==undefined;e=e||"canvasengine";var d=new Date();d.setTime(d.getTime()+((b?-1:2)*24*60*60*1000));var a="; expires="+d.toGMTString();document.cookie=e+"="+(b?"":JSON.stringify(f))+a+"; path=/"},authentication:function(e,b,d){var a=this;CanvasEngine.socketIO();CanvasEngine.io.emit("_authentication",{username:e,password:b});CanvasEngine.io.on("_authentication",function(f){if(f.ret=="success"&&d.success){a._setCookie(d.cookie_name,{session_id:f.session_id});d.success()}else{if(f.ret=="failed"&&d.failed){d.failed(f.err)}}})},register:function(d,a,b){CanvasEngine.socketIO();CanvasEngine.io.emit("_register",{username:d,password:a,data:b.data});CanvasEngine.io.on("_register",function(e){if(e.ret=="success"&&b.success){b.success()}else{if(e.ret=="failed"&&b.failed){b.failed(e.err)}}})},logout:function(b){b=b||{};var a=this;CanvasEngine.socketIO();CanvasEngine.io.emit("_logout");this._setCookie(b.cookie_name)},isLogged:function(){}};CanvasEngine.connectServer=function(b,a){CanvasEngine.socketIO();CanvasEngine.io=io.connect(b+":"+a)};CanvasEngine.defines=function(a,d){d=d||{};if(d.render===undefined){d.render=true}if(typeof a=="string"){a=[a]}var b;Class.create("CanvasEngineClass",{_noConflict:false,initialize:function(e){this.canvas=a;this.el_canvas=[]},ready:function(g){var e=this;b.Sound._manager=typeof(soundManager)!=="undefined";if(b.Sound._manager){soundManager.setup(_CanvasEngine.extend({url:d.swf_sound?d.swf_sound:"swf/",onready:f},d.soundmanager))}else{if(!g){f()}else{setTimeout(f,1)}}function f(){for(var h=0;h<e.canvas.length;h++){e.el_canvas.push(e.Canvas["new"](e.canvas[h]))}if(d.render){b.Scene._loop(e.el_canvas)}if(g){g()}}return this},plugins:function(){},mouseover:false,noConflict:function(){this._noConflict=true},Materials:{images:{},_buffer:{},_cache_canvas:{},sounds:{},videos:{},fonts:{},data:{},get:function(f,e){if(e){return this[e+"s"][f]}if(_m=this.images[f]||this.sounds[f]||this.videos[f]||this.data[f]){return _m}else{if(f instanceof Image||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement||f instanceof HTMLAudioElement){return f}}if(d.ignoreLoadError){return false}throw\'Cannot to get the data "\'+f+\'" because it does not exist\'},imageToCanvas:function(m,l){l=l||{};if(this._cache_canvas[m]&&l.cache){return this._cache_canvas[m]}var g=this.get(m),i,f;if(!g){return}var e=l.width||g.width,k=l.height||g.height,i=document.createElement("canvas");i.width=e;i.height=k;f=i.getContext("2d");f.drawImage(g,0,0,g.width,g.height,0,0,e,k);this._cache_canvas[m]={canvas:i,ctx:f};return this._cache_canvas[m]},createBuffer:function(e){var g="_opaque_"+e;var f=this.get(e,"video")||e instanceof HTMLVideoElement;if(f){return f}if(!this._buffer[g]){this._buffer[g]=this.opaqueImage(e)}return this._buffer[g]},transparentColor:function(g,o,f){var e,q,t,r=this.imageToCanvas(g,{cache:f}),h=r.canvas,v=r.ctx;e=v.getImageData(0,0,h.width,h.height);q=e.data;t=_CanvasEngine.hexaToRGB(o);for(var p=0,k=q.length;p<k;p+=4){var l=q[p];var m=q[p+1];var u=q[p+2];if(l==t[0]&&m==t[1]&&u==t[2]){q[p+3]=0}}v.putImageData(e,0,0);return h},invertColor:function(n,f){var m,l,k=this.imageToCanvas(n),g=k.canvas,e=k.ctx;m=e.getImageData(0,0,g.width,g.height);l=m.data;for(var h=0;h<l.length;h+=4){l[h]=255-l[h];l[h+1]=255-l[h+1];l[h+2]=255-l[h+2]}e.putImageData(m,0,0);return g},cropImage:function(f,o,n,p,k){var e,i,m,l=this.imageToCanvas(f);if(!l){return}var g=l.canvas,q=l.ctx;e=q.getImageData(o,n,p,k);g.width=p;g.height=k;q.putImageData(e,0,0);return g},opaqueImage:function(k){var h=this.imageToCanvas(k),f=h.canvas,e=h.ctx;imageData=e.getImageData(0,0,f.width,f.height);data=imageData.data;for(var g=0;g<data.length;g+=4){if(data[g+3]>0){data[g+3]=255}}e.putImageData(imageData,0,0);return f},getExtension:function(e){return(/[.]/.exec(e))?/[^.]+$/.exec(e)[0]:undefined},getBasePath:function(g,e){var f=g.substring(0,g.lastIndexOf("/"));return f!=""&&e?f+"/":f},getFilename:function(g,e){var f=g.replace(/^.*[\\\\\\/]/,"");if(!e){f=f.split(".")}else{return f}return f.slice(0,f.length-1).join(".")},Transition:{_data:{},set:function(n,l){var m,h,e=[];if(this._data[n]){return this._data[n]}if(!(n instanceof Array)){var k=b.Materials.imageToCanvas(n,{width:1024,height:768});if(typeof Uint8ClampedArray!="undefined"){e=new Uint8ClampedArray(k.canvas.width*k.canvas.height)}m=k.ctx.getImageData(0,0,k.canvas.width,k.canvas.height);h=m.data;var f=0;for(var g=0;g<h.length;g+=4){e[f]=h[g];f++}}else{e=l}this._data[n]=e;return e},get:function(e){return this._data[e]}},load:function(o,y,q,n){var h=0,e,v=this,u=[],w;if(!(y instanceof Array)){y=[y]}for(var g=0;g<y.length;g++){e=y[g];if(e.id){u.push(e)}else{for(var t in e){w={};w=_CanvasEngine.extend({},e[t]);if(typeof e[t]=="string"){w.path=e[t]}if(w.id){w._id=w.id}w.id=t;u.push(w);if(w.index!=undefined){_CanvasEngine.moveArray(u,u.length-1,w.index)}}}}switch(o){case"images":r();break;case"sounds":k();break;case"fonts":f();break;case"videos":m();break;case"data":l();break}function r(){var i;if(u[h]){i=new Image();i.onload=function(){var p;if(u[h].transparentcolor){p=v.transparentColor(i,u[h].transparentcolor)}if(u[h].invertcolor){p=v.invertColor(i)}else{p=i}v.images[u[h].id]=p;if(u[h].transition){v.Transition.set(u[h].id)}if(q){q.call(v,p,u[h])}h++;r()};i.onerror=function(p){if(d.ignoreLoadError){if(q){q.call(v,p)}h++;r()}};i.src=u[h].path}else{if(n){n.call(v)}}}function k(){var C;function D(){if(q){q.call(v,this,u[h])}h++;k()}if(u[h]){if(v.sounds[u[h].id]){D()}else{if(b.Sound._manager){v.sounds[u[h].id]=soundManager.createSound({id:u[h].id,url:u[h].path,autoLoad:true,autoPlay:false,onload:D,onfinish:function(){if(this._loop){this.play()}}})}else{var B=new Audio(),p=u[h].path,z=v.getBasePath(p),i=v.getFilename(p),A=v.getExtension(p);var F={mp3:B.canPlayType("audio/mpeg"),ogg:B.canPlayType(\'audio/ogg; codecs="vorbis"\'),m4a:B.canPlayType(\'audio/mp4; codecs="mp4a.40.2"\')};if(!F[A]){for(var E in F){if(A==E){continue}if(F[E]){p=z+"/"+i+"."+E;break}}}B.setAttribute("src",p);B.addEventListener("canplaythrough",function(){v.sounds[u[h].id]=this;D()},false);B.addEventListener("ended",function(){if(!this._loop){return}this.currentTime=0;this.play()},false);B.addEventListener("error",function(G){if(d.ignoreLoadError){D()}},false);B.load();B.pause();document.body.appendChild(B);if(/^i/.test(_CanvasEngine.mobileUserAgent())){v.sounds[u[h].id]=B;D()}}}}else{if(n){n.call(v)}}}function f(){var i=u[h];if(i){if(i.id=="google"||i.id=="ascender"||i.id=="typekit"||i.id=="monotype"||i.id=="fontdeck"){var B={};B[i.id]=i;if(i._id){B[i.id].id=i._id}if(typeof WebFontConfig=="undefined"){WebFontConfig={}}WebFontConfig=_CanvasEngine.extend(WebFontConfig,B)}else{var z=document.createElement("style");var A=v.getBasePath(i.path,true)+v.getFilename(i.path)+"."+(_CanvasEngine.browser.msie?"eot":"ttf");z.innerHTML="@font-face { font-family: \'"+i.id+"\'; src: url(\'"+A+"\'); font-weight: normal; font-style: normal;}";document.getElementsByTagName("head")[0].appendChild(z)}h++;if(q){q.call(v,this,u[h])}f()}else{if(!document.getElementById("google-webfont")){var p=document.createElement("script");p.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";p.type="text/javascript";p.async="true";p.id="google-webfont";var z=document.getElementsByTagName("script")[0];z.parentNode.insertBefore(p,z)}if(n){n.call(v)}}}function m(){function A(){if(q){q.call(v,this,u[h])}h++;m()}if(u[h]){var z=document.createElement("video");if(u[h].webcam){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;function i(B){window.stream=B;if(window.URL){z.src=window.URL.createObjectURL(B)}else{z.src=B}v.videos[u[h].id]=z;A()}function p(B){throw"navigator.getUserMedia error: "+B}navigator.getUserMedia(u[h].webcam,i,p)}else{z.src=u[h].path;z.addEventListener("loadeddata",function(B){z.width=(B.srcElement||B.target).videoWidth;z.height=(B.srcElement||B.target).videoHeight;v.videos[u[h].id]=z;A()},false);z.onerror=function(B){if(d.ignoreLoadError){A()}else{throw"Video error #"+B.target.error.code+": See http://dev.w3.org/html5/spec-author-view/video.html#dom-mediaerror-media_err_aborted"}};z.load()}document.body.appendChild(z);z.setAttribute("style","display:none;")}else{if(n){n.call(v)}}}function l(){function i(){if(q){q.call(v,this,u[h])}h++;l()}if(u[h]){_CanvasEngine.ajax({url:u[h].path,dataType:"json",success:function(p){v.data[u[h].id]=p;i()},error:function(){if(d.ignoreLoadError){i()}}})}else{if(n){n.call(v)}}}}},Sound:{_fade:{},_manager:false,get:function(f){var e=b.Materials.get(f,"sound");return e},allStop:function(g){g=g||"";var e=b.Materials.sounds;for(var f in e){if(f!=g){this.stop(f)}}return this},stop:function(f){var e=this.get(f);if(d.soundmanager){e.stop()}else{e.currentTime=0;e.pause()}e._loop=false;return this},play:function(e){this.get(e).play();return this},playOnly:function(e){this.allStop(e);this.get(e).play();return this},playLoop:function(f){var e=this.get(f);e._loop=true;e.play();return this},fadeIn:function(g,e,f){this.fadeTo(g,e,1,f)},fadeOut:function(g,e,f){this.fadeTo(g,e,0,f)},fadeTo:function(k,g,i,h){var f=this.get(k),e=this._manager?f.volume/100:f.volume;this._fade[k]={sound:f,init:e,c_volume:e,f_time:g,to:i,callback:h}},_loop:function(){var g,f;for(var e in this._fade){g=this._fade[e];f=false;if(g){if(g.init<g.to){if(g.c_volume>=g.to){g.c_volume=g.to;f=true}else{g.c_volume+=(Math.abs(g.to-g.init)/g.f_time)}if(g.c_volume>0.999){g.c_volume=1}}else{if(g.c_volume<=g.to){g.c_volume=g.to;f=true}else{g.c_volume-=(Math.abs(g.to-g.init)/g.f_time)}if(g.c_volume<0.001){g.c_volume=0}}if(this._manager){g.sound.setVolume(g.c_volume*100)}else{g.sound.volume=g.c_volume}if(f){if(g.callback){g.callback.call(g.sound)}delete this._fade[e];break}}}}},Canvas:{"new":function(e){return Class["new"]("Canvas",[e])}},Element:{"new":function(h,f,g,e){return Class["new"]("Element",[h,f,g,e])}},Context:{"new":function(e){return Class["new"]("Context",[e])}},Scene:{_scenes:{},_cacheScene:{},_scenesEnabled:{},_scenesIndex:[],_scenesNbCall:{},_current:null,New:function(){return this["new"].apply(this,arguments)},"new":function(f){var e;if(typeof f=="string"){if(!this._cacheScene[f]){throw"Please initialize \'"+f+"\' scene with an object before"}f=this._cacheScene[f]}else{this._cacheScene[f.name]=f}e=Class["new"]("Scene",[f]).extend(f,false);this._scenesNbCall[f.name]=0;this._scenes[f.name]=e;return e},call:function(g,h){if(this._scenesNbCall[g]>0){this.New(g)}var e=this._scenes[g],f=[g];h=h||{};if(e){this._scenesEnabled[g]=e;if(this._scenesIndex.indexOf(g)==-1){if(h.transition){this._scenesIndex=f.concat(this._scenesIndex)}else{this._scenesIndex.push(g)}}if(h.exitScenes){h.exitScenes.allExcept=h.exitScenes.allExcept||[];h.exitScenes.allExcept=f.concat(h.exitScenes.allExcept);e._load.call(e,h.exitScenes,h.params)}else{if(!h.overlay&&!h.transition){this.exitAll(f)}e._load.call(e,h,h.params)}this._scenesNbCall[g]++}else{throw\'Scene "\'+g+"\\" doesn\'t exist"}return e},exit:function(f){var e=this._scenesEnabled[f],h=e.getCanvas();if(e){if(h._layerDOM){h._layerDOM.innerHTML=""}e._exit.call(e);for(var g=0;g<this._scenesIndex.length;g++){if(this._scenesIndex[g]==f){this._scenesIndex.splice(g,1);break}}delete this._scenesEnabled[f]}},isEnabled:function(e){return this._scenesEnabled[e]?true:false},exitAll:function(f){var e;if(!(f instanceof Array)){f=[f]}for(e in this._scenesEnabled){if(_CanvasEngine.inArray(e,f)){this.exit(e)}}},exist:function(e){return this._scenes[e]?true:false},get:function(e){return this._scenes[e]},getEnabled:function(){return this._scenesEnabled},_loop:function(h){var f=this,g,i;this.fps=0;var l=new Date().getTime(),k;function e(){var n,m=0;k=(new Date().getTime()-l)/1000;l=new Date().getTime();f.fps=1/k;b.Sound._loop();h[m].clear();h[m]._ctxMouseEvent.clearRect(0,0,h[m].width,h[m].height);for(g=0;g<f._scenesIndex.length;g++){i=f._scenesEnabled[f._scenesIndex[g]];if(i){i._loop()}}requestAnimationFrame(e)}requestAnimationFrame(e)},getFPS:function(){return ~~this.fps},getPerformance:function(){return ~~(this.getFPS()/60*100)}}});Class.create("Canvas",{id:null,element:null,stage:null,ctx:null,_globalElements:{},_ctxTmp:null,_layerDOM:null,_layerParent:null,_ctxMouseEvent:null,_canvasMouseEvent:null,width:0,height:0,mouseEvent:true,initialize:function(f){var v=this,r,m;this.id=f;var g=this._getElementById(f);if(g.tagName!="CANVAS"&&g.tagName!="canvas"){this.element=document.createElement("canvas");this._layerDOM=document.createElement("div");r=this.element.width=g.getAttribute("width");m=this.element.height=g.getAttribute("height");this.element.style.position="absolute";g.style.position=this._layerDOM.style.position="relative";g.style.width=r+"px";g.style.height=m+"px";g.style.overflow=this._layerDOM.style.overflow="hidden";this._layerDOM.style.width=this._layerDOM.style.height="100%";g.appendChild(this.element);g.appendChild(this._layerDOM);this._layerParent=g}else{this.element=g}this.width=this.element.width;this.height=this.element.height;this.ctx=this.element.getContext("2d");this.hammerExist=typeof(Hammer)!=="undefined";this._mouseEvent();var u=["click","dbclick","mousemove","mousedown","mouseup"],q=["dragstart","drag","dragend","dragup","dragdown","dragleft","dragright","swipe","swipeup","swipedown","swipeleft","swiperight","rotate","pinch","pinchin","pinchout","tap","doubletap","hold","transformstart","transform","transformend","release","touch","release"];var p=this._layerParent||this.element;var n=null,k;if(this.hammerExist){n=new Hammer(p)}function o(h){p.addEventListener(h,function(i){t(i,h)},false)}function e(h){n.on(h,function(i){t(i,h)})}function t(C,A){var B,y,h=b.Scene.getEnabled(),w;if(C.gesture){B=C.gesture.touches}else{B=[v.getMousePosition(C)]}for(var i in h){w=h[i].getStage();for(var z=0;z<B.length;z++){k=B[z];if(k.pageX!==undefined){k=v.getMousePosition(k)}if(A=="mousemove"){if(v.mouseEvent){w._mousemove(C,k)}else{continue}}w.trigger(A,[C,k]);w._select(k,function(D){D.trigger(A,[C,k])})}}}if(n){for(var l=0;l<q.length;l++){e.call(this,q[l])}}for(var l=0;l<u.length;l++){o.call(this,u[l])}if(!d.contextmenu){p.addEventListener("contextmenu",function(h){h.preventDefault()})}},_elementsByScene:function(e,f,g){if(!this._globalElements[e]){this._globalElements[e]={}}if(!g){if(f){return this._globalElements[e][f]}return this._globalElements[e]}this._globalElements[e][f]=g},_getElementById:function(f){var e;if(d.cocoonjs){e=document.createElement("canvas");e.width=d.cocoonjs.width;e.height=d.cocoonjs.height;e.id=f;document.body.appendChild(e)}else{e=document.getElementById(f)}return e},_mouseEvent:function(){this._canvasMouseEvent=document.createElement("canvas");this._canvasMouseEvent.width=this.width;this._canvasMouseEvent.height=this.height;this._ctxMouseEvent=this._canvasMouseEvent.getContext("2d")},canvasReady:function(){},getMousePosition:function(l){var k=this.element;var i=0;var h=0;while(k&&k.tagName!="BODY"){i+=k.offsetTop;h+=k.offsetLeft;k=k.offsetParent}if(l.clientX==undefined){l.clientX=l.pageX}if(l.clientY==undefined){l.clientY=l.pageY}if(!window.pageXOffset){window.pageXOffset=0}if(!window.pageYOffset){window.pageYOffset=0}var g=l.clientX-h+window.pageXOffset;var f=l.clientY-i+window.pageYOffset;return{x:g,y:f}},measureText:function(f,e,g){var i;if(/[ ]+/.test(e)){var h=e.split(" ");e=h[0];g=h[1]}g=g||"Arial";e=e||"12px";this.ctx.font="normal "+e+" "+g;i=this.ctx.measureText(f);this.ctx.font=null;return{width:i.width,height:this._measureTextHeight(f,e,g)}},_measureTextHeight:function(h,f,k){var n=this.ctx;n.save();n.translate(0,Math.round(this.height*0.8));n.font="normal "+f+" "+k;n.fillText(h,0,0);n.restore();var g=n.getImageData(0,0,this.width,this.height).data,i=false,m=false,e=this.height,l=0;while(!m&&e){e--;for(l=0;l<this.width;l++){if(g[e*this.width*4+l*4+3]){m=e;break}}}while(e){e--;for(l=0;l<this.width;l++){if(g[e*this.width*4+l*4+3]){i=e;break}}if(i!=e){return m-i}}return 0},createPattern:function(f,e){e=e||"repeat";var g=b.Materials.get(f);if(!g){return}return this.ctx.createPattern(g,e)},createLinearGradient:function(f,h,e,g){return this.ctx.createLinearGradient(f,h,e,g)},createRadialGradient:function(h,k,g,f,i,e){return this.ctx.createRadialGradient(h,k,g,f,i,e)},addColorStop:function(f,e){return this.ctx.addColorStop(f,e)},getImageData:function(e,i,f,g){if(!e){e=0;i=0}if(!f){f=this.width;g=this.height}return this.ctx.getImageData(e,i,f,g)},putImageData:function(h,g,l,f,k,e,i){if(!g){g=0;l=0}return this.ctx.putImageData(h,g,l,f,k,e,i)},createImageData:function(){return this.ctx.createImageData.apply(this.ctx,arguments)},toDataURL:function(){return this.ctx.toDataURL()},clear:function(){return this.ctx.clearRect(0,0,this.width,this.height)},cursor:function(e){this.element.style.cursor=e},isFullscreen:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen},setSize:function(e,m,g){var i,n=this,l=this.element.width,h=this.element.height,k=e;if(e=="reset"){e=this.width=this._oldSize.width;m=this.height=this._oldSize.height;this._canvasMouseEvent.style.width=this._canvasMouseEvent.style.height=this.element.style.width=this.element.style.height=null;if(this._oldSize.type=="browser"){this.element.style.position=this.element.style.top=this.element.style.left=null}else{if(this._oldSize.type=="fullscreen"){document.cancelFullScreen()}}}else{if(e=="fullscreen"){g=m;e=screen.width;m=screen.height;if(this.element.requestFullScreen){this.element.requestFullScreen()}else{e=k="browser"}}}if(e=="browser"){g=m;e=window.innerWidth;m=window.innerHeight;var f=this.element;if(this._layerParent){f=this._layerParent}f.style.position="fixed";f.style.top=f.style.left="50%";window.onresize=function(o){if(k=="browser"){n.setSize("browser",g)}}}if(g=="fit"){i=l/h;e=m*i;this._canvasMouseEvent.style.width=this.element.style.width=e+"px";this._canvasMouseEvent.style.height=this.element.style.height=m+"px"}else{if(g=="stretch"){this._canvasMouseEvent.style.width=this.element.style.width=e+"px";this._canvasMouseEvent.style.height=this.element.style.height=m+"px"}else{this._canvasMouseEvent.width=this.width=this.element.width=e;this._canvasMouseEvent.height=this.height=this.element.height=m}}if(k=="browser"){f.style.margin=(-m/2)+"px 0 0 "+(-e/2)+"px"}if(this._layerParent){this._layerParent.style.width=e+"px";this._layerParent.style.height=m+"px"}this._oldSize={width:l,height:h,type:k};return this}});Class.create("Scene",{id:0,_stage:{},_events:[],_pause:false,_isReady:false,_index:0,model:null,initialize:function(g){var f,e=this;this.id=_CanvasEngine.uniqid();this._events=g.events},_loop:function(){if(this._pause){this._stage.refresh()}else{if(this._isReady&&this.render){this.render.call(this,this._stage)}else{this._stage.refresh()}}},emit:function(e,f){this.model.call(e,f)},getElement:function(e){if(this._global_elements[e]){return this._global_elements[e]}return this.createElement(e)},pause:function(e){if(e===undefined){return this._pause}this._pause=e;return this},togglePause:function(){return this.pause(!this._pause)},getStage:function(){return this._stage},getCanvas:function(e){if(!e){e=0}return b.el_canvas[e]},zIndex:function(f){var e;if(f===undefined){return this._index}if(f instanceof Class){f=f.zIndex()}e=b.Scene._scenesIndex.length;if(Math.abs(f)>=e){f=-1}if(f<0){f=e+f}_CanvasEngine.moveArray(b.Scene._scenesIndex,this._index,f);this._index=f;return this},createElement:function(f,k,e){if(f instanceof Array){var l={};for(var g=0;g<f.length;g++){l[f[g]]=this.createElement(f[g])}return l}if(typeof f!="string"){e=k;k=f}var h=b.Element["new"](this,null,k,e);h.name=f;return h},_exit:function(){this.getCanvas()._elementsByScene[this.name]={};if(this.exit){this.exit.call(this)}},loadEvents:function(){var e=this;if(_CanvasEngine.io&&this._events){_CanvasEngine.each(this._events,function(f,g){_CanvasEngine.io.on(e.name+"."+g,function(h){if(e[g]&&b.Scene.isEnabled(e.name)){e[g].call(e,h)}})})}},_load:function(h,v){var u=this;h=h||{};v=v||{};this._stage=b.Element["new"](this);this._stage._dom=this.getCanvas()._layerDOM;this._stage._name="__stage__";this._index=b.Scene._scenesIndex.length-1;for(var k=0;k<b.el_canvas.length;k++){b.el_canvas[k].stage=this._stage}if(this.model){if(this._events){CE.each(this._events,function(w,y){u.model.on(y,function(i){u[y].call(u,i)})})}}this.loadEvents();if(this.called){this.called(this._stage)}var n=o("images"),e=o("sounds"),g=o("fonts"),l=o("videos"),f=o("data"),r=n+e+g+l+f,m=0;if(n>0){p("images")}if(e>0){p("sounds")}if(g>0){p("fonts")}if(l>0){p("videos")}if(f>0){p("data")}if(n==0&&e==0&&g==0&&l==0&&f==0){t()}function p(i){b.Materials.load(i,u.materials[i],function(y,w){q(y,w,i)})}function q(y,w,i){m++;if(u.preload){u.preload(u._stage,m/r*100,{material:y,type:i,index:m,data:w})}if(r==m){t()}}function o(z){var y=0;if(!u.materials){return 0}if(u.materials[z]){for(var w in u.materials[z]){y++}}return y}function t(){if(h.when=="afterPreload"){b.Scene.exitAll(h.allExcept)}if(u.ready){u.ready(u._stage,v)}u._stage.trigger("canvas:readyEnd");if(u.model&&u.model.ready){u.model.ready.call(u.model)}u._isReady=true;if(h.transition){if(h.transition===true){h.transition={type:"fade"}}u.execTransition(h.transition.type,h.transition,h.overlay)}}},execTransition:function(p,l,h){var r=this,o;l=l||{};l=_CanvasEngine.extend({frames:30},l);var f=b.Scene.getEnabled(),m=0,n;for(var t in f){if(f[t].id==this.id){continue}n=f[t].getStage();o=f[t].getCanvas();switch(p){case"fade":if(!b.Timeline){throw"Add the Timeline class for transitions"}b.Timeline.New(n).to({opacity:0},l.frames).call(function(){if(!h){b.Scene.exitAll(r.name)}if(l.finish){l.finish.call(r)}f[t].zIndex(0)});break;case"image":var o=n.buffer(o.width,o.height),q=o.getContext("2d");var i=0;var g=new Worker("workers/transition.js");g.addEventListener("message",function(k){if(i==0){n.empty()}q.putImageData(k.data.imageData,0,0);n.drawImage(o);i++;if(k.data.finish){g.terminate();if(l.finish){l.finish.call(r)}if(!h){b.Scene.exitAll(r.name)}}});var e=q.getImageData(0,0,o.width,o.height);g.postMessage({imgData:e,pattern:b.Materials.Transition.get(l.id)});n.on("canvas:refresh",function(k){g.postMessage("")});m++;break}}}});Class.create("Context",{_cmd:{},_graphicCmd:[],_graphicPointer:0,img:{},_useClip:false,globalAlpha:1,_PROPS:["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","globalAlpha","globalCompositeOperation","lineJoin","lineCap","lineWidth","miterLimit","fillStyle","font","textBaseline","textAlign","strokeStyle"],multiple:false,alpha:function(e){},_setMethod:function(f,g){var e=this;this[f]=function(){var h=g=="cmd"?"_addCmd":"draw";e[h](f,arguments)}},_defaultRectParams:function(e,m,f,i,l,k){var g=arguments[arguments.length-1];arguments=Array.prototype.slice.call(arguments,0,arguments.length-1);if(typeof arguments[0]=="string"){this[g]=e;e=m;m=f;f=i;i=l;l=k}if(arguments[0]==undefined){e=0;m=0}if(arguments[3]==undefined){f=this.width;i=this.height}return[e,m,f,i,l]},fillRect:function(e,l,f,i,k){var g=Array.prototype.slice.call(arguments,0);g=this._defaultRectParams.apply(this,g.concat("fillStyle"));if(typeof e!="string"&&k!==undefined){this._roundRect.apply(this,g.concat("fill"));return}this._addCmd("fillRect",g,["fillStyle"]);return this},strokeRect:function(e,l,f,i,k){var g=Array.prototype.slice.call(arguments,0);g=this._defaultRectParams.apply(this,g.concat("strokeStyle"));if(typeof e!="string"&&k!==undefined){this._roundRect.apply(this,g.concat("stroke"));return this}this._addCmd("strokeRect",g,["strokeStyle"]);return this},fillCircle:function(e,g,f){this._circle(e,g,f,"fill");return this},strokeCircle:function(e,g,f){this._circle(e,g,f,"stroke");return this},_circle:function(e,h,g,f){if(h===undefined){g=e}e=e||0;h=h||0;g=g||this.width/2;if(isNaN(g)){console.warn(f+"Circle() : Impossible to define the radius of the circle. Give a width to the element")}if(!this.strokeStyle){this.strokeStyle="black"}this.beginPath();this.arc(e,h,g,0,2*Math.PI,false);this[f]()},_roundRect:function(e,l,f,i,k,g){if(f<2*k){k=f/2}if(i<2*k){k=i/2}this.beginPath();this.moveTo(e+k,l);this.arcTo(e+f,l,e+f,l+i,k);this.arcTo(e+f,l+i,e,l+i,k);this.arcTo(e,l+i,e,l,k);this.arcTo(e,l,e+f,l,k);this.closePath();this[g]()},fill:function(){this._addCmd("fill",[],["fillStyle"]);return this},fillText:function(g,e,h){if(e=="middle"&&this.width&&this.height){var f=this.scene.getCanvas().measureText(g,this.font).width;this.textBaseline="middle";e=this.width/2-f/2;h=this.height/2}if(!e){e=0}if(!h){h=0}this._addCmd("fillText",[g,e,h],["fillStyle","font","textBaseline","textAlign"]);return this},strokeText:function(f,e,g){this._addCmd("strokeText",[f,e,g],["strokeStyle","font","textBaseline","textAlign"]);return this},stroke:function(){this._addCmd("stroke",[],["strokeStyle"]);return this},drawImage:function(i,p,o,q,k,t,r,e,n){var l,f,h,m=i;if(!p){p=0}if(!o){o=0}if(typeof i==="string"){m=b.Materials.get(i);if(!m){return}this.img.width=m.width;this.img.height=m.height}if(/%$/.test(q)){t=p;r=o;p=0;o=0;q=m.width*parseInt(q)/100;k=m.height;e=q;n=k}var g=new RegExp("^"+window.location.origin,"g");if(!g.test(m.src)){h=m}else{h=b.Materials.createBuffer(i)}if(q!==undefined){if(t===undefined){l=[m,p,o,q,k];f=[h,p,o,q,k]}else{l=[m,p,o,q,k,t,r,e,n];f=[h,p,o,q,k,t,r,e,n]}this._buffer_img={params:f,x:t,y:r,width:e,height:n}}else{l=[m,p,o];f=[h,p,o];this._buffer_img={params:f,x:p,y:o,width:m.width,height:m.height}}this._addCmd("drawImage",l);return this},moveTo:function(){this._addCmd.call(this,"moveTo",arguments,true);return this},lineTo:function(){this._addCmd.call(this,"lineTo",arguments,true);return this},quadraticCurveTo:function(){this._addCmd.call(this,"quadraticCurveTo",arguments,true);return this},bezierCurveTo:function(){this._addCmd.call(this,"bezierCurveTo",arguments,true);return this},beginPath:function(){this.multiple=true;this._graphicCmd.push([]);this._addCmd.call(this,"beginPath",arguments);return this},closePath:function(){this._addCmd.call(this,"closePath",arguments,true);return this},clip:function(){this._useClip=true;this._addCmd.call(this,"clip",arguments);return this},rect:function(){var e=Array.prototype.slice.call(arguments,0);e=this._defaultRectParams.apply(this,e.concat("fillStyle"));this._addCmd("rect",e);return this},arc:function(){this._addCmd.call(this,"arc",arguments,true);return this},arcTo:function(){this._addCmd.call(this,"arcTo",arguments,true);return this},addColorStop:function(){this._addCmd.call(this,"addColorStop",arguments,true);return this},isPointInPath:function(){this._addCmd.call(this,"isPointInPath",arguments,true);return this},rotate:function(){this.draw.call(this,"rotate",arguments);return this},translate:function(){this.draw.call(this,"translate",arguments);return this},transform:function(){this.draw.call(this,"transform",arguments);return this},setTransform:function(){this.draw.call(this,"setTransform",arguments);return this},resetTransform:function(){this.draw.call(this,"resetTransform",arguments);return this},clearRect:function(){this.draw.call(this,"clearRect",arguments);return this},scale:function(){this.draw.call(this,"scale",arguments);return this},rotateDeg:function(e){this.rotate(e*Math.PI/180)},save:function(e){if(e){this._addCmd("save")}else{this.draw("save")}},restore:function(e){if(e){this._addCmd("restore")}else{this.draw("restore")}},clearPropreties:function(){var f=this._PROPS;for(var e=0;e<f.length;e++){if(this[f[e]]){this[f[e]]=undefined}}},_bufferEvent:function(f,e){var g=this._canvas[0]["_ctxMouseEvent"];if(this.hasEvent()||this._useClip){if(f=="drawImage"&&!this._forceEvent){g[f].apply(this._canvas[0]["_ctxMouseEvent"],this._buffer_img.params);g.globalCompositeOperation="source-atop";g.fillStyle="#"+this.color_key;g.fillRect(this._buffer_img.x,this._buffer_img.y,this._buffer_img.width,this._buffer_img.height)}else{g[f].apply(this._canvas[0]["_ctxMouseEvent"],e)}}},draw:function(z,u,w){this._graphicPointer=0;var y="ctx",m;if(!u){u=[]}if(!w){w={}}var m=this.getScene().getCanvas()._ctxTmp;var p,i={};var e={};var v=true,k=1,n=false;var r=function(B,g,A){if(B[g]||this._forceEvent){this._canvas[0]["_ctxMouseEvent"][g]=A;return 0}return 1};if(z&&typeof z!="string"){m=z;z=null}if(z){i[z]=[{params:u,propreties:w}];v=false}else{i=this._cmd}function f(C,g){for(var A=0;A<this._canvas.length;A++){e=C.propreties;if(v&&g=="restore"){this.clearPropreties()}if(e){for(var B in e){k=1;if(B=="globalAlpha"){e[B]=this.real_opacity}if(m){m[B]=e[B]}else{this._canvas[A][y][B]=e[B]}k&=r.call(this,e,"globalAlpha",1);k&=r.call(this,e,"strokeStyle","#"+this.color_key);k&=r.call(this,e,"fillStyle","#"+this.color_key);if(k){r.call(this,e,B,e[B])}}}if(m){m[g].apply(m,C.params)}else{this._canvas[A][y][g].apply(this._canvas[A][y],C.params);if(this._forceEvent){if(g=="rect"){this._bufferEvent("fillRect",C.params)}}this._bufferEvent(g,C.params)}}}var t,q;for(var l in i){for(var h in i[l]){p=i[l][h];f.call(this,p,l);if(l=="beginPath"){t=this._graphicCmd[this._graphicPointer];for(var o=0;o<t.length;o++){q=t[o];f.call(this,q,q.name)}this._graphicPointer++}}}},_addCmd:function(g,l,e,n){if(typeof e=="boolean"){n=e;e=false}l=l||[];e=e||[];var m=this._PROPS;e=e.concat(m);var i={};for(var f=0;f<e.length;f++){if(this[e[f]]){i[e[f]]=this[e[f]]}}i.globalAlpha=1;if(n){var h=this._graphicCmd[this._graphicCmd.length-1];if(!h){throw"error"}else{h.push({name:g,params:l,propreties:i})}}else{if(this.multiple&&typeof this._cmd[g]!=="undefined"&&this._cmd[g]!==null){this._cmd[g].push({params:l,propreties:i})}else{this._cmd[g]=[{params:l,propreties:i}]}}},hasCmd:function(e){return this._cmd[e]!==undefined},removeCmd:function(e){if(e=="clip"){this._useClip=false}delete this._cmd[e]}});Class.create("Element",{_children:[],_attr:{},x:0,y:0,real_x:0,real_y:0,real_scale_x:1,real_scale_y:1,real_rotate:0,real_skew_x:0,real_skew_y:0,real_opacity:1,real_propagation:true,scaleX:1,scaleY:1,skewX:0,skewY:0,opacity:1,rotation:0,width:null,height:null,regX:0,regY:0,parent:null,pause:false,_index:0,_id:null,_visible:true,_listener:{},_buffer_img:null,_out:1,_over:0,_nbEvent:0,_onRender:[],_pack:null,_useDOM:false,_forceEvent:false,propagationOpacity:null,initialize:function(l,h,i,e){var f=l.getCanvas();this._id=_CanvasEngine.uniqid();this._dom=document.createElement("div");this.width=i;this.height=e;this.scene=l;this.stage=l._stage;this.layer=h;var g,k=f._elementsByScene(this.scene.name);do{g=_CanvasEngine._getRandomColorKey()}while(g in k);this.color_key=g;this.scene.getCanvas()._elementsByScene(this.scene.name,g,this);this._canvas=b.el_canvas},_initParams:function(e){if(e||!this.parent){this.parent={scaleX:1,scaleY:1,real_x:0,real_y:0,real_scale_x:1,real_scale_y:1,real_rotate:0,real_skew_x:0,real_skew_y:0,real_opacity:1,real_propagation:true}}},refresh:function(){this._refresh(true,true);this._canvas._event_mouse=null},_refreshDOM:function(){var f={position:"absolute",opacity:this.opacity,width:this.width+"px",height:this.height+"px",display:this._visible?"block":"none"};var e={transform:"rotate("+this.rotation+"deg) scale("+this.scaleX+", "+this.scaleY+") skew("+this.skewX+"deg, "+this.skewY+"deg) translate("+this.x+"px, "+this.y+"px)","transform-origin":this.regX+" "+this.regY};_CanvasEngine.each(["","-webkit-","-moz-","-o-"],function(g,h){for(s in e){f[h+s]=e[s]}});_CanvasEngine.extend(this._dom.style,f)},_refresh:function(l,g,e){if(this.stage._onRefresh){this.stage._onRefresh(this)}if(!this._visible){this._loop();return}if(!this.real_pause){this._initParams(l);this.real_propagation=this.parent.propagationOpacity==null?true:this.parent.propagationOpacity;this.save();this.real_scale_x=this.parent.real_scale_x*this.scaleX;this.real_scale_y=this.parent.real_scale_y*this.scaleY;this.real_y=(this.parent.real_y+this.y);this.real_x=(this.parent.real_x+this.x);this.real_skew_x=this.parent.real_skew_x+this.skewX;this.real_skew_y=this.parent.real_skew_y+this.skewY;this.real_rotate=this.parent.real_rotate+this.rotation;if(this.real_propagation){this.real_opacity=this.parent.real_opacity*this.opacity}else{this.real_opacity=this.opacity}this.real_pause=l?this.pause:this.parent.real_pause;this.globalAlpha=this.real_opacity;if(this.parent){if(this.parent.regX){this.regX=this.parent.regX}if(this.parent.regY){this.regY=this.parent.regY}}var k=this.real_x+this.regX;var h=this.real_y+this.regY;if(this.regX!=0||this.regY!=0){this.translate(k,h)}if(this.real_rotate!=0){this.rotateDeg(this.real_rotate)}if(this.real_scale_x!=1||this.real_scale_y!=1||this.real_skew_x!=0||this.real_skew_y!=0){this.transform(this.real_scale_x,this.real_skew_x,this.real_skew_y,this.real_scale_y,0,0)}if(this.regX!=0||this.regY!=0){this.translate(-k,-h)}this.translate(this.real_x,this.real_y)}this.draw(e);if(!this._useClip){this.restore()}if(this._useDOM){this._refreshDOM()}if(g){if(!this.getScene()._pause){this._loop()}for(var f=0;f<this._children.length;f++){this._children[f]._refresh(false,true,e)}}if(this._useClip){this.restore()}},setX:function(e){this.x=e},setY:function(e){this.y=e},buffer:function(f,m){var l=this.children(),g=document.createElement("canvas"),e=g.getContext("2d"),o=this.getScene(),n=this.scene.getCanvas();g.width=f||n.width;g.height=m||n.height;this.scene.getCanvas()._ctxTmp=e;for(var k=0;k<l.length;k++){this._children[k]._refresh(true,true)}this.scene.getCanvas()._ctxTmp=null;return g},rotateTo:function(f,e){var g=parseInt(f);if(/rad$/.test(f)){g=g*180/Math.PI}this.rotation=e?360-g:g;this._stageRefresh();return this},setOriginPoint:function(e,f){if(e=="middle"){if(this.width&&this.height){e=Math.round(this.width/2);f=Math.round(this.height/2)}else{throw"Width and Height proprieties are not defined"}}if(e!==undefined){this.regX=+e}if(f!==undefined){this.regY=+f}return this},getScene:function(){return this.scene},_stageRefresh:function(){this.stage.refresh()},isStage:function(){return this._name=="__stage__"},_mousemove:function(l,g){var f,k;for(var h=0;h<this._children.length;h++){f=this._children[h];k=g.x>f.real_x&&g.x<f.real_x+f.width&&g.y>f.real_y&&g.y<f.real_y+f.height;if(k){if(f._out==1){f._out++;f._out++;f._over=1;_trigger=f.trigger("mouseover",l)}if(_trigger){return}}else{if(f._over==1){f._out=1;f._over++;_trigger=f.trigger("mouseout",l)}}}},_select:function(i,o){var h,e;var f=this.scene.getCanvas();var l=this._canvas[0],n=l.element.style.width,g=l.element.style.height,m=n!=""?~~(i.x*l.width/parseInt(n)):i.x,k=g!=""?~~(i.y*l.height/parseInt(g)):i.y;e=l._ctxMouseEvent.getImageData(m,k,1,1).data;if(e[3]>0){h=f._elementsByScene(this.scene.name,_CanvasEngine.rgbToHex(e[0],e[1],e[2]));if(h){o(h)}}},_click:function(h,f,g){this._select(f,function(e){e.trigger("click",h,f)})},_cloneRecursive:function(g){var k,h;if(g._children.length>0){for(var f=0;f<g._children.length;f++){k=g._children[f];h=this.scene.createElement();for(var e in k){if(typeof e!="function"){h[e]=k[e]}}h.parent=g;this._cloneRecursive(k);g._children[f]=h}}},clone:function(){var f=this.scene.createElement();for(var e in this){if(typeof e!="function"){f[e]=this[e]}}this._cloneRecursive(f);return f},append:function(m){var l,f=this;var g=this.scene.getCanvas();function k(i){if(i._useDOM&&i.parent){i.parent._dom.appendChild(i._dom);if(!f.isStage()){i.parent._useDOM=true;k(i.parent)}}}function e(i){i._useDOM=true;k(i);i._refreshDOM()}if(m instanceof Element){this._dom.appendChild(m);e(this);return this}else{if(typeof jQuery!="undefined"&&m instanceof jQuery){jQuery(this._dom).append(m);e(this);return this}}for(var h=0;h<arguments.length;h++){l=arguments[h];this._children.push(l);l.parent=this;l._refresh(false,true);k(l)}return arguments},prepend:function(e){this._children.push(e);e.parent=this;e.zIndex(0);return e},insertAfter:function(f){var e=f.parent.children();e.push(this);return this},children:function(g){var h=[],e=[];if(g){if(g instanceof Array){h=g}if(g instanceof Class){h=g.children()}for(var f=0;f<h.length;f++){e[f]=h[f].clone();e[f].parent=this}this._children=e}return this._children},detach:function(){this.remove();return this},pack:function(o,m,n){var f=this.children(),g=document.createElement("canvas"),p=g.getContext("2d"),l=this.getScene(),e;g.width=o;g.height=m;this.scene.getCanvas()._ctxTmp=p;for(var k=0;k<f.length;k++){this._children[k]._refresh(true,true)}this.scene.getCanvas()._ctxTmp=null;if(!n){this._pack=f}this.empty();e=l.createElement();e.drawImage(g);this.append(e);return this},cache:function(f,i,l){var g=document.createElement("canvas"),e=g.getContext("2d"),k=this.scene.getCanvas();if(typeof f=="boolean"){l=f;f=null}g.width=f||this.width;g.height=i||this.height;k._ctxTmp=e;this._refresh(true,true);k._ctxTmp=null;if(!l){this._cache=this._cmd}this._cmd=[];this.drawImage(g);return this},uncache:function(){if(!this._cache){throw"Use the method `cache` before or impossible because you release the memory with method `cache`"}this._cmd=[];this._refresh(true,true);this._cmd=this._cache;this._cache=null;return this},unpack:function(){if(!this._pack){throw"Use the method pack before or impossible because you release the memory with method pack"}this._children=this._pack;this._pack=null;return this},forceEvent:function(f){if(f==undefined){f=true}this._forceEvent=f;if(!f){this.removeCmd("rect");return this}var e=this.width,g=this.height;if(!e){e=this.img.width}if(!g){g=this.img.height}if(!e||!g){throw"forceEvent() : Before, indicate the size of element !"}this.beginPath();this.rect(0,0,e,g);this.closePath();return this},isAppend:function(){return this in this.parent.children()},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(f){var g=this.children(),e=g.length;if(Math.abs(f)>=e){f=-1}if(f<0){f=e+f}return g[f]},next:function(e,l){var g=this.zIndex();if(e){var k=this.parent.children(),f,m;for(var h=g+1;h<k.length;h++){m=k[h];f=this._findAttr(e,l,m);if(f){return m}}return false}return this.parent.eq(g+1)},prev:function(e,l){var g=this.zIndex();if(e){var k=this.parent.children(),f,m;for(var h=g-1;h>=0;h--){m=k[h];f=this._findAttr(e,l,m);if(f){return m}}return false}return this.parent.eq(g-1)},find:function(e){var g=this.children(),h=[];for(var f=0;f<g.length;f++){c=g[f];if(e==c.name){h.push(c)}}return h},_findAttr:function(e,g,h){var f=h.attr(e);if(f){if(g!=undefined){if(f==g){return h}}else{return h}}return false},findAttr:function(e,l){var h=this.children(),f,k=[];for(var g=0;g<h.length;g++){f=this._findAttr(e,l,h[g]);if(f){k.push(f)}}return k},zIndex:function(f){var e;if(!this.parent){throw"zIndex: No parent known for this element. Assign a parent of this element with append()"}if(f===undefined){return this.parent._children.indexOf(this)}if(f instanceof Class){f=f.zIndex()}e=this.parent._children.length;if(Math.abs(f)>=e){f=-1}if(f<0){f=e+f}_CanvasEngine.moveArray(this.parent._children,this.zIndex(),f);this._stageRefresh();return this},zIndexBefore:function(e){this.zIndex(e.zIndex()-1);return this},remove:function(){var g;var e=this.scene.getCanvas();for(var f=0;f<this.parent._children.length;f++){g=this.parent._children[f];if(this._id==g._id){if(e._layerDOM&&g._useDOM){e._layerDOM.removeChild(g._dom)}this.parent._children.splice(f,1);this._stageRefresh();return true}}return false},empty:function(){this._children=[];return this},attr:function(e,g,f){f=f==undefined?true:f;if(g===undefined){return this._attr[e]}if(this._attr[e]!=g&&f){this.trigger("element:attrChange",[e,g])}this._attr[e]=g;return this},removeAttr:function(e){if(this._attr[e]){delete this._attr[e]}return this},offset:function(f){if(f){var e=this.parent;if(f.left){this.x=f.left}if(f.right&&e){this.x=e.width-this.width}if(f.top){this.y=f.top}if(f.bottom&&e){this.y=e.height-this.height}return this}return{left:this.x,top:this.y}},position:function(){return{left:this.real_x,top:this.real_y}},scaleTo:function(e){this.scaleX=e;this.scaleY=e;return this},hide:function(){this._visible=false},show:function(){this._visible=true},toggle:function(){if(this._visible){this.hide()}else{this.show()}},bind:function(e,f){this.on(e,f)},on:function(f,h){var g;f=f.split(" ");for(var e=0;e<f.length;e++){g=f[e];if(g=="canvas:refresh"){this.stage._onRefresh=h}else{if(g=="canvas:render"){this._onRender.push(h)}else{if(b.mobileUserAgent&&g=="click"){g="touch"}}}if(!this._listener[g]){this._listener[g]=[];this._nbEvent++}this._listener[g].push(h)}},unbind:function(e,f){this.off(e,f)},off:function(f,h){var g;f=f.split(" ");for(var e=0;e<f.length;e++){g=f[e];if(h){if(g=="canvas:render"){for(var e=0;e<this._onRender.length;e++){if(this._onRender[e]==h){this._onRender.splice(e,1);break}}}for(var e=0;e<this._listener[g].length;e++){if(this._listener[g][e]==h){this._listener[g].splice(e,1);break}}}else{if(g=="canvas:render"){this._onRender=[]}if(this._listener[g]){delete this._listener[g];this._nbEvent--}}if(this._listener[g]&&this._listener[g].length==0){delete this._listener[g];this._nbEvent--}}},eventExist:function(e){return this._listener[e]&&this._listener[e].length>0},hasEvent:function(){return this._nbEvent>0},trigger:function(k,m){var l,f=false;k=k.split(" ");if(!(m instanceof Array)){m=[m]}for(var g=0;g<k.length;g++){l=k[g];if(this._listener[l]){for(var h=0;h<this._listener[l].length;h++){f=true;if(this._listener[l][h]){this._listener[l][h].apply(this,m)}}}}return f},click:function(e){this.on("click",e)},dblclick:function(e){this.on("dblclick",e)},mouseover:function(e){this.on("mouseover",e)},mouseout:function(e){this.on("mouseout",e)},_loop:function(){for(var e=0;e<this._onRender.length;e++){if(this._onRender[e]){this._onRender[e].call(this)}}},addLoopListener:function(e){this.on("canvas:render",e)},html:function(e){this._useDOM=true;this._dom.innerHTML=e;return this},css:function(e){this._useDOM=true;_CanvasEngine.extend(this._dom.style,e);return this}}).extend("Context");Global_CE=b=Class["new"]("CanvasEngineClass");return b};CanvasEngine.Core=CanvasEngine;CanvasEngine.Class=Class;var CE=CanvasEngine;\n/*! Hammer.JS - v1.0.3 - 2013-03-02\n\n * http://eightmedia.github.com/hammer.js\n\n *\n\n * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;\n\n * Licensed under the MIT license */\n(function(F){var z=function(Q,P){return new z.Instance(Q,P||{})};z.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};z.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;z.HAS_TOUCHEVENTS=("ontouchstart" in F);z.EVENT_TYPES={};z.DIRECTION_DOWN="down";z.DIRECTION_LEFT="left";z.DIRECTION_UP="up";z.DIRECTION_RIGHT="right";z.POINTER_MOUSE="mouse";z.POINTER_TOUCH="touch";z.POINTER_PEN="pen";z.EVENT_START="start";z.EVENT_MOVE="move";z.EVENT_END="end";z.plugins={};z.READY=false;function e(){if(z.READY){return}z.event.determineEventTypes();for(var P in z.gestures){if(z.gestures.hasOwnProperty(P)){z.detection.register(z.gestures[P])}}z.event.onTouch(document,z.EVENT_MOVE,z.detection.detect);z.event.onTouch(document,z.EVENT_END,z.detection.endDetect);z.READY=true}z.Instance=function(R,Q){var P=this;e();this.element=R;this.enabled=true;this.options=z.utils.extend(z.utils.extend({},z.defaults),Q||{});if(this.options.stop_browser_behavior){z.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior)}z.event.onTouch(R,z.EVENT_START,function(S){if(P.enabled){z.detection.startDetect(P,S)}});return this};z.Instance.prototype={on:function G(Q,R){var S=Q.split(" ");for(var P=0;P<S.length;P++){this.element.addEventListener(S[P],R,false)}return this},off:function o(Q,R){var S=Q.split(" ");for(var P=0;P<S.length;P++){this.element.removeEventListener(S[P],R,false)}return this},trigger:function K(P,R){var Q=document.createEvent("Event");Q.initEvent(P,true,true);Q.gesture=R;this.element.dispatchEvent(Q);return this},enable:function d(P){this.enabled=P;return this}};var J=null;var l=false;var h=false;z.event={bindDom:function(R,T,S){var Q=T.split(" ");for(var P=0;P<Q.length;P++){R.addEventListener(Q[P],S,false)}},onTouch:function C(R,Q,S){var P=this;this.bindDom(R,z.EVENT_TYPES[Q],function(T){var U=T.type.toLowerCase();if(U.match(/mouseup/)&&h){h=false;return}if(U.match(/touch/)||(U.match(/mouse/)&&T.which===1)||(z.HAS_POINTEREVENTS&&U.match(/down/))){l=true}if(U.match(/touch|pointer/)){h=true}if(l&&!(h&&U.match(/mouse/))){if(z.HAS_POINTEREVENTS&&Q!=z.EVENT_END){z.PointerEvent.updatePointer(Q,T)}if(Q===z.EVENT_END&&J!==null){T=J}else{J=T}S.call(z.detection,P.collectEventData(R,Q,T));if(z.HAS_POINTEREVENTS&&Q==z.EVENT_END){z.PointerEvent.updatePointer(Q,T)}}if(U.match(/up|cancel|end/)){l=false;J=null;z.PointerEvent.reset()}})},determineEventTypes:function I(){var P;if(z.HAS_POINTEREVENTS){P=z.PointerEvent.getEvents()}else{P=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"]}z.EVENT_TYPES[z.EVENT_START]=P[0];z.EVENT_TYPES[z.EVENT_MOVE]=P[1];z.EVENT_TYPES[z.EVENT_END]=P[2]},getTouchList:function u(P){if(z.HAS_POINTEREVENTS){return z.PointerEvent.getTouchList()}else{if(P.touches){return P.touches}else{return[{identifier:1,pageX:P.pageX,pageY:P.pageY,target:P.target}]}}},collectEventData:function N(R,Q,S){var T=this.getTouchList(S,Q);var P=z.POINTER_TOUCH;if(S.type.match(/mouse/)||z.PointerEvent.matchType(z.POINTER_MOUSE,S)){P=z.POINTER_MOUSE}return{center:z.utils.getCenter(T),timestamp:S.timestamp||new Date().getTime(),target:S.target,touches:T,eventType:Q,pointerType:P,srcEvent:S,preventDefault:function(){if(this.srcEvent.preventManipulation){this.srcEvent.preventManipulation()}if(this.srcEvent.preventDefault){this.srcEvent.preventDefault()}},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return z.detection.stopDetect()}}}};z.PointerEvent={pointers:{},getTouchList:function(){var P=this.pointers;var Q=[];Object.keys(P).sort().forEach(function(R){Q.push(P[R])});return Q},updatePointer:function(Q,P){if(Q==z.EVENT_END){delete this.pointers[P.pointerId]}else{P.identifier=P.pointerId;this.pointers[P.pointerId]=P}},matchType:function(P,R){if(!R.pointerType){return false}var Q={};Q[z.POINTER_MOUSE]=(R.pointerType==R.MSPOINTER_TYPE_MOUSE||R.pointerType==z.POINTER_MOUSE);Q[z.POINTER_TOUCH]=(R.pointerType==R.MSPOINTER_TYPE_TOUCH||R.pointerType==z.POINTER_TOUCH);Q[z.POINTER_PEN]=(R.pointerType==R.MSPOINTER_TYPE_PEN||R.pointerType==z.POINTER_PEN);return Q[P]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};z.utils={extend:function i(P,R){for(var Q in R){P[Q]=R[Q]}return P},getCenter:function A(S){var T=[],R=[];for(var Q=0,P=S.length;Q<P;Q++){T.push(S[Q].pageX);R.push(S[Q].pageY)}return{pageX:((Math.min.apply(Math,T)+Math.max.apply(Math,T))/2),pageY:((Math.min.apply(Math,R)+Math.max.apply(Math,R))/2)}},getVelocity:function p(P,R,Q){return{x:Math.abs(R/P)||0,y:Math.abs(Q/P)||0}},getAngle:function n(R,Q){var S=Q.pageY-R.pageY,P=Q.pageX-R.pageX;return Math.atan2(S,P)*180/Math.PI},getDirection:function k(R,Q){var P=Math.abs(R.pageX-Q.pageX),S=Math.abs(R.pageY-Q.pageY);if(P>=S){return R.pageX-Q.pageX>0?z.DIRECTION_LEFT:z.DIRECTION_RIGHT}else{return R.pageY-Q.pageY>0?z.DIRECTION_UP:z.DIRECTION_DOWN}},getDistance:function m(R,Q){var P=Q.pageX-R.pageX,S=Q.pageY-R.pageY;return Math.sqrt((P*P)+(S*S))},getScale:function y(Q,P){if(Q.length>=2&&P.length>=2){return this.getDistance(P[0],P[1])/this.getDistance(Q[0],Q[1])}return 1},getRotation:function v(Q,P){if(Q.length>=2&&P.length>=2){return this.getAngle(P[1],P[0])-this.getAngle(Q[1],Q[0])}return 0},isVertical:function D(P){return(P==z.DIRECTION_UP||P==z.DIRECTION_DOWN)},stopDefaultBrowserBehavior:function b(R,Q){var U,T=["webkit","khtml","moz","ms","o",""];if(!Q||!R.style){return}for(var P=0;P<T.length;P++){for(var S in Q){if(Q.hasOwnProperty(S)){U=S;if(T[P]){U=T[P]+U.substring(0,1).toUpperCase()+U.substring(1)}R.style[U]=Q[S]}}}if(Q.userSelect=="none"){R.onselectstart=function(){return false}}}};z.detection={gestures:[],current:null,previous:null,stopped:false,startDetect:function B(Q,P){if(this.current){return}this.stopped=false;this.current={inst:Q,startEvent:z.utils.extend({},P),lastEvent:false,name:""};this.detect(P)},detect:function r(S){if(!this.current||this.stopped){return}S=this.extendEventData(S);var T=this.current.inst.options;for(var R=0,P=this.gestures.length;R<P;R++){var Q=this.gestures[R];if(!this.stopped&&T[Q.name]!==false){if(Q.handler.call(Q,S,this.current.inst)===false){this.stopDetect();break}}}if(this.current){this.current.lastEvent=S}},endDetect:function E(P){this.detect(P);this.stopDetect()},stopDetect:function a(){this.previous=z.utils.extend({},this.current);this.current=null;this.stopped=true},extendEventData:function w(T){var U=this.current.startEvent;if(U&&(T.touches.length!=U.touches.length||T.touches===U.touches)){U.touches=[];for(var R=0,P=T.touches.length;R<P;R++){U.touches.push(z.utils.extend({},T.touches[R]))}}var Q=T.timestamp-U.timestamp,W=T.center.pageX-U.center.pageX,V=T.center.pageY-U.center.pageY,S=z.utils.getVelocity(Q,W,V);z.utils.extend(T,{deltaTime:Q,deltaX:W,deltaY:V,velocityX:S.x,velocityY:S.y,distance:z.utils.getDistance(U.center,T.center),angle:z.utils.getAngle(U.center,T.center),direction:z.utils.getDirection(U.center,T.center),scale:z.utils.getScale(U.touches,T.touches),rotation:z.utils.getRotation(U.touches,T.touches),startEvent:U});return T},register:function f(Q){var P=Q.defaults||{};if(typeof(P[Q.name])=="undefined"){P[Q.name]=true}z.utils.extend(z.defaults,P);Q.index=Q.index||1000;this.gestures.push(Q);this.gestures.sort(function(S,R){if(S.index<R.index){return -1}if(S.index>R.index){return 1}return 0});return this.gestures}};z.gestures=z.gestures||{};z.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function M(P,Q){switch(P.eventType){case z.EVENT_START:clearTimeout(this.timer);z.detection.current.name=this.name;this.timer=setTimeout(function(){if(z.detection.current.name=="hold"){Q.trigger("hold",P)}},Q.options.hold_timeout);break;case z.EVENT_MOVE:if(P.distance>Q.options.hold_threshold){clearTimeout(this.timer)}break;case z.EVENT_END:clearTimeout(this.timer);break}}};z.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function H(Q,R){if(Q.eventType==z.EVENT_END){var P=z.detection.previous;if(Q.deltaTime>R.options.tap_max_touchtime||Q.distance>R.options.tap_max_distance){return}if(P&&P.name=="tap"&&(Q.timestamp-P.lastEvent.timestamp)<R.options.doubletap_interval&&Q.distance<R.options.doubletap_distance){z.detection.current.name="doubletap"}else{z.detection.current.name="tap"}R.trigger(z.detection.current.name,Q)}}};z.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function O(P,Q){if(P.eventType==z.EVENT_END){if(Q.options.swipe_max_touches>0&&P.touches.length>Q.options.swipe_max_touches){return}if(P.velocityX>Q.options.swipe_velocity||P.velocityY>Q.options.swipe_velocity){Q.trigger(this.name,P);Q.trigger(this.name+P.direction,P)}}}};z.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:false,drag_block_vertical:false,drag_lock_to_axis:false},triggered:false,handler:function t(P,Q){if(z.detection.current.name!=this.name&&this.triggered){Q.trigger(this.name+"end",P);this.triggered=false;return}if(Q.options.drag_max_touches>0&&P.touches.length>Q.options.drag_max_touches){return}switch(P.eventType){case z.EVENT_START:this.triggered=false;break;case z.EVENT_MOVE:if(P.distance<Q.options.drag_min_distance&&z.detection.current.name!=this.name){return}z.detection.current.name=this.name;var R=z.detection.current.lastEvent.direction;if(Q.options.drag_lock_to_axis&&R!==P.direction){if(z.utils.isVertical(R)){P.direction=(P.deltaY<0)?z.DIRECTION_UP:z.DIRECTION_DOWN}else{P.direction=(P.deltaX<0)?z.DIRECTION_LEFT:z.DIRECTION_RIGHT}}if(!this.triggered){Q.trigger(this.name+"start",P);this.triggered=true}Q.trigger(this.name,P);Q.trigger(this.name+P.direction,P);if((Q.options.drag_block_vertical&&z.utils.isVertical(P.direction))||(Q.options.drag_block_horizontal&&!z.utils.isVertical(P.direction))){P.preventDefault()}break;case z.EVENT_END:if(this.triggered){Q.trigger(this.name+"end",P)}this.triggered=false;break}}};z.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:false},triggered:false,handler:function q(R,S){if(z.detection.current.name!=this.name&&this.triggered){S.trigger(this.name+"end",R);this.triggered=false;return}if(R.touches.length<2){return}if(S.options.transform_always_block){R.preventDefault()}switch(R.eventType){case z.EVENT_START:this.triggered=false;break;case z.EVENT_MOVE:var Q=Math.abs(1-R.scale);var P=Math.abs(R.rotation);if(Q<S.options.transform_min_scale&&P<S.options.transform_min_rotation){return}z.detection.current.name=this.name;if(!this.triggered){S.trigger(this.name+"start",R);this.triggered=true}S.trigger(this.name,R);if(P>S.options.transform_min_rotation){S.trigger("rotate",R)}if(Q>S.options.transform_min_scale){S.trigger("pinch",R);S.trigger("pinch"+((R.scale<1)?"in":"out"),R)}break;case z.EVENT_END:if(this.triggered){S.trigger(this.name+"end",R)}this.triggered=false;break}}};z.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:false},handler:function g(P,Q){if(Q.options.prevent_default){P.preventDefault()}if(P.eventType==z.EVENT_START){Q.trigger(this.name,P)}}};z.gestures.Release={name:"release",index:Infinity,handler:function L(P,Q){if(P.eventType==z.EVENT_END){Q.trigger(this.name,P)}}};if(typeof module==="object"&&typeof module.exports==="object"){module.exports=z}else{F.Hammer=z;if(typeof F.define==="function"&&F.define.amd){F.define("hammer",[],function(){return z})}}})(this);var Ease={linear:function(e,f,a,h,g){return h*(f/=g)+a},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,m,l){var i=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var i=k/4}else{var i=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-i)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var i=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var i=k/4}else{var i=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-i)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var i=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var i=k/4}else{var i=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-i)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-i)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,i,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}};Class.create("Timeline",{_timeline:{},_frequence:0,_stop:false,_propreties:[],_key_times:[],_onFinish:null,_varTime:{},initialize:function(a){this._frequence=0;this.el=a;this.addProprety(["opacity","x","y","scaleX","scaleY","rotation"]);this._loop()},to:function(a,e,d,b){if(d){a._ease_=d}if(!b){b="set"}this._key_times.push(e);this._timeline[e]=a;this._timeline[e]._cal=b;return this},wait:function(b){var a=this.getLastKey();this.to(a,b,false,"wait");return this},getLastKey:function(){var b=this._key_times[this._key_times.length-1];if(!b){var d={};for(var a=0;a<this._propreties.length;a++){d[this._propreties[a]]=this.el[this._propreties[a]]}return d}return this._timeline[b]},add:function(a,d,b){return this.to(a,d,b,"add")},addProprety:function(a){if(!(a instanceof Array)){a=[a]}for(var b=0;b<a.length;b++){this._propreties.push(a[b])}},loop:function(){var a=this;this.call(function(){a._stop=false;return true})},_initVar:function(){this._varTime={freq:this._frequence,time:0,time_tmp:0,last_t:0,next_t:0,find_next:false}},_loop:function(){var a=this,b;this.el.addLoopListener(function(){if(a._varTime.time===undefined){return}var e=a._varTime._frequence,f=a._varTime.time,h=a._varTime.time_tmp,n=a._varTime.last_t,m=a._varTime.next_t,p=a._varTime.find_next;function k(){var t={};for(var r=0;r<a._propreties.length;r++){t[a._propreties[r]]=+this[a._propreties[r]]}a._timeline["0"]=t}function l(i){var t,r;if(a._timeline[m][i]===undefined){return this[i]}t=a._timeline[m]._cal;r=a._timeline[m][i];switch(t){case"add":r+=a._timeline[n][i];break}return r}function d(i){var w,t,v,r,u;if(a._timeline[m][i]===undefined){return this[i]}w=a._timeline[m]._ease_;v=a._timeline[m]._cal;u=a._timeline[m][i];switch(v){case"add":u+=a._timeline[n][i];break}if(!w){w=Ease.linear}t=w(u,(m-n)-h,a._timeline[n][i],u-a._timeline[n][i],m-n);return t}e=0;var q;if(a._stop){return}e++;if(e>=a._frequence){if(f==0){k.call(this)}if(h==0){p=false;for(var o in a._timeline){if(o>f){n=m?m:0;m=o;p=true;break}}if(!p){a._stop=true;f=0;n=0;h=0;if(a._onFinish){b=a._onFinish.call(this)}if(!b){return}else{k.call(this);m=0}}}h=m-f;if(h!=0){if(a._timeline[m]._cal!="wait"){if(h==1){for(var g=0;g<a._propreties.length;g++){this[a._propreties[g]]=l.call(this,a._propreties[g])}}else{for(var g=0;g<a._propreties.length;g++){this[a._propreties[g]]=d.call(this,a._propreties[g])}}}}f++}a._varTime._frequence=e;a._varTime.time=f;a._varTime.time_tmp=h;a._varTime.last_t=n;a._varTime.next_t=m;a._varTime.find_next=p})},call:function(a){this._initVar();this._onFinish=a;this._stop=false}});Class.create("Animation",{_images:[],_frames:{},_animations:{},_frequence:0,_stop:false,_timeline:null,_onFinish:null,_seq:null,_loop:false,_els:null,el:null,initialize:function(a){this._options=a;this._images=a.images;this._animations=a.animations;this._timeline=a.timeline;if(a.addIn){this.el=a.addIn.scene.createElement();a.addIn.append(this.el);this.add()}},remove:function(a){if(a){this.el=a}this.el.off("canvas:render");return this},add:function(e,h){if(e){this.el=e}var a=this;var d=0;var g=null;var f=0;var b;if(h){this.remove()}this.stop();this.el.addLoopListener(function(){if(a._seq!==b){b=a._seq;d=0;g=null}var y=a._animations[a._seq],p=a._loop=="loop";function v(z){if(y.size){return y.size}var A=Global_CE.Materials.get(z);y.size={width:A.width,height:A.height}}if(y&&!y.frequence){y.frequence=0}if(g==null&&y){g=y.frequence}if(a._stop){if(y){g=y.frequence}d=0;return}g++;if(g>=y.frequence){if(a._images instanceof Array){var n=a._images[f];v(n);this.drawImage(n);f++;if(f>=a._images.length){f=0;if(!p){a._stop=true}}}else{var n=Global_CE.Materials.get(a._images),u=0,r=0;v(a._images);var w;var q=n.width/y.size.width;var o=n.height/y.size.height;var k;var l;function i(D,C){var A=a._images;if(y.patternSize){y.size={width:n.width/y.patternSize.width,height:n.height/y.patternSize.height}}r=parseInt(C/Math.round(n.width/y.size.width));u=(C%Math.round(n.width/y.size.width));var z=y.size.width*u,B=y.size.height*r;D.trigger("animation:draw",C);if(y.image){A=y.image}if(!y.position){y.position={}}if(!y.position.left){y.position.left=0}if(!y.position.top){y.position.top=0}D.drawImage(A,z,B,y.size.width,y.size.height,y.position.left,y.position.top,y.size.width,y.size.height)}function t(){if(a._loop=="stop"){if(y.finish){y.finish.call(a)}a.stop();return true}else{if(a._loop=="remove"){if(a._options.addIn){this.empty()}else{this.remove()}if(y.finish){y.finish.call(a)}a.stop();return true}}return false}if(y.frames[0] instanceof Array){if(y.frames[d]===undefined){d=0;if(t.call(this)){return}}this.empty();y.framesDefault=y.framesDefault||{};if(!y.framesDefault.x){y.framesDefault.x=0}if(!y.framesDefault.y){y.framesDefault.y=0}if(!y.framesDefault.zoom){y.framesDefault.zoom=100}if(!y.framesDefault.opacity){y.framesDefault.opacity=255}if(!y.framesDefault.rotation){y.framesDefault.rotation=0}if(!y.frames[d]){d++;return}for(var m=0;m<y.frames[d].length;m++){w=y.frames[d][m];if(w){l=this.scene.createElement(y.size.width,y.size.height);k=w.pattern-1;l.setOriginPoint("middle");l.x=w.x!=undefined?w.x:y.framesDefault.x;l.y=w.y!=undefined?w.y:y.framesDefault.y;l.scaleX=w.zoom!=undefined?w.zoom/100:y.framesDefault.zoom/100;l.scaleY=w.zoom!=undefined?w.zoom/100:y.framesDefault.zoom/100;l.opacity=w.opacity!=undefined?w.opacity/255:y.framesDefault.opacity/255;l.rotation=w.rotation!=undefined?w.rotation:y.framesDefault.rotation;i(l,k);this.append(l)}}}else{k=y.frames[0]+d;if(k>y.frames[1]){d=0;t.call(this);i(this,y.frames[0])}else{i(this,k)}}d++}g=0}})},isStopped:function(){return this._stop},stop:function(){this._stop=true;return this},play:function(a,b){this._loop=b;this._seq=a;this._stop=false;return this}});var Animation={Timeline:{New:function(){return this["new"].apply(this,arguments)},"new":function(a){return Class["new"]("Timeline",[a])}},Animation:{New:function(){return this["new"].apply(this,arguments)},"new":function(a){return Class["new"]("Animation",[a])}}};var Input={Input:{keyBuffer:[],cacheKeyBuffer:[],_keyFunctions:{},_keyPress:{},_keyUp:{},_keyType:{},_keyPressed:{},_lock:{},_rules:{},_key:function(d,b,f){if(typeof b=="function"){b(d)}else{if(b instanceof Array){for(var a=0;a<b.length;a++){if(d.which==b[a]){if(f){f(d)}}}}else{if(d.which==b){if(f){f(d)}}}}},press:function(b,a){this._press("keyPress",b,a);this.keyUp(b)},clearKeys:function(a){this.press(a,function(){})},keyDown:function(b,a){this._press("keyDown",b,a)},keyUp:function(e,b){var a=this;if(e instanceof Array){for(var d=0;d<e.length;d++){a._keyUp[e[d]]=b}}else{a._keyUp[e]=b}document.onkeyup=function(f){a._keyPress[f.which]=0;a._keyPressed[f.which]=false;if(a._keyUp[f.which]){a._keyUp[f.which](f)}}},_press:function(h,g,d){var a=this;if(typeof g=="string"){g=this._rules[g]}if(g instanceof Array){for(var f=0;f<g.length;f++){e(g[f],h)}}else{e(g,h)}if(this._lock.canvas){var b=this._lock.canvas;b.onkeydown=k;b.onfocus=function(i){document.onkeydown=function(){return false};if(a._lock.onFocus){a._lock.onFocus(i,b)}};b.onblur=function(i){document.onkeydown=null;if(a._lock.onBlur){a._lock.onBlur(i,b)}}}else{document.onkeydown=k}function k(l){var i;if(!a._keyPress[l.which]){a._keyPress[l.which]=0}a._keyPress[l.which]++;if(a._keyPress[l.which]>1&&a._keyType[l.which]=="keyPress"){return}a._keyPressed[l.which]=true;if(a._keyFunctions[l.which]){i=a._keyFunctions[l.which](l)}if(i!==undefined){return i}else{return false}}function e(l,i){a._keyType[l]=i;a._keyFunctions[l]=d}},reset:function(b){this._keyPressed={};if(b){for(var a=0;a<b.length;a++){this._keyFunctions[b[a]]=null}}else{this._keyFunctions={}}},lock:function(a,f,b,d){var e=document.getElementById(a);e.setAttribute("tabindex",1);if(f){e.focus();document.onkeydown=function(){return false}}this._lock.canvas=e;this._lock.onFocus=b;this._lock.onBlur=d},isPressed:function(b){if(!(b instanceof Array)){b=[b]}for(var a=0;a<b.length;a++){if(this._keyPressed[b[a]]){return true}}return false},addKey:function(b,a){Input[b]=a},memorize:function(){this.cacheKeyBuffer=this.keyBuffer},restore:function(){this.keyBuffer=this.cacheKeyBuffer},trigger:function(d,e,a){var f,b,g;if(e=="press"){this.trigger(d,"down");this.trigger(d,"up",a);return}if(this._lock.canvas){b=this._lock.canvas}else{b=document}if(document.createEventObject){f=document.createEventObject();f.keyCode=d;b.fireEvent("onkey"+e,f)}else{if(document.createEvent){f=document.createEvent("Events");f.initEvent("key"+e,true,true);f.which=d;b.dispatchEvent(f)}}if(a){g=document.getElementById(a.id+"-dom");g.focus()}},addRule:function(b,a){this._rules[b]=a},Gamepad:{_listener:{},gamepad:null,_onConnect:null,_onDisconnect:null,_connectState:false,init:function(a,b){this._onConnect=a;this._onDisconnect=b;return this},getState:function(a){this.gamepad=Gamepad.getStates()[a];if(this.gamepad&&!this._connectState){if(this._onConnect){this._onConnect()}this._connectState=true}else{if(!this.gamepad&&this._connectState){if(this._onDisconnect){this._onDisconnect()}this._connectState=false}}},addListener:function(e,d,f){var a=Input.Input;if(typeof d!="function"){var b=d;d=function(){a.trigger(b,"down")};f=function(){a.trigger(b,"up")}}this._listener[e]={onDown:d,onUp:f,state:false}},update:function(){this.getState(0);if(!this.gamepad){return}for(var a in this._listener){if(this.gamepad[a]==1&&!this._listener[a].state){if(this._listener[a].onDown){this._listener[a].onDown()}this._listener[a].state=true}else{if(this.gamepad[a]==0&&this._listener[a].state){if(this._listener[a].onUp){this._listener[a].onUp()}this._listener[a].state=false}}}}},accelerometer:function(b){if(window.DeviceOrientationEvent){window.addEventListener("deviceorientation",function(d){a(d.alpha,d.beta,d.gamma)},false)}else{if(window.OrientationEvent){window.addEventListener("MozOrientation",function(d){a(d.x,d.y,d.z)},false)}}function a(d,f,e){b(d,f,e)}}}};Input.A=65;Input.Z=90;Input.E=69;Input.Q=81;Input.Esc=27;Input.Enter=13;Input.Shift=16;Input.Ctrl=17;Input.Alt=18;Input.Space=32;Input.Back=8;Input.F1=112;Input.F2=113;Input.F11=122;Input.F12=123;Input.Left=37;Input.Up=38;Input.Right=39;Input.Bottom=40;var BISON;(function(n,f){var o=(function(){var u=new n(255);for(var w=0;w<256;w++){u[w]=String.fromCharCode(w)}var y=new n(8),v=new n(8);for(var w=0;w<9;w++){y[w]=~((v[w]=Math.pow(2,w)-1)^255)}var C="",B=0,t=8,z=0,A=0;return{open:function(i){t=8;if(i!==f){A=i.length;z=0;C=i;B=C.charCodeAt(z)}else{B=0;C=""}},close:function(){if(B>0){C+=u[B]}return C},writeRaw:function(i){if(t!==8){C+=u[B];B=0;t=8}C+=i},readRaw:function(i){if(t!==8){z++;B=0;t=8}var E=C.substr(z,i);z+=i;B=C.charCodeAt(z);return E},write:function D(G,F){var H=F-t,E=t<F?t:F,i=t-E;if(H>0){B+=G>>H<<i}else{B+=G<<i}t-=E;if(t===0){C+=u[B];t=8;B=0;if(H>0){D(G&v[H],H)}}},read:function r(F){if(z>=A){return null}var H=F-t,E=t<F?t:F,i=t-E;var G=(B&y[t])>>i;t-=E;if(t===0){B=C.charCodeAt(++z);t=8;if(H>0){G=G<<H|r(H)}}return G}}})();var q=o.write,d=o.read,g=o.writeRaw,e=o.readRaw,l=o.open,p=o.close;function b(B,A){if(typeof B==="number"){var z=B!==(B|0),u=0;if(B<0){B=-B;u=1}q(1+z,3);if(z){var r=1,t=10;while(t<=B){r++;t*=10}r=(8-r)+1;B=Math.round(B*(1000000000/t));while(B/10===((B/10)|0)){B/=10;r--}}if(B<2){q(B,4)}else{if(B<16){q(1,3);q(B,4)}else{if(B<256){q(2,3);q(B,8)}else{if(B<4096){q(3,3);q(B>>8&255,4);q(B&255,8)}else{if(B<65536){q(4,3);q(B>>8&255,8);q(B&255,8)}else{if(B<1048576){q(5,3);q(B>>16&255,4);q(B>>8&255,8);q(B&255,8)}else{if(B<16777216){q(6,3);q(B>>16&255,8);q(B>>8&255,8);q(B&255,8)}else{q(7,3);q(B>>24&255,8);q(B>>16&255,8);q(B>>8&255,8);q(B&255,8)}}}}}}}q(u,1);if(z){q(r,4)}}else{if(typeof B==="string"){var v=B.length;q(3,3);if(v>65535){q(31,5);q(v>>24&255,8);q(v>>16&255,8);q(v>>8&255,8);q(v&255,8)}else{if(v>255){q(30,5);q(v>>8&255,8);q(v&255,8)}else{if(v>28){q(29,5);q(v,8)}else{q(v,5)}}}g(B)}else{if(typeof B==="boolean"){q(+B,5)}else{if(B===null){q(2,5)}else{if(B instanceof n){q(4,3);for(var w=0,v=B.length;w<v;w++){b(B[w])}if(!A){q(6,3)}}else{q(5,3);for(var y in B){b(y);b(B[y])}if(!A){q(6,3)}}}}}}}function m(i){l();b(i,true);q(0,3);q(3,2);return p()}var h=new n(16);for(var k=0;k<16;k++){h[k]=Math.pow(10,k)}function a(w){var A=[],u=-1,y,z,B,t,v=false,D,r,C;l(w);while(true){y=d(3);if(y===0){B=d(2);if(B===2){B=null}else{if(B<2){B=!!B}else{if(B===3){break}}}}else{if(y===1||y===2){switch(d(3)){case 0:B=d(1);break;case 1:B=d(4);break;case 2:B=d(8);break;case 3:B=(d(4)<<8)+d(8);break;case 4:B=(d(8)<<8)+d(8);break;case 5:B=(d(4)<<16)+(d(8)<<8)+d(8);break;case 6:B=(d(8)<<16)+(d(8)<<8)+d(8);break;case 7:B=(d(8)<<24)+(d(8)<<16)+(d(8)<<8)+d(8);break}if(d(1)){B=-B}if(y===2){B/=h[d(4)]}}else{if(y===3){var E=d(5);switch(E){case 31:E=(d(8)<<24)+(d(8)<<16)+(d(8)<<8)+d(8);break;case 30:E=(d(8)<<8)+d(8);break;case 29:E=d(8);break}B=e(E);if(v){D=B;v=false;continue}}else{if(y===4||y===5){v=y===5;B=v?{}:[];if(C===f){C=B}else{if(r){z[D]=B}else{z.push(B)}}z=A[++u]=B;r=!(z instanceof Array);continue}else{if(y===6){z=A[--u];v=r=!(z instanceof Array);continue}}}}}if(r){z[D]=B;v=true}else{if(z!==f){z.push(B)}else{return B}}}return C}if(typeof window==="undefined"){exports.encode=m;exports.decode=a;BISON=exports}else{window.BISON={encode:m,decode:a}}})(Array);if(typeof exports!="undefined"){var CE=require("canvasengine").listen(),Class=CE.Class}Class.create("Marshal",{_pointer:{},_cache:{},_stack_dump:[],_decode:function(b){if(typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"){try{return JSON.parse(b)}catch(a){}}else{return BISON.decode(b)}},_encode:function(b){if(typeof navigator!="undefined"&&navigator.appName=="Microsoft Internet Explorer"){try{return JSON.stringify(b)}catch(a){}}else{return BISON.encode(b)}},exist:function(a){return typeof localStorage!="undefined"&&localStorage[a]},_recursiveData:function(f,l,h){var k,g={},d={},b;h=h||[];if(f instanceof Object){for(var a in f){b=f[a];if(typeof b!="function"&&(CE.Core||CE).inArray(a,h)==-1){if(b instanceof Array){d[a]=[];for(var e=0;e<b.length;e++){d[a][e]=this._recursiveData(b[e],l,h)}}else{if(b instanceof Object){d[a]=this._recursiveData(b,l,h)}else{if(b!==undefined){d[a]=b}}}}}}else{if(typeof f!="function"&&f!==undefined){return f}}if(l=="load"){if(d.__name__){g=Class.New(f.__name__,false);for(var a in d){if(typeof g[a]!="function"){g[a]=d[a]}}}else{g=d}}else{g=d}return g},load:function(b,e){var f,a,d;if(this._pointer[b]===undefined){this._pointer[b]=0}if(this._cache[b]){f=this._cache[b]}else{if(e){f=this._decode(e)||[];this._cache[b]=f}else{if(typeof localStorage!="undefined"){f=this._decode(localStorage[b])||[];this._cache[b]=f}}}a=this._recursiveData(f[this._pointer[b]],"load");if(!e&&!this.exist(b)){return false}this._pointer[b]++;return a},dump:function(b,d,f){var e=[],a={};if(typeof b=="number"||typeof b=="string"||b instanceof Array){a=b}else{a=this._recursiveData(b,"save",f)}this._stack_dump.push(a);if(typeof localStorage!="undefined"){localStorage[d]=this._encode(this._stack_dump)}},getStack:function(a){return !a?this._stack_dump:this._encode(this._stack_dump)},remove:function(a){if(typeof localStorage!="undefined"){localStorage.removeItem(a);return true}return false}});var Marshal=Class.New("Marshal");Class.create("Scrolling",{main_el:null,scroll_el:[],scene:null,freeze:false,initialize:function(d,b,a){this.scene=d;this.tile_h=b;this.tile_w=a},setMainElement:function(a){this.main_el=a},addScroll:function(a){if(!a.screen_x){a.screen_x=0}if(!a.screen_y){a.screen_y=0}if(!a.parallax_x){a.parallax_x=0}if(!a.parallax_y){a.parallax_y=0}this.scroll_el.push(a);if(this.main_el){this.setScreen(a)}return this.scroll_el[this.scroll_el.length-1]},setScreen:function(h,b,a){var d,i;if(!b&&this.main_el){b=this.main_el.x;a=this.main_el.y}var e=this.scene.getCanvas();if(b<=e.width/2){d=0}else{if(b+e.width/2>=h.width){d=-(h.width-e.width)}else{d=-(b-e.width/2+(e.width/2%this.tile_w))}}if(a<=e.height/2){i=0}else{if(a+e.height/2>=h.height){i=-(h.height-e.height)}else{i=-(a-e.height/2+(e.height/2%this.tile_h))}}h.element.x=d;h.element.y=i;var k=this.tile_w/h.speed;var g=this.tile_h/h.speed;h.element.x=Math.floor(h.element.x/k)*k;h.element.y=Math.floor(h.element.y/g)*g;h.screen_x=Math.abs(h.element.x);h.screen_y=Math.abs(h.element.y);var f=this._multipleScreen(h.speed,h.screen_x,h.screen_y);h.screen_x=f.x;h.screen_y=f.y;this.update()},_multipleScreen:function(d,a,f){var e=this.tile_w/d;var b=this.tile_h/d;a=Math.floor(a/e)*e;f=Math.floor(f/b)*b;return{x:a,y:f}},update:function(){var b,e;var f=this.scene.getCanvas();if(this.freeze){return}if(!this.main_el){return}for(var g=0;g<this.scroll_el.length;g++){b=this.scroll_el[g];e={x:b.element.x,y:b.element.y};b.screen_x=this.main_el.x-f.width/2+(f.width/2%this.tile_w);b.screen_y=this.main_el.y-f.height/2+(f.height/2%this.tile_h);var k=Math.abs(e.x);var h=Math.abs(e.y);var d=b.speed;var a=b.speed;if(b.parallax){if(b.screen_x!=b.parallax_x){if(b.screen_x>b.parallax_x){e.x-=d}else{e.x+=d}b.parallax_x=b.screen_x}if(b.screen_y!=b.parallax_y){if(b.screen_y>b.parallax_y){e.y-=a}else{e.y+=a}b.parallax_y=b.screen_y}}else{if(k!=b.screen_x){if(b.screen_x>k){if(k>b.screen_x-d){e.x=-b.screen_x}else{e.x-=d}}else{if(b.screen_x<k){if(k<b.screen_x+d){e.x=-b.screen_x}else{e.x+=d}}}}if(h!=b.screen_y){if(b.screen_y>h){if(h>b.screen_y-a){e.y=-b.screen_y}else{e.y-=a}}else{if(b.screen_y<h){if(h<b.screen_y+a){e.y=-b.screen_y}else{e.y+=a}}}}}if(b.block){if(e.x>0){b.screen_x=e.x=0}else{if(e.x+b.width<f.width){e.x=f.width-b.width;e.x=this._multipleScreen(b.speed,e.x,0).x;b.screen_x=Math.abs(e.x)}}if(e.y>0){b.screen_y=e.y=0}else{if(e.y+b.height<f.height){e.y=f.height-b.height;e.y=this._multipleScreen(b.speed,0,e.y).y;b.screen_y=Math.abs(e.y)}}}if(f.width<=b.width){b.element.x=e.x>>0}if(f.height<=b.height){b.element.y=e.y>>0}}},mouseScroll:function(f,e,d){d=d||{};if(e.height<f.height){f.append(e);return this}var a={};var b=this;e._forceEvent=true;f.beginPath();f.rect(0,0,f.width,f.height);f.clip();f.closePath();e.rect(0,0,e.width,e.height);e.on("dragstart",function(g){a=this.offset();a.time=new Date().getTime();if(d.dragstart){d.dragstart.call(this,g)}});e.on("drag",function(g){if(g.direction=="up"||g.direction=="left"){g.distance=-g.distance}var i=1,h;h=a.top+g.distance*i;if(h>=0){h=0;if(d.onTop){d.onTop.call(this,g)}}else{if(f.height>=(h+this.height)){h=-this.height+f.height;if(d.onBottom){d.onBottom.call(this,g)}}}this.y=h;if(d.drag){d.drag.call(this,g)}});e.on("dragend",function(g){if(d.dragend){d.dragend.call(this,g)}});f.append(e);return this}});var Scrolling={Scrolling:{New:function(){return this["new"].apply(this,arguments)},"new":function(d,b,a){return Class["new"]("Scrolling",[d,b,a])}}};Class.create("Spritesheet",{image:null,_set:{},initialize:function(a,b){this.image=a;if(b){this.set(b)}},set:function(n){var k,a,m,l,h,g,f=Global_CE.Materials.get(this.image,"image");if(!f){return false}for(var b in n){if(b=="grid"){for(var e=0;e<n.grid.length;e++){for(var d=0;d<n.grid[e].set.length;d++){a=n.grid[e].set[d];k=n.grid[e];if(!k.tile){k.tile=[f.width/k.size[0],f.height/k.size[1]]}l=k.tile[1]*parseInt(d/Math.round(k.size[0]));m=k.tile[0]*(d%Math.round(k.size[0]));if(!k.reg){k.reg=[0,0]}h=k.reg[0]||+"0";g=k.reg[1]||+"0";this._set[a]=[m,l,k.tile[0],k.tile[1],0,h,g]}}}else{this._set[b]=n[b]}}},exist:function(a){return this._set[a]?true:false},draw:function(e,i,b){b=b||{};var f=this._set[i];if(!f){throw"Spritesheet "+i+" don\'t exist"}var h=+(b.x||"0")-f[5],g=+(b.y||"0")-f[6],a=b.w||f[2],d=b.h||f[3];e.drawImage(this.image,f[0],f[1],f[2],f[3],h,g,a,d)},pattern:function(d,f,a){if(!this._set[f]){throw"Spritesheet "+f+" don\'t exist"}var e=this._set[f],b=Global_CE.Materials.cropImage(this.image,e[0],e[1],e[2],e[3]);pattern=d.getScene().getCanvas().createPattern(b,a);d.fillStyle=pattern}});var Spritesheet={Spritesheet:{New:function(){return this["new"].apply(this,arguments)},"new":function(a,b){return Class["new"]("Spritesheet",[a,b])}}};Class.create("Window",{border:null,width:0,height:0,bitmap:null,el:null,_content:null,_borders:{},_border_size:{width:0,height:0},initialize:function(e,d,a,b){this.width=d;this.height=a;this.border=b;this.scene=e;if(b){this.border_img=Global_CE.Materials.get(b);this._construct()}else{this.el=this.scene.createElement(this.width,this.height);this._content=this.scene.createElement();this.el.append(this._content)}},_construct:function(){if(!Global_CE.Spritesheet){throw"Add Spritesheet class to use windows"}var f=["corner_upleft","up","corner_upright","left","center","right","corner_bottomleft","bottom","corner_bottomright"],e,a;this.el=this.scene.createElement(this.width,this.height);this._border_size.width=this.border_img.width/3;this._border_size.height=this.border_img.height/3;this.spritesheet=Global_CE.Spritesheet["new"](this.border,{grid:[{size:[3,3],tile:[this._border_size.width,this._border_size.height],set:f}]});this._content=this.scene.createElement();for(var d=0;d<f.length;d++){a=f[d];e=this._borders[a]=this.scene.createElement();if(/^corner/.test(a)){this.spritesheet.draw(e,a)}else{this.spritesheet.pattern(e,a)}this.el.append(e)}this._borders.center.zIndex(0);this.el.append(this._content);this.size(this.width,this.height)},size:function(e,a){var f=this._border_size.width,d=this._border_size.height;function b(g){return(g<0?0:g)}this._borders.up.x=f-1;this._borders.up.fillRect(0,0,e+1-f*2,d);this._borders.corner_upright.x=e-f;this._borders.left.y=d;this._borders.left.fillRect(0,0,f,b(a-d*2));this._borders.right.x=e-f;this._borders.right.y=d;this._borders.right.fillRect(0,0,f,b(a-d*2));this._borders.corner_bottomleft.y=a-d;this._borders.bottom.x=f-1;this._borders.bottom.y=a-d;this._borders.bottom.fillRect(0,0,b(e+1-f*2),d);this._borders.corner_bottomright.x=e-f;this._borders.corner_bottomright.y=a-d;this._borders.center.x=this._content.x=f-1;this._borders.center.y=this._content.y=d;this._borders.center.fillRect(0,0,b(e+3-f*2),b(a-d*2));this.el.width=e;this.el.height=a;this.el.setOriginPoint("middle");return this},position:function(b,e){var a=this.scene.getCanvas(),d;if(b===undefined){return{x:this.el.x,y:this.el.y}}if(e===undefined){if(b=="middle"){this.el.x=a.width/2-this.width/2;this.el.y=a.height/2-this.height/2}else{if(b=="bottom"){this.el.x=a.width/2-this.width/2;this.el.y=a.height-this.height-(a.height*0.03)}else{if(b=="top"){this.el.x=a.width/2-this.width/2;this.el.y=a.height*0.03}else{if(d=b.match(/top+([0-9]+)/)){this.el.x=a.width/2-this.width/2;this.el.y=d[1]}else{if(d=b.match(/bottom-([0-9]+)/)){this.el.x=a.width/2-this.width/2;this.el.y=a.height-d[1]}}}}}}else{this.el.x=b;this.el.y=e}return this},setBackground:function(a,e,b){var d;if(!e){e=0}b=b||1;d=this._borders.center;d.x=e;d.y=e;d.fillStyle=a;d.opacity=b;d.fillRect(0,0,this.width-e*2,this.height-e*2);return this},getBox:function(){return this.el},getContent:function(){return this._content},open:function(a){a.append(this.el);return this},remove:function(){this.el.remove();return this},cursor:{array_elements:null,el:null,index:0,params:{},_enable:true,init:function(a,b,d){if(a instanceof Array){b=a;a=null}this.params=CanvasEngine.extend(this.params,d);this.array_elements=b;this.el=a;this.update();return this},refresh:function(a,b){this.array_elements=a;this.setIndex(this.index,b);this.update();return this},remove:function(){this.el.remove();return this},assignKeys:function(e){var b=this;if(e){Global_CE.Input.reset()}Global_CE.Input.press([Input.Up],function(){if(!b._enable){return}b.setIndex(b.index-1)});Global_CE.Input.press([Input.Bottom],function(){if(!b._enable){return}b.setIndex(b.index+1)});function f(){if(!b._enable){return}var g=b.array_elements[b.index];if(b._select&&g){b._select.call(b,g)}}Global_CE.Input.press(this.params.enter,f);function a(g){var h=this.array_elements[g];if(h.width&&h.height&&this._enable){h.forceEvent();h.on("touch",function(){b.setIndex(g);b.update();f()})}}for(var d=0;d<this.array_elements.length;d++){a.call(this,d)}return this},getCurrentElement:function(){return this.array_elements[this.index]},setIndex:function(a,d){var b=this.array_elements.length;if(a<0){a=this.params.reverse?b-1:0}else{if(a>=b){a=this.params.reverse?0:b-1}}this.index=a;this.update(true);return true},update:function(a){if(this.el){if(this.array_elements.length==0){this.el.hide();return}else{this.el.show()}}var b=this.getCurrentElement(),d;if(b){d=b.position();if(this.el){this.el.x=d.left;this.el.y=d.top}if(a&&this._onchange&&this.array_elements.length>0){this._onchange.call(this,b)}}},enable:function(a){if(a!=undefined){this._enable=a;if(a){this.assignKeys()}else{Global_CE.Input.reset([Input.Enter,Input.Up,Input.bottom])}}return this._enable},change:function(a){this._onchange=a;return this},select:function(a){this._select=a;return this}}});var Window={Window:{New:function(){return this["new"].apply(this,arguments)},"new":function(e,d,a,b){return Class["new"]("Window",[e,d,a,b])}}};if(typeof exports!="undefined"){var CE=require("canvasengine").listen(),CanvasEngine=false,Class=CE.Class}Class.create("Point",{initialize:function(b,a){this.x=b;this.y=a}});Class.create("Polygon",{initialize:function(a){this.points=[];this.center=a},addPoint:function(a){this.points.push(a)},addAbsolutePoint:function(a){this.points.push({x:a.x-this.center.x,y:a.y-this.center.y})},getNumberOfSides:function(){return this.points.length},rotate:function(b){for(var d=0;d<this.points.length;d++){var a=this.points[d].x;var e=this.points[d].y;this.points[d].x=Math.cos(b)*a-Math.sin(b)*e;this.points[d].y=Math.sin(b)*a+Math.cos(b)*e}},containsPoint:function(a){var l=this.points.length;var n=a.x;var m=a.y;var g=new Array();for(var b=0;b<this.points.length;b++){g.push(this.points[b].x+this.center.x)}var f=new Array();for(var k=0;k<this.points.length;k++){f.push(this.points[k].y+this.center.y)}var e,d=0;var h=false;for(e=0,d=l-1;e<l;d=e++){if(((f[e]>m)!=(f[d]>m))&&(n<(g[d]-g[e])*(m-f[e])/(f[d]-f[e])+g[e])){h=!h}}return h},intersectsWith:function(g){var f=Class.New("Point");var w,p,n,m,l;var e,v;var b=null;var a=99999999;for(e=0;e<this.getNumberOfSides();e++){if(e==0){f.x=this.points[this.getNumberOfSides()-1].y-this.points[0].y;f.y=this.points[0].x-this.points[this.getNumberOfSides()-1].x}else{f.x=this.points[e-1].y-this.points[e].y;f.y=this.points[e].x-this.points[e-1].x}w=Math.sqrt(f.x*f.x+f.y*f.y);f.x/=w;f.y/=w;p=n=this.points[0].x*f.x+this.points[0].y*f.y;for(v=1;v<this.getNumberOfSides();v++){w=this.points[v].x*f.x+this.points[v].y*f.y;if(w>n){n=w}else{if(w<p){p=w}}}w=this.center.x*f.x+this.center.y*f.y;p+=w;n+=w;m=l=g.points[0].x*f.x+g.points[0].y*f.y;for(v=1;v<g.getNumberOfSides();v++){w=g.points[v].x*f.x+g.points[v].y*f.y;if(w>l){l=w}else{if(w<m){m=w}}}w=g.center.x*f.x+g.center.y*f.y;m+=w;l+=w;if(n<m||p>l){return false}else{var r=(n>m?n-m:l-p);if(r<a){a=r;b={x:f.x,y:f.y}}}}for(e=0;e<g.getNumberOfSides();e++){if(e==0){f.x=g.points[g.getNumberOfSides()-1].y-g.points[0].y;f.y=g.points[0].x-g.points[g.getNumberOfSides()-1].x}else{f.x=g.points[e-1].y-g.points[e].y;f.y=g.points[e].x-g.points[e-1].x}w=Math.sqrt(f.x*f.x+f.y*f.y);f.x/=w;f.y/=w;p=n=this.points[0].x*f.x+this.points[0].y*f.y;for(v=1;v<this.getNumberOfSides();v++){w=this.points[v].x*f.x+this.points[v].y*f.y;if(w>n){n=w}else{if(w<p){p=w}}}w=this.center.x*f.x+this.center.y*f.y;p+=w;n+=w;m=l=g.points[0].x*f.x+g.points[0].y*f.y;for(v=1;v<g.getNumberOfSides();v++){w=g.points[v].x*f.x+g.points[v].y*f.y;if(w>l){l=w}else{if(w<m){m=w}}}w=g.center.x*f.x+g.center.y*f.y;m+=w;l+=w;if(n<m||p>l){return false}else{var r=(n>m?n-m:l-p);if(r<a){a=r;b={x:f.x,y:f.y}}}}function h(i,k){return{x:k.x+i.center.x,y:k.y+i.center.y}}var z,y,q=[],d=[],u=0;function t(D,o,k){var C,B,A,i,E=[];for(C=0;C<g.getNumberOfSides();C++){B=h(g,g.points[C]);A=h(g,g.points[C+1]?g.points[C+1]:g.points[0]);i=Polygon.intersectLineLine(o,k,B,A);if(i=="Coincident"){E.push({sides:C})}d[u].push(i)}u++;return E}for(v=0;v<this.getNumberOfSides();v++){d[u]=[];z=h(this,this.points[v]);y=h(this,this.points[v+1]?this.points[v+1]:this.points[0]);q.push(t(null,z,y))}return{overlap:a+0.001,axis:b,lines:d,coincident:q}}});var Polygon={};Polygon.intersectLineLine=function(f,d,k,i){var g=(i.x-k.x)*(f.y-k.y)-(i.y-k.y)*(f.x-k.x);var h=(d.x-f.x)*(f.y-k.y)-(d.y-f.y)*(f.x-k.x);var e=(i.y-k.y)*(d.x-f.x)-(i.x-k.x)*(d.y-f.y);if(e!=0){var b=g/e;var a=h/e;if(0<=b&&b<=1&&0<=a&&a<=1){return{x:f.x+b*(d.x-f.x),y:f.y+b*(d.y-f.y)}}else{return false}}else{if(g==0||h==0){return"Coincident"}else{return"Parallel"}}};Class.create("EntityModel",{x:0,y:0,_memorize:{x:0,y:0},hitState:{over:0,out:0},_polygon:{},_frame:"0",position:function(a,d){if(a!==undefined&&d!==undefined){this.x=a;this.y=d;var b=this._polygon[this._frame];if(b){b.center.x=this.x;b.center.y=this.y}}return{x:this.x,y:this.y}},savePosition:function(){this._memorize.x=this.x;this._memorize.y=this.y},restorePosition:function(){this.x=this._memorize.x;this.y=this._memorize.y},polygon:function(d){if(d instanceof Array){d={"0":d}}for(var b in d){this._polygon[b]=Class.New("Polygon",[{x:d[b][0][0],y:d[b][0][1]}]);for(var a=0;a<d[b].length;a++){this._polygon[b].addPoint({x:d[b][a][0],y:d[b][a][1]})}}},rect:function(a,e,b,d){if(!b&&!d){b=a;d=e;a=0;e=0}if(!d){d=b}this.polygon([[a,e],[a+b,e],[a+b,e+d],[a,e+d]])},hit:function(b){var a=this._polygon[this._frame].intersectsWith(b._polygon[b._frame]);this.hitState.result=a;if(a){this.hitState.out=0;this.hitState.over++}else{if(this.hitState.over>0){this.hitState.out=1;this.hitState.over=0}else{this.hitState.out=0;this.hitState.over=0}}return this.hitState},getPoints:function(a){a=a||this._frame;return this._polygon[a].points},getPolygonReg:function(a){a=a||this._frame;return this._polygon[a].center},getPolygon:function(a){a=a||this._frame;return this._polygon[a]},frame:function(a){if(a){this._frame=a}return this._frame},});Class.create("Entity",{stage:null,params:{},el:null,mode:null,hit_entities:[],initialize:function(b,d,a){if(a===undefined){a=true}this.stage=b;this.params=d;this.el=this.stage.getScene().createElement();if(a){this.setModel(Class.New("EntityModel"))}this.testHit()},setModel:function(a){this.model=a},position:function(a,e,b){var d=this.model.position(a,e);if(a!==undefined){this.el.x=d.x;this.el.y=d.y}return{x:d.y,y:d.y}},move:function(a,d){var b=this.model.position();if(!a){a=0}if(!d){d=0}return this.position(a+b.x,d+b.y,true)},polygon:function(a){this.model.polygon(a)},rect:function(a,e,b,d){this.model.rect(a,e,b,d);this.el.width=b;this.el.height=d},onHit:function(a,b,d){this.hit_entities=this.hit_entities.concat(b);this.el.on("entity:hit:"+a,d)},testHit:function(){var a=this;this.el.attr("entity:testHit",function(){a.hit(a.hit_entities)})},testAnimHit:function(){var a=this;this.el.on("animation:draw",function(b){})},hit:function(f,g){var e,a=this;function b(h){if(g){g.call(a,h,a.el)}a.el.trigger("entity:hit:"+h,[a.el])}for(var d=0;d<f.length;d++){e=this.model.hit(f[d].model);if(e.over==1){b("over")}else{if(e.out==1){b("out")}}}}});var Matrix={};Class.create("Grid",{_rows:0,_cols:0,cell:{width:0,height:0,prop:[],},_matrix:null,_transform:null,_func:null,initialize:function(a,b){if(a instanceof Array){this._matrix=a;this.cell.prop=a;b=a[0].length;a=a.length}this._rows=a;this._cols=b},transform:function(a){this._func=a},convert:function(a,b){if(!this._func){return{x:a,y:b}}return this._func.call(this,a,b)},setPropertyCell:function(a){if(typeof(PF)!="undefined"){this._pf_grid=false;this._pf_prop=(CanvasEngine||CE.Core).rotateMatrix(a)}this.cell.prop=a},getPropertyByCell:function(a,b){if(!this.cell.prop[a]){return undefined}return this.cell.prop[a][b]},setPropertyByCell:function(a,b,d){if(!this.cell.prop[a]){return undefined}this.cell.prop[a][b]=d;if(typeof(PF)!="undefined"){this._pf_grid=false;this._pf_prop=(CanvasEngine||CE.Core).rotateMatrix(this.cell.prop)}return this},getPropertyByPos:function(b,d){var a=this.getCellByPos(b,d);return this.getPropertyByCell(a.col,a.row)},testCell:function(l,h,f){f=f||{};if(!h.getPolygon){h=h.model}var n=[],b=h.getPolygon(),m=this;function g(o,p){return{x:p.x+o.center.x,y:p.y+o.center.y}}function e(w,q,p,o){var u,A,y,C=[],t=0,B,r=[],z=null,v={};for(u=0;u<o.getNumberOfSides();u++){A=g(o,o.points[u]);y=g(o,o.points[u+1]?o.points[u+1]:o.points[0]);B=Polygon.intersectLineLine(q,p,A,y);if(B=="Coincident"){if(q.x==A.x&&q.y==A.y){z={x:q.x,y:q.y}}else{if(p.x==y.x&&p.y==y.y){z={x:p.x,y:p.y}}else{if(q.x==y.x&&q.y==y.y){z={x:q.x,y:q.y}}else{if(p.x==A.x&&p.y==A.y){z={x:p.x,y:p.y}}}}}r.push({sides:u,points:z})}}if(true){return r}else{v[w]=r;return v}}function k(o){return{x:o.x*m.cell.width,y:o.y*m.cell.height}}if(!l.getPolygon){h=h.model}var i=[{y:l.row,x:l.col},{y:l.row,x:l.col+1},{y:l.row+1,x:l.col+1},{y:l.row+1,x:l.col}];var d,a;for(j=0;j<i.length;j++){d=k(i[j]);a=k(i[j+1]?i[j+1]:i[0]);n.push(e(null,d,a,b))}return n},getEntityCells:function(k,g){var l,h,d,q,e,a,n,m,b=[],t={min_x:99999999,max_x:0,min_y:99999999,max_y:0};g=g||{};if(k.model){q=k.model.getPoints();e=k.model.getPolygonReg();a=k.model.getPolygon()}else{q=k.getPoints();e=k.getPolygonReg();a=k.getPolygon()}for(l=0;l<q.length;l++){d=q[l];n=d.x+e.x;m=d.y+e.y;if(n<t.min_x){t.min_x=n}if(n>t.max_x){t.max_x=n}if(m<t.min_y){t.min_y=m}if(m>t.max_y){t.max_y=m}}var o=[this.getCellByPos(t.min_x,t.min_y),this.getCellByPos(t.max_x,t.min_y),this.getCellByPos(t.max_x,t.max_y),this.getCellByPos(t.min_x,t.max_y)];var f=o[2].row-o[0].row,r=o[1].col-o[0].col;for(l=0;l<r-1;l++){for(h=0;h<f-1;h++){o.push({row:o[0].row+h,col:o[0].col+l})}}return{cells:o}},getCellByPos:function(a,e){if(this.cell.width==0||this.cell.height==0){throw"Set the size of the cell prior with setCellSize method"}var b=Math.floor(this.convert(a,e).x/this.cell.width),d=Math.floor(this.convert(a,e).y/this.cell.height);return{col:b,row:d}},setCellSize:function(a,b){this.cell.width=a;this.cell.height=b},getRows:function(){return this._rows},getCols:function(){return this._cols},getNbCell:function(){return this.getRows()*this.getCols()},passableCell:function(h,g,t,o){o=o||[];var k=this._cols;var z=this._rows;var m=this.cell.prop;var p=[];function d(){for(var E=0;E<k*2+1;E++){p[E]=[];for(var D=0;D<k*2+1;D++){p[E][D]=-1}}var y=Math.floor(p.length/2);p[y][y]=0}var A=[];var b=[[h,g]];var l=0;var f=b[0][0]-k;var e=b[0][1]-k;var B=[];var n=0;d();function w(i,E){for(var D=0;D<o.length;D++){if(o[D][0]==i&&o[D][1]==E){return true}}return false}while(!b.length==0&&l<t){A=[];for(var r=0;r<b.length;r++){var v=b[r][0];var u=b[r][1];var a=v;var C=u;for(var q=0;q<4;q++){switch(q){case 0:if(m[v][u+1]!=undefined&&m[v][u+1]==n&&!w(v,u+1)&&p[a][C+1]==-1){A.push([v,u+1]);B.push([v,u+1]);p[a][C+1]=0}break;case 1:if(m[v+1]!=undefined&&m[v+1][u]!=undefined&&m[v+1][u]==n&&!w(v+1,u)&&p[a+1][C]==-1){A.push([v+1,u]);B.push([v+1,u]);p[a+1][C]=0}break;case 2:if(m[v][u-1]!=undefined&&m[v][u-1]==n&&!w(v,u-1)&&p[a][C-1]==-1){A.push([v,u-1]);B.push([v,u-1]);p[a][C-1]=0}break;case 3:if(m[v-1]!=undefined&&m[v-1][u]!=undefined&&m[v-1][u]==n&&!w(v-1,u)&&p[a-1][C]==-1){A.push([v-1,u]);B.push([v-1,u]);p[a-1][C]=0}break}}}b=A;l+=1}return B},pathfinding:function(d,g,b,f,e,a){e=e||"AStarFinder";if(!this._pf_grid){this._pf_grid=new PF.Grid(this._rows,this._cols,this._pf_prop)}if(d===undefined){return this._pf_grid}return new PF[e](a).findPath(d,g,b,f,this._pf_grid.clone())}});var Hit={Grid:{"new":function(a,b){return Class.New("Grid",[a,b])}}};if(typeof exports!="undefined"){exports.Class=Hit}Class.create("Effect",{scene:null,el:null,canvas:null,initialize:function(b,a){this.scene=b;this.el=a;this.canvas=this.scene.getCanvas();if(!Global_CE.Timeline){throw"Add Timeline class to use effects"}return this},screenFlash:function(a,f,g){var d=this.scene.createElement(),b=this.scene.getCanvas();d.fillStyle=a;d.fillRect(0,0,b.width,b.height);d.opacity=0.8;this.scene.getStage().append(d);d.zIndex(-1);var e=Global_CE.Timeline["new"](d);e.to({opacity:"0"},f).call(function(){d.remove();if(g){g()}})},blink:function(d,b,f){var e=0;var a=function(){d--;e++;if(e>=b){e=0;this.toggle()}if(d<=0){this.off("canvas:render",a);this.show();if(f){f()}}};this.el.on("canvas:render",a)},shake:function(d,e,h,b,i){if(typeof b=="function"){i=b;b=false}var g=0,f=1;b=b||"x";var a=function(){var k=(d*e*f)/10;if(h<=1&&g*(g+k)<0){g=0}else{g+=k}if(g>d*2){f=-1}if(g<-d*2){f=1}if(h>=1){h-=1}if(/x/.test(b)){this.x=g}if(/y/.test(b)){this.y=g}if(h==0){this.off("canvas:render",a);if(i){i()}}console.log(k)};this.el.on("canvas:render",a)},changeScreenColorTone:function(a,e,g,d,f){var b=false;if(this.tone){this.tone.remove();delete this.tone;b=true;if(a=="reset"){return}}this.tone=this.scene.createElement(),canvas=this.scene.getCanvas();this.tone.fillStyle=a;this.tone.fillRect(0,0,canvas.width,canvas.height);this.tone.opacity=0;this.tone.globalCompositeOperation=g;this.scene.getStage().append(this.tone);this.tone.zIndex(-1);if(!b){this.tone.opacity=0;if(e>0){Global_CE.Timeline["new"](this.tone).to({opacity:d},e).call(f)}else{this.tone.opacity=d}}},_weather:function(i,b){if(b.intensity=="stop"){clearInterval(this._weather_.timer);this._weather_.state="stop";return}var a=b.intensity||100;var e=0;var f=this.scene.getStage(),m=this;this._weather_={number:0,numberStop:0,state:"loop"};var k=this.el.width||this.canvas.width,d=this.el.height||this.canvas.height;var l=setInterval(function(){if(m._weather_.number==a){clearInterval(l);return}var n=m.scene.createElement();n.x=CanvasEngine.random(0,k);n.y=-10;var h;if(i=="rain"){n.attr("drift",0);n.attr("speed",CanvasEngine.random(4,6))*8;n.width=n.height=CanvasEngine.random(2,6)*5;h=m.canvas.createRadialGradient(n.height/2,n.height/2,0,n.height/2,n.height/2,n.height);h.addColorStop(0,"rgba(125, 125, 255, 1)");h.addColorStop(1,"rgba(125, 125, 255, 0)");n.beginPath();n.moveTo(0,0);n.lineTo(e,n.height);n.strokeStyle=h;n.stroke()}else{if(i="snow"){n.attr("drift",Math.random());n.attr("speed",CanvasEngine.random(1,6));n.width=n.height=CanvasEngine.random(2,6);if(b.use_gradient){h=m.canvas.createRadialGradient(0,0,0,0,0,n.width);h.addColorStop(0,"rgba(255, 255, 255, 1)");h.addColorStop(1,"rgba(255, 255, 255, 0)")}else{h="white"}n.fillStyle=h;n.fillCircle()}}n.name="weather";m.el.append(n);m._weather_.number++},200);this._weather_.timer=l;var g=function(h){if(h.name!="weather"){return}if(m._weather_.state=="finish"){m.el.empty();m.el.off("canvas:refresh",g);return}if(h.attr("flake_state")=="stop"){return}if(h.y<d){h.y+=h.attr("speed")}if(h.y>d-3){h.y=i=="snow"?-5:-30;if(m._weather_.state=="stop"){h.attr("flake_state","stop");m._weather_.numberStop++;if(m._weather_.number==m._weather_.numberStop){m._weather_.state="finish"}return}}h.x+=h.attr("drift");if(h.x>k){h.x=0}};this.el.on("canvas:refresh",g);return this},rain:function(a){return this._weather("rain",{intensity:a})},snow:function(a,b){return this._weather("snow",{intensity:a,use_gradient:b})},storm:function(a,f,d){var b=this;d=d||"#FCFFE6";this.rain(a);if(a=="stop"){return this}function e(){var g=CanvasEngine.random(4,10);setTimeout(function(){if(b._weather_.state=="loop"){if(f){f()}b.screenFlash(d,10);e()}},g*1000)}e()},particles:function(){}});var Effect={Effect:{New:function(){return this["new"].apply(this,arguments)},"new":function(b,a){return Class["new"]("Effect",[b,a])}}};Class.create("Text",{scene:null,text:"",el:null,_family:null,_style:{size:"20px",family:"Arial",weight:"normal",style:"normal",variant:"normal",color:"#000",transform:"none",decoration:"none",border:"none",lineHeight:25,shadow:null,textBaseline:"alphabetic",lineWidth:null},lines:[],initialize:function(a,b){this.scene=a;this.construct(b)},construct:function(a){a=""+a;this.el=this.scene.createElement();a=this._transformHTML(a);this.text=a.split("\\n");this.lines=[]},_transformHTML:function(a){a=a.replace(/<br>/g,"\\n");return a},setImageText:function(d,g,b,a){var e=this.scene.createElement();if(!Global_CE.Spritesheet){throw"Add Spritesheet class to use setImageText method"}a=a||{rows:1,cols:1};var f=Global_CE.Spritesheet.New(d,{grid:[{size:a,tile:[b.width,b.height],set:g}]});this._family=f},style:function(b){if(b.size&!b.lineHeight){b.lineHeight=b.size}for(var a in b){this._style[a]=b[a]}return this},draw:function(k,m,l,t){if(t&&!Global_CE.Timeline){throw"Add Timeline class to use effects"}if(!t){t={}}if(!m){m=0}if(!l){l=0}var q=this._style,B,p,A,a=0,h,g="",f;var d=this.scene.getCanvas(),u=this;this.el.x=m;this.el.y=l;function C(y,i,n){h=parseInt(q.lineHeight);h*=parseInt(q.size)/20;a=h*y;i.font=q.style+" "+q.weight+" "+q.variant+" "+q.size+" "+q.family;i.fillStyle=q.color;i.textBaseline=q.textBaseline;if(q.shadow){f=q.shadow.match(/(-?[0-9]+) (-?[0-9]+) ([0-9]+) ([#a-zA-Z0-9]+)/);if(f){i.shadowOffsetX=f[1];i.shadowOffsetY=f[2];i.shadowBlur=f[3];i.shadowColor=f[4]}}i.fillText(n,0,a);if(q.border!="none"){B=q.border.match(/([0-9]+)px ([#a-zA-Z0-9]+)/);i.font=q.style+" "+q.weight+" "+q.variant+" "+(q.size+B[1])+" "+q.family;i.strokeStyle=B[2];i.strokeText(n,0,a)}return i}function r(y,n){var i=u.scene.createElement();C(y,i,n);u.lines.push({text:n,el:i,chars:[]});i.opacity=0}function b(K,n,H){var L=this.lines[K].el;if(n>=this.lines[K].text.length){H();for(var G=0;G<this.lines[K].chars.length;G++){this.lines[K].chars[G].el.remove()}this.el.append(L);L.opacity=1;this.lines[K].el.opacity=1;if(t._char.onFinish){t._char.onFinish()}return}var F=this.scene.createElement(),I=this.lines[K].text[n],y=d.measureText(I).width,J=this;C(K,F,I);F.x=n*y;F.opacity=0;this.el.append(F);this.lines[K].chars.push({_char:I,el:F});Global_CE.Timeline["new"](F).to({opacity:1},t._char.frames).call(function(){if(t._char.onEffect){t._char.onEffect(I,F)}b.call(J,K,n+1,H)})}function z(y){var i=this,n;if(y>=this.lines.length){if(t.line&&t.line.onFinish){t.line.onFinish()}return}n=this.lines[y].el;if(t.line){this.el.append(n);Global_CE.Timeline["new"](n).to({opacity:1},t.line.frames).call(function(){if(t.line.onEffect){t.line.onEffect(i.lines[y].text,n)}z.call(i,y+1)})}else{if(t._char){b.call(this,y,0,function(){z.call(i,y+1)})}else{n.opacity=1;this.el.append(n);z.call(this,y+1)}}}var A,E,o,v,e=0;for(var D=0;D<this.text.length;D++){p=this.text[D];if(q.lineWidth){o=d.measureText(p,q.size,q.family).width;g="";v=p.split(" ");for(var w=0;w<v.length;w++){E=g+v[w]+" ";A=d.measureText(E,q.size,q.family);o=A.width;if(o>q.lineWidth){r(e,g);g=v[w]+" ";e++}else{g=E}}if(o<q.lineWidth){r(e,g);e++}}else{r(D,p)}}z.call(this,0);k.append(this.el);this.parent=k;this.pos={x:m,y:l};return this},refresh:function(a){if(!this.parent){throw"Use \'draw\' method before"}this.parent.empty();this.construct(a);this.draw(this.parent,this.pos.x,this.pos.y);return this},getNumberLines:function(){return this.lines.length}});var Text={Text:{New:function(){return this["new"].apply(this,arguments)},"new":function(a,b){return Class["new"]("Text",[a,b])}}};\n';
},function(e,t,n){(function(t,n){!function(t){"use strict";function i(e,t,n,i){var r=Object.create((t||a).prototype),s=new p(i||[]);return r._invoke=h(e,n,s),r}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function a(){}function s(){}function o(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){this.arg=e}function u(e){function t(n,i,a,s){var o=r(e[n],e,i);if("throw"!==o.type){var c=o.arg,u=c.value;return u instanceof l?Promise.resolve(u.arg).then(function(e){t("next",e,a,s)},function(e){t("throw",e,a,s)}):Promise.resolve(u).then(function(e){c.value=e,a(c)},s)}s(o.arg)}function i(e,n){function i(){return new Promise(function(i,r){t(e,n,i,r)})}return a=a?a.then(i,i):i()}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var a;this._invoke=i}function h(e,t,n){var i=S;return function(a,s){if(i===P)throw new Error("Generator is already running");if(i===k){if("throw"===a)throw s;return m()}for(;;){var o=n.delegate;if(o){if("return"===a||"throw"===a&&o.iterator[a]===v){n.delegate=null;var c=o.iterator["return"];if(c){var l=r(c,o.iterator,s);if("throw"===l.type){a="throw",s=l.arg;continue}}if("return"===a)continue}var l=r(o.iterator[a],o.iterator,s);if("throw"===l.type){n.delegate=null,a="throw",s=l.arg;continue}a="next",s=v;var u=l.arg;if(!u.done)return i=C,u;n[o.resultName]=u.value,n.next=o.nextLoc,n.delegate=null}if("next"===a)n.sent=n._sent=s;else if("throw"===a){if(i===S)throw i=k,s;n.dispatchException(s)&&(a="next",s=v)}else"return"===a&&n.abrupt("return",s);i=P;var l=r(e,t,n);if("normal"===l.type){i=n.done?k:C;var u={value:l.arg,done:n.done};if(l.arg!==T)return u;n.delegate&&"next"===a&&(s=v)}else"throw"===l.type&&(i=k,a="throw",s=l.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function g(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(_.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=v,r.done=!0,r};return i.next=i}}return{next:m}}function m(){return{value:v,done:!0}}var v,_=Object.prototype.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",w=y.toStringTag||"@@toStringTag",x="object"==typeof e,E=t.regeneratorRuntime;if(E)return void(x&&(e.exports=E));E=t.regeneratorRuntime=x?e.exports:{},E.wrap=i;var S="suspendedStart",C="suspendedYield",P="executing",k="completed",T={},I=o.prototype=a.prototype;s.prototype=I.constructor=o,o.constructor=s,o[w]=s.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(I),e},E.awrap=function(e){return new l(e)},c(u.prototype),E.async=function(e,t,n,r){var a=new u(i(e,t,n,r));return E.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},c(I),I[b]=function(){return this},I[w]="Generator",I.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},E.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return a.type="throw",a.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],a=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=_.call(r,"catchLoc"),o=_.call(r,"finallyLoc");if(s&&o){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&_.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?this.next=r.finallyLoc:this.complete(a),T},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),T}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},T}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(405))},function(e,t){e.exports=function(e){"undefined"!=typeof execScript?execScript(e):eval.call(null,e)}},function(e,t,n){n(408)(n(406))},function(e,t,n,i){var r=n(i);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n,i,r,a){var s=n(i),o=n(r),c=n(a);e.exports=function(e){return function(t,n,i){var r,a=s(t),l=o(a.length),u=c(i,l);if(e&&n!=n){for(;l>u;)if(r=a[u++],r!=r)return!0}else for(;l>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n,i,r){var a=n(i),s=n(r)("toStringTag"),o="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),s))?n:o?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n,i,r){"use strict";var a=n(i),s=n(r);e.exports=function(e,t,n){t in e?a.f(e,t,s(0,n)):e[t]=n}},function(e,t,n,i){var r=n(i);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n,i){e.exports=!n(i)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n,i,r){var a=n(i),s=n(r).document,o=a(s)&&a(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},function(e,t,n,i,r,a){var s=n(i),o=n(r),c=n(a);e.exports=function(e){var t=s(e),n=o.f;if(n)for(var i,r=n(e),a=c.f,l=0;r.length>l;)a.call(e,i=r[l++])&&t.push(i);return t}},function(e,t,n,i,r,a){var s=n(i),o=n(r);e.exports=n(a)?function(e,t,n){return s.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n,i){e.exports=n(i).document&&document.documentElement},function(e,t,n,i,r,a){e.exports=!n(i)&&!n(r)(function(){return 7!=Object.defineProperty(n(a)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n,i){var r=n(i);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n,i,r){var a=n(i),s=n(r)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[s]===e)}},function(e,t,n,i){var r=n(i);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n,i){var r=n(i);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var s=e["return"];throw void 0!==s&&r(s.call(e)),a}}},function(e,t,n,i,r,a,s,o){"use strict";var c=n(i),l=n(r),u=n(a),h={};n(s)(h,n(o)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=c(h,{next:l(1,n)}),u(e,t+" Iterator")}},function(e,t,n,i,r,a,s,o,c,l,u,h,f){"use strict";var d=n(i),p=n(r),g=n(a),m=n(s),v=n(o),_=n(c),y=n(l),b=n(u),w=n(h),x=n(f)("iterator"),E=!([].keys&&"next"in[].keys()),S="@@iterator",C="keys",P="values",k=function(){return this};e.exports=function(e,t,n,i,r,a,s){y(n,t,i);var o,c,l,u=function(e){if(!E&&e in I)return I[e];switch(e){case C:return function(){return new n(this,e)};case P:return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",f=r==P,T=!1,I=e.prototype,M=I[x]||I[S]||r&&I[r],R=M||u(r),A=r?f?u("entries"):R:void 0,O="Array"==t?I.entries||M:M;if(O&&(l=w(O.call(new e)),l!==Object.prototype&&(b(l,h,!0),d||v(l,x)||m(l,x,k))),f&&M&&M.name!==P&&(T=!0,R=function(){return M.call(this)}),d&&!s||!E&&!T&&I[x]||m(I,x,R),_[t]=R,_[h]=k,r)if(o={values:f?R:u(P),keys:a?R:u(C),entries:A},s)for(c in o)c in I||g(I,c,o[c]);else p(p.P+p.F*(E||T),t,o);return o}},function(e,t,n,i){var r=n(i)("iterator"),a=!1;try{var s=[7][r]();s["return"]=function(){a=!0},Array.from(s,function(){throw 2})}catch(o){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},e(i)}catch(o){}return n}},function(e,t,n,i,r){var a=n(i),s=n(r);e.exports=function(e,t){for(var n,i=s(e),r=a(i),o=r.length,c=0;o>c;)if(i[n=r[c++]]===t)return n}},function(e,t,n,i,r,a,s,o){var c=n(i)("meta"),l=n(r),u=n(a),h=n(s).f,f=0,d=Object.isExtensible||function(){return!0},p=!n(o)(function(){return d(Object.preventExtensions({}))}),g=function(e){h(e,c,{value:{i:"O"+ ++f,w:{}}})},m=function(e,t){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!u(e,c)){if(!d(e))return"F";if(!t)return"E";g(e)}return e[c].i},v=function(e,t){if(!u(e,c)){if(!d(e))return!0;if(!t)return!1;g(e)}return e[c].w},_=function(e){return p&&y.NEED&&d(e)&&!u(e,c)&&g(e),e},y=e.exports={KEY:c,NEED:!1,fastKey:m,getWeak:v,onFreeze:_}},function(e,t,n,i,r,a,s,o,c){var l=n(i),u=n(r),h=n(a),f=n(s)("IE_PROTO"),d=function(){},p="prototype",g=function(){var e,t=n(o)("iframe"),i=h.length,r="<",a=">";for(t.style.display="none",n(c).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),g=e.F;i--;)delete g[p][h[i]];return g()};e.exports=Object.create||function(e,t){var n;return null!==e?(d[p]=l(e),n=new d,d[p]=null,n[f]=e):n=g(),void 0===t?n:u(n,t)}},function(e,t,n,i,r,a,s){var o=n(i),c=n(r),l=n(a),u=Object.defineProperty;t.f=n(s)?Object.defineProperty:function(e,t,n){if(o(e),t=l(t,!0),o(n),c)try{return u(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n,i,r,a,s){var o=n(i),c=n(r),l=n(a);e.exports=n(s)?Object.defineProperties:function(e,t){c(e);for(var n,i=l(t),r=i.length,a=0;r>a;)o.f(e,n=i[a++],t[n]);return e}},function(e,t,n,i,r,a,s,o,c,l){var u=n(i),h=n(r),f=n(a),d=n(s),p=n(o),g=n(c),m=Object.getOwnPropertyDescriptor;t.f=n(l)?m:function(e,t){if(e=f(e),t=d(t,!0),g)try{return m(e,t)}catch(n){}if(p(e,t))return h(!u.f.call(e,t),e[t])}},function(e,t,n,i,r){var a=n(i),s=n(r).f,o={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return s(e)}catch(t){return c.slice()}};e.exports.f=function(e){return c&&"[object Window]"==o.call(e)?l(e):s(a(e))}},function(e,t,n,i,r){var a=n(i),s=n(r).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,s)}},function(e,t,n,i,r,a){var s=n(i),o=n(r),c=n(a)("IE_PROTO"),l=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),s(e,c)?e[c]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},function(e,t,n,i,r,a,s){var o=n(i),c=n(r),l=n(a)(!1),u=n(s)("IE_PROTO");e.exports=function(e,t){var n,i=c(e),r=0,a=[];for(n in i)n!=u&&o(i,n)&&a.push(n);for(;t.length>r;)o(i,n=t[r++])&&(~l(a,n)||a.push(n));return a}},function(e,t,n,i,r){var a=n(i),s=n(r);e.exports=Object.keys||function(e){return a(e,s)}},function(e,t,n,i,r,a){var s=n(i).f,o=n(r),c=n(a)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,c)&&s(e,c,{configurable:!0,value:t})}},function(e,t,n,i,r){var a=n(i)("keys"),s=n(r);e.exports=function(e){return a[e]||(a[e]=s(e))}},function(e,t,n,i){var r=n(i),a="__core-js_shared__",s=r[a]||(r[a]={});e.exports=function(e){return s[e]||(s[e]={})}},function(e,t,n,i,r){var a=n(i),s=n(r);e.exports=function(e){return function(t,n){var i,r,o=String(s(t)),c=a(n),l=o.length;return c<0||c>=l?e?"":void 0:(i=o.charCodeAt(c),i<55296||i>56319||c+1===l||(r=o.charCodeAt(c+1))<56320||r>57343?e?o.charAt(c):i:e?o.slice(c,c+2):(i-55296<<10)+(r-56320)+65536)}}},function(e,t,n,i){var r=n(i),a=Math.max,s=Math.min;e.exports=function(e,t){return e=r(e),e<0?a(e+t,0):s(e,t)}},function(e,t,n,i,r){var a=n(i),s=n(r);e.exports=function(e){return a(s(e))}},function(e,t,n,i){var r=n(i),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},function(e,t,n,i){var r=n(i);e.exports=function(e){return Object(r(e))}},function(e,t,n,i){var r=n(i);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n,i,r,a,s,o){var c=n(i),l=n(r),u=n(a),h=n(s),f=n(o).f;e.exports=function(e){var t=l.Symbol||(l.Symbol=u?{}:c.Symbol||{});"_"==e.charAt(0)||e in t||f(t,e,{value:h.f(e)})}},function(e,t,n,i){t.f=n(i)},function(e,t,n,i,r,a){var s=n(i)("wks"),o=n(r),c=n(a).Symbol,l="function"==typeof c,u=e.exports=function(e){return s[e]||(s[e]=l&&c[e]||(l?c:o)("Symbol."+e))};u.store=s},function(e,t,n,i,r,a,s){var o=n(i),c=n(r)("iterator"),l=n(a);e.exports=n(s).getIteratorMethod=function(e){if(void 0!=e)return e[c]||e["@@iterator"]||l[o(e)]}},function(e,t,n,i,r,a,s,o,c,l,u,h){"use strict";var f=n(i),d=n(r),p=n(a),g=n(s),m=n(o),v=n(c),_=n(l),y=n(u);d(d.S+d.F*!n(h)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,r,a=p(e),s="function"==typeof this?this:Array,o=arguments.length,c=o>1?arguments[1]:void 0,l=void 0!==c,u=0,h=y(a);if(l&&(c=f(c,o>2?arguments[2]:void 0,2)),void 0==h||s==Array&&m(h))for(t=v(a.length),n=new s(t);t>u;u++)_(n,u,l?c(a[u],u):a[u]);else for(r=h.call(a),n=new s;!(i=r.next()).done;u++)_(n,u,l?g(r,c,[i.value,u],!0):i.value);return n.length=u,n}})},function(e,t,n,i,r,a,s,o){"use strict";var c=n(i),l=n(r),u=n(a),h=n(s);e.exports=n(o)(Array,"Array",function(e,t){this._t=h(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,l(1)):"keys"==t?l(0,n):"values"==t?l(0,e[n]):l(0,[n,e[n]])},"values"),u.Arguments=u.Array,c("keys"),c("values"),c("entries")},function(e,t,n,i,r){"use strict";var a=n(i)(!0);n(r)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=a(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n,i,r,a,s,o,c,l,u,h,f,d,p,g,m,v,_,y,b,w,x,E,S,C,P,k,T,I,M,R,A){"use strict";var O=n(i),z=n(r),N=n(a),G=n(s),q=n(o),B=n(c).KEY,D=n(l),F=n(u),L=n(h),J=n(f),j=n(d),U=n(p),Q=n(g),H=n(m),Y=n(v),V=n(_),W=n(y),X=n(b),K=n(w),$=n(x),Z=n(E),ee=n(S),te=n(C),ne=n(P),ie=n(k),re=te.f,ae=ne.f,se=ee.f,oe=O.Symbol,ce=O.JSON,le=ce&&ce.stringify,ue="prototype",he=j("_hidden"),fe=j("toPrimitive"),de={}.propertyIsEnumerable,pe=F("symbol-registry"),ge=F("symbols"),me=F("op-symbols"),ve=Object[ue],_e="function"==typeof oe,ye=O.QObject,be=!ye||!ye[ue]||!ye[ue].findChild,we=N&&D(function(){return 7!=Z(ae({},"a",{get:function(){return ae(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=re(ve,t);i&&delete ve[t],ae(e,t,n),i&&e!==ve&&ae(ve,t,i)}:ae,xe=function(e){var t=ge[e]=Z(oe[ue]);return t._k=e,t},Ee=_e&&"symbol"==typeof oe.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof oe},Se=function(e,t,n){return e===ve&&Se(me,t,n),W(e),t=K(t,!0),W(n),z(ge,t)?(n.enumerable?(z(e,he)&&e[he][t]&&(e[he][t]=!1),n=Z(n,{enumerable:$(0,!1)})):(z(e,he)||ae(e,he,$(1,{})),e[he][t]=!0),we(e,t,n)):ae(e,t,n)},Ce=function(e,t){W(e);for(var n,i=Y(t=X(t)),r=0,a=i.length;a>r;)Se(e,n=i[r++],t[n]);return e},Pe=function(e,t){return void 0===t?Z(e):Ce(Z(e),t)},ke=function(e){var t=de.call(this,e=K(e,!0));return!(this===ve&&z(ge,e)&&!z(me,e))&&(!(t||!z(this,e)||!z(ge,e)||z(this,he)&&this[he][e])||t)},Te=function(e,t){if(e=X(e),t=K(t,!0),e!==ve||!z(ge,t)||z(me,t)){var n=re(e,t);return!n||!z(ge,t)||z(e,he)&&e[he][t]||(n.enumerable=!0),n}},Ie=function(e){for(var t,n=se(X(e)),i=[],r=0;n.length>r;)z(ge,t=n[r++])||t==he||t==B||i.push(t);return i},Me=function(e){for(var t,n=e===ve,i=se(n?me:X(e)),r=[],a=0;i.length>a;)!z(ge,t=i[a++])||n&&!z(ve,t)||r.push(ge[t]);return r};_e||(oe=function(){if(this instanceof oe)throw TypeError("Symbol is not a constructor!");var e=J(arguments.length>0?arguments[0]:void 0),t=function(n){this===ve&&t.call(me,n),z(this,he)&&z(this[he],e)&&(this[he][e]=!1),we(this,e,$(1,n))};return N&&be&&we(ve,e,{configurable:!0,set:t}),xe(e)},q(oe[ue],"toString",function(){return this._k}),te.f=Te,ne.f=Se,n(T).f=ee.f=Ie,n(I).f=ke,n(M).f=Me,N&&!n(R)&&q(ve,"propertyIsEnumerable",ke,!0),U.f=function(e){return xe(j(e))}),G(G.G+G.W+G.F*!_e,{Symbol:oe});for(var Re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ae=0;Re.length>Ae;)j(Re[Ae++]);for(var Re=ie(j.store),Ae=0;Re.length>Ae;)Q(Re[Ae++]);G(G.S+G.F*!_e,"Symbol",{"for":function(e){return z(pe,e+="")?pe[e]:pe[e]=oe(e)},keyFor:function(e){if(Ee(e))return H(pe,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){be=!0},useSimple:function(){be=!1}}),G(G.S+G.F*!_e,"Object",{create:Pe,defineProperty:Se,defineProperties:Ce,getOwnPropertyDescriptor:Te,getOwnPropertyNames:Ie,getOwnPropertySymbols:Me}),ce&&G(G.S+G.F*(!_e||D(function(){var e=oe();return"[null]"!=le([e])||"{}"!=le({a:e})||"{}"!=le(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!Ee(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&V(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!Ee(t))return t}),i[1]=t,le.apply(ce,i)}}}),oe[ue][fe]||n(A)(oe[ue],fe,oe[ue].valueOf),L(oe,"Symbol"),L(Math,"Math",!0),L(O.JSON,"JSON",!0)},function(e,t,n,i){n(i)("asyncIterator")},function(e,t,n,i){n(i)("observable")}]))});